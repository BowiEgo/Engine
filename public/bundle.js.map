{"version":3,"file":"bundle.js","sources":["../src/core/Camera.js","../src/core/Time.js","../src/core/Mouse.js","../src/utils/Common.js","../src/core/Events.js","../src/core/Scene.js","../src/geometry/Vertice.js","../src/renderer/CanvasRenderer.js","../src/renderer/Renderer.js","../src/core/Engine.js","../src/core/Object.js","../src/core/Input.js","../src/geometry/Projection.js","../src/collision/SAT.js","../src/shapes/Shape.js","../src/geometry/Vector.js","../src/shapes/Polygon.js","../src/shapes/Circle.js","../src/shapes/Rectangle.js","../src/shapes/Text.js","../src/shapes/Line.js","../src/shapes/Polyline.js","../src/utils/Dom.js","../src/widget/Performance.js","../src/main.js"],"sourcesContent":["let Camera = {};\n\nCamera.create = function (game) {\n  let camera = {};\n  camera.position = { x: 0, y: 0 };\n  camera.offset = { x: 0, y: 0 };\n  camera.scale = 1;\n  camera.lookAt = null;\n\n  let isDragging = false;\n  let lastMousePosition = { x: 0, y: 0 };\n\n  // trackTransforms(CanvasRenderer.context);\n\n  game.mouse.on('mousemove', mouse => {\n    if (isDragging) {\n      camera.offset = subPos(mouse.position, lastMousePosition);\n      camera.position = addPos(camera.position, camera.offset);\n      lastMousePosition.x = mouse.position.x;\n      lastMousePosition.y = mouse.position.y;\n      game.renderer.translate(camera.offset);\n    }\n  });\n\n  game.mouse.on('mouseout', mouse => {\n    isDragging = false;\n  });\n\n  game.mouse.on('mousedown', mouse => {\n    isDragging = true;\n    lastMousePosition.x = mouse.mousedownPosition.x;\n    lastMousePosition.y = mouse.mousedownPosition.y;\n  });\n\n  game.mouse.on('mouseup', mouse => {\n    camera.offset = { x: 0, y: 0 };\n    isDragging = false;\n  });\n\n  game.mouse.on('mousewheel', mouse => {\n    camera.scale *= (1 + mouse.wheelDelta * 0.03);\n    game.renderer.zoomToPoint(mouse.position, camera.scale);\n  });\n\n  camera.recover = function () {\n    game.renderer.clear(camera.scale);\n    game.renderer.context.translate(-camera.position.x, -camera.position.y);\n    game.renderer.context.scale(1 / camera.scale, 1 / camera.scale);\n    camera.scale = 1;\n    camera.offset = { x: 0, y: 0 };\n    camera.position = { x: 0, y: 0 };\n  };\n  return camera;\n}\n\nCamera.lookAt = function ()  {\n}\n\nCamera.follow = function ()  {\n}\n\nfunction addPos (posA, posB) {\n  return {\n    x: posA.x + posB.x,\n    y: posA.y + posB.y \n  }\n}\n\nfunction subPos (posA, posB) {\n  return {\n    x: posA.x - posB.x,\n    y: posA.y - posB.y \n  }\n}\n\n// function trackTransforms(context){\n//   let svg = document.createElementNS(\"http://www.w3.org/2000/svg\",'svg');\n//   let xform = svg.createSVGMatrix();\n\n//   let pt  = svg.createSVGPoint();\n//   context.transformedPoint = function(x,y){\n//     pt.x=x; pt.y=y;\n//     return pt.matrixTransform(xform.inverse());\n//   }\n// }\n\nexport default Camera\n","const STARTING_FPS = 60;\n\nlet Time = {\n  timeScale: 0,\n  unscaledDeltaTime: 0,\n  deltaTime: 0\n};\n\nTime.reset = () => {\n  Time.timeStart = 0;\n  Time.timePassed = 0;\n  Time.fps = STARTING_FPS;\n}\n\nTime.update = (timeStamp) => {\n  if (Time.timeStart === 0) {\n    Time.timeStart = timeStamp;\n    Time.fps = STARTING_FPS;\n  } else {\n    Time.fps = 1000 / (timeStamp - Time.timeStart);\n  }\n\n  Time.unscaledDeltaTime = 1 / Time.fps;\n  Time.deltaTime = Time.unscaledDeltaTime * Time.timeScale;\n\n  Time.timePassed += Time.unscaledDeltaTime;\n  Time.timeStart = timeStamp;\n}\n\nTime.reset();\n\nexport default Time\n","let Mouse = {};\n\nMouse.create = (element) => {\n  let mouse = {};\n\n  mouse.element = element;\n  mouse.absolute = { x: 0, y: 0 };\n  mouse.position = { x: 0, y: 0 };\n  mouse.mousedownPosition = { x: 0, y: 0 };\n  mouse.mouseupPosition = { x: 0, y: 0 };\n  mouse.offset = { x: 0, y: 0 };\n  mouse.scale = { x: 1, y: 1 };\n  mouse.wheelDelta = 0;\n  mouse.button = -1;\n  mouse.pixelRatio = parseInt(mouse.element.getAttribute('data-pixel-ratio'), 10) || 1;\n\n  mouse.sourceEvents = {\n    mousemove: null,\n    mouseout: null,\n    mousedown: null,\n    mouseup: null,\n    mousewheel: null\n  };\n\n  mouse.eventHooks = {\n    mousemove: null,\n    mouseout: null,\n    mousedown: null,\n    mouseup: null,\n    mousewheel: null\n  }\n\n  mouse.on = function (eventName, callback) {\n    mouse.eventHooks[eventName] = callback;\n  }\n\n  mouse.triggerHook = function (eventName) {\n    mouse.eventHooks[eventName].call(null, mouse);\n  }\n\n  mouse.mousemove = function (event) {\n    let position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n      touches = event.changedTouches;\n\n    if (touches) {\n      mouse.button = 0;\n      event.preventDefault();\n    }\n\n    mouse.absolute.x = position.x;\n    mouse.absolute.y = position.y;\n    mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n    mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    mouse.sourceEvents.mousemove = event;\n\n    mouse.triggerHook('mousemove');\n  }\n\n  mouse.mouseout = function () {\n    mouse.triggerHook('mouseout');\n  }\n\n  mouse.mousedown = function(event) {\n    let position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n      touches = event.changedTouches;\n\n    if (touches) {\n      mouse.button = 0;\n      event.preventDefault();\n    } else {\n      mouse.button = event.button;\n    }\n\n    mouse.absolute.x = position.x;\n    mouse.absolute.y = position.y;\n    mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n    mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    mouse.mousedownPosition.x = mouse.position.x;\n    mouse.mousedownPosition.y = mouse.position.y;\n    mouse.sourceEvents.mousedown = event;\n\n    mouse.triggerHook('mousedown');\n  };\n\n  mouse.mouseup = function(event) {\n    let position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n      touches = event.changedTouches;\n\n    if (touches) {\n      event.preventDefault();\n    }\n    \n    mouse.button = -1;\n    mouse.absolute.x = position.x;\n    mouse.absolute.y = position.y;\n    mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n    mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    mouse.mouseupPosition.x = mouse.position.x;\n    mouse.mouseupPosition.y = mouse.position.y;\n    mouse.sourceEvents.mouseup = event;\n\n    mouse.triggerHook('mouseup');\n  };\n\n  mouse.mousewheel = function(event) {\n    mouse.wheelDelta = Math.max(-1, Math.min(1, event.wheelDelta || -event.detail));\n    event.preventDefault();\n\n    mouse.triggerHook('mousewheel');\n  };\n\n  Mouse.setElement(mouse, element);\n\n  return mouse;\n};\n\nMouse.setElement = (mouse, element) => {\n  element.addEventListener('mousemove', mouse.mousemove);\n  element.addEventListener('mouseout', mouse.mouseout);\n  element.addEventListener('mousedown', mouse.mousedown);\n  element.addEventListener('mouseup', mouse.mouseup);\n  \n  element.addEventListener('mousewheel', mouse.mousewheel);\n  element.addEventListener('DOMMouseScroll', mouse.mousewheel);\n\n  element.addEventListener('touchmove', mouse.mousemove);\n  element.addEventListener('touchstart', mouse.mousedown);\n  element.addEventListener('touchend', mouse.mouseup);\n};\n\n/**\n * Sets the mouse position offset.\n * @method setOffset\n * @param {mouse} mouse\n * @param {vector} offset\n */\nMouse.setOffset = function(mouse, offset) {\n  mouse.offset.x = offset.x;\n  mouse.offset.y = offset.y;\n  mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n  mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n};\n\n/**\n * Sets the mouse position scale.\n * @method setScale\n * @param {mouse} mouse\n * @param {vector} scale\n */\nMouse.setScale = function(mouse, scale) {\n  mouse.scale.x = scale.x;\n  mouse.scale.y = scale.y;\n  mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n  mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n};\n\n/**\n * Gets the mouse position relative to an element given a screen pixel ratio.\n * @method _getRelativeMousePosition\n * @private\n * @param {} event\n * @param {} element\n * @param {number} pixelRatio\n * @return {}\n */\nMouse._getRelativeMousePosition = function(event, element, pixelRatio) {\n  let elementBounds = element.getBoundingClientRect(),\n    rootNode = (document.documentElement || document.body.parentNode || document.body),\n    scrollX = (window.pageXOffset !== undefined) ? window.pageXOffset : rootNode.scrollLeft,\n    scrollY = (window.pageYOffset !== undefined) ? window.pageYOffset : rootNode.scrollTop,\n    touches = event.changedTouches,\n    x, y;\n  \n  if (touches) {\n    x = touches[0].pageX - elementBounds.left - scrollX;\n    y = touches[0].pageY - elementBounds.top - scrollY;\n  } else {\n    x = event.pageX - elementBounds.left - scrollX;\n    y = event.pageY - elementBounds.top - scrollY;\n  }\n\n  return { \n    x: x / (element.clientWidth / (element.width || element.clientWidth) * pixelRatio),\n    y: y / (element.clientHeight / (element.height || element.clientHeight) * pixelRatio)\n  };\n};\n\nexport default Mouse\n","export function extend (obj, deep) {\n  var argsStart,\n    deepClone;\n\n  if (typeof deep === 'boolean') {\n    argsStart = 2;\n    deepClone = deep;\n  } else {\n    argsStart = 1;\n    deepClone = true;\n  }\n\n  for (var i = argsStart; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    if (source) {\n      for (var prop in source) {\n        if (deepClone && source[prop] && source[prop].constructor === Object) {\n          if (!obj[prop] || obj[prop].constructor === Object) {\n            obj[prop] = obj[prop] || {};\n            extend(obj[prop], deepClone, source[prop]);\n          } else {\n            obj[prop] = source[prop];\n          }\n        } else {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n  }\n  \n  return obj;\n}\n\nexport function clone (obj, deep) {\n  return extend({}, deep, obj);\n}\n\nexport function keys (obj) {\n  if (Object.keys)\n    return Object.keys(obj);\n\n  // avoid hasOwnProperty for performance\n  var keys = [];\n  for (var key in obj)\n    keys.push(key);\n  return keys;\n}\n\nexport function isArray (obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n}\n\nexport function isFunction (obj) {\n  return typeof obj === 'function';\n}\n","import { keys, clone } from '../utils/Common';\n\nlet Events = {};\n\nEvents.create = function (game) {\n  this.game = game;\n  game.events = {};\n}\n\nEvents.on = function (eventNames, callback) {\n  let names = eventNames.split(' '),\n    name;\n\n  for (let i = 0; i < names.length; i++) {\n    name = names[i];\n    this.game.events[name] = this.game.events[name] || [];\n    this.game.events[name].push(callback);\n  }\n\n  return callback;\n}\n\nEvents.off = function(eventNames, callback) {\n  if (!eventNames) {\n    object.events = {};\n    return;\n  }\n\n  // handle Events.off(callback)\n  if (typeof eventNames === 'function') {\n    callback = eventNames;\n    eventNames = keys(this.game.events).join(' ');\n  }\n\n  let names = eventNames.split(' ');\n\n  for (let i = 0; i < names.length; i++) {\n    let callbacks = this.game.events[names[i]],\n      newCallbacks = [];\n\n    if (callback && callbacks) {\n      for (let j = 0; j < callbacks.length; j++) {\n        if (callbacks[j] !== callback)\n          newCallbacks.push(callbacks[j]);\n      }\n    }\n\n    this.game.events[names[i]] = newCallbacks;\n  }\n};\n\nEvents.trigger = function(eventNames, event) {\n  let names,\n    name,\n    callbacks,\n    eventClone;\n\n  let events = this.game.events;\n\n  if (events && keys(events).length > 0) {\n    if (!event)\n      event = {};\n\n    names = eventNames.split(' ');\n\n    for (let i = 0; i < names.length; i++) {\n      name = names[i];\n      callbacks = events[name];\n\n      if (callbacks) {\n        eventClone = clone(event, false);\n        eventClone.name = name;\n        eventClone.source = this.game;\n\n        for (let j = 0; j < callbacks.length; j++) {\n          callbacks[j].apply(this.game, [eventClone]);\n        }\n      }\n    }\n  }\n};\n\nexport default Events;\n","import Events from '../core/Events';\n\nlet Scene = {};\n\nScene.create = (game) => {\n  let scene = {};\n\n  scene.objects = [];\n\n  scene.addObject = (object) => {\n    scene.objects.push(object);\n\n    Events.trigger('addObject', object);\n  }\n\n  scene.reset = () => {\n    scene.objects.forEach((object) => {\n      object.reset();\n    })\n  }\n\n  scene.update = () => {\n    scene.objects.forEach((object) => {\n      if (game.status === 'playing') {\n        object.updateCb.call(object);\n      }\n    })\n  }\n\n  return scene\n}\n\nexport default Scene\n","class Vertice {\n  constructor (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\nexport default Vertice\n","import Events from '../core/Events';\nimport Point from '../geometry/Vertice'\n\nconst iMatrix = [1, 0, 0, 1, 0, 0];\n\nexport default class CanvasRenderer {\n  constructor (opts) {\n    const { width = 300, height = 300, bgColor = 'aliceblue' } = opts;\n\n    this.canvas = _createCanvas();\n    this.context = this.canvas.getContext('2d');\n    this.viewportTransform = iMatrix;\n\n    this.pixelRatio = _getPixelRatio(this.canvas);\n    this.canvas.setAttribute('data-pixel-ratio', this.pixelRatios);\n    this.context.scale(this.pixelRatio, this.pixelRatio);\n\n    this.canvas.width = width * this.pixelRatio;\n    this.canvas.height = height * this.pixelRatio;\n    this.canvas.style.width = width + 'px';\n    this.canvas.style.height = height + 'px';\n    this.canvas.style.backgroundColor = bgColor;\n  }\n\n  get width () {\n    return this.canvas.width;\n  }\n\n  get height () {\n    return this.canvas.height;\n  }\n\n  getZoom () {\n    return this.viewportTransform[0];\n  }\n\n  setViewportTransform (vpt) {\n    this.viewportTransform = vpt;\n  }\n\n  resetTransform () {\n    this.setViewportTransform(iMatrix);\n  }\n\n  zoomToPoint (point, value) {\n    var before = point, vpt = this.viewportTransform.slice(0);\n    point = transformPoint(point, invertTransform(this.viewportTransform));\n    vpt[0] = value;\n    vpt[3] = value;\n    var after = transformPoint(point, vpt);\n    vpt[4] += before.x - after.x;\n    vpt[5] += before.y - after.y;\n\n    this.setViewportTransform(vpt);\n  }\n\n  translate (offset) {\n    this.clear();\n    this.context.translate(offset.x, offset.y);\n  }\n\n  render (objects) {\n    const { context, pixelRatio } = this;\n    let vpt = this.viewportTransform;\n    context.save();\n    context.transform(\n      vpt[0] * pixelRatio,\n      vpt[1],\n      vpt[2],\n      vpt[3] * pixelRatio,\n      vpt[4],\n      vpt[5]\n    );\n    _renderObjects(this.context, objects);\n    context.restore();\n    Events.trigger('rendered', this.context);\n  }\n\n  clear () {\n    this.context.clearRect(0, 0, this.width, this.height);\n  }\n}\n\nfunction _createCanvas () {\n  let canvas = document.createElement('canvas');\n  canvas.getPixelRatio = _getPixelRatio.bind(null, canvas);\n  return canvas;\n}\n\n/**\n * Gets the pixel ratio of the canvas.\n */\nfunction _getPixelRatio (canvas) {\n  var context = canvas.getContext('2d'),\n    devicePixelRatio = window.devicePixelRatio || 1,\n    backingStorePixelRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio ||\n    context.msBackingStorePixelRatio ||\n    context.oBackingStorePixelRatio ||\n    context.backingStorePixelRatio || 1;\n\n  return devicePixelRatio / backingStorePixelRatio;\n}\n\n/**\n * Render several types of graphics in canvas\n */\nfunction _renderObjects (context, objects) {\n  objects = objects || [];\n  objects.forEach(object => {\n    const shapeType = object.shape.type;\n\n    switch (shapeType) {\n      case 'polygon':\n        _renderPolygon(context, object.shape);\n        break;\n      case 'rectangle':\n        _renderRectangle(context, object.shape);\n        break;\n      case 'circle':\n        _renderCircle(context, object.shape);\n        break;\n      case 'text':\n        _renderText(context, object.shape);\n        break;\n      case 'polyline':\n        _renderPolyline(context, object.shape);\n        break;\n      default:\n        break;\n    }\n  })\n}\n\nfunction _renderPolygon (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.beginPath();\n  context.moveTo(shape.vertices[0].x + posX, shape.vertices[0].y + posY);\n  for (let i = 1; i < shape.vertices.length; i++) {\n    context.lineTo(shape.vertices[i].x + posX, shape.vertices[i].y + posY);\n  }\n  context.closePath();\n\n  _draw(context, shape);\n}\n\nfunction _renderRectangle (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.beginPath();\n  context.rect(posX, posY, shape.width, shape.height);\n  context.closePath();\n\n  _draw(context, shape);\n}\n\nfunction _renderCircle (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.beginPath();\n  context.arc(posX, posY, shape.radius, 0, Math.PI * 2, false);\n  context.closePath();\n\n  _draw(context, shape);\n}\n\nfunction _renderText (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.font = shape.font;\n  context.fillStyle = shape.fillStyle;\n  context.strokeStyle = shape.strokeStyle;\n  shape.fill && context.fillText(shape.text, posX, posY);\n  shape.strokeWidth > 0 && context.strokeText(shape.text, posX, posY);\n}\n\nfunction _renderPolyline (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.beginPath();\n  context.moveTo(shape.vertices[0].x + posX, shape.vertices[0].y + posY);\n  for (let i = 1; i < shape.vertices.length; i++) {\n    context.lineTo(shape.vertices[i].x + posX, shape.vertices[i].y + posY);\n  }\n  shape.close && context.closePath();\n\n  _drawLine(context, shape);\n}\n\n// function _renderFill (context) {\n//   context.save();\n//   context.fill();\n//   context.restore();\n// }\n\n// function _renderStroke (context) {\n//   context.save();\n//   context.stroke();\n//   context.restore();\n// }\n\nfunction _draw (context, shape) {\n  context.save();\n  context.lineWidth = shape.strokeWidth;\n  context.strokeStyle = shape.strokeStyle;\n  context.fillStyle = shape.fillStyle;\n  shape.strokeWidth > 0 && context.stroke();\n  shape.fill && context.fill();\n  context.restore();\n}\n\nfunction _drawLine (context, shape) {\n  context.save();\n  context.lineWidth = shape.strokeWidth;\n  context.strokeStyle = shape.strokeStyle;\n  context.stroke();\n  context.restore();\n}\n\nfunction transformPoint (p, t, ignoreOffset) {\n  if (ignoreOffset) {\n    return new Point(\n      t[0] * p.x + t[2] * p.y,\n      t[1] * p.x + t[3] * p.y\n    );\n  }\n  return new Point(\n    t[0] * p.x + t[2] * p.y + t[4],\n    t[1] * p.x + t[3] * p.y + t[5]\n  );\n}\n\nfunction invertTransform (t) {\n  var a = 1 / (t[0] * t[3] - t[1] * t[2]),\n    r = [a * t[3], -a * t[1], -a * t[2], a * t[0]],\n    o = transformPoint({ x: t[4], y: t[5] }, r, true);\n  r[4] = -o.x;\n  r[5] = -o.y;\n  return r;\n}\n","import CanvasRenderer from './CanvasRenderer';\n\nlet Renderer = {};\n\nRenderer.create = (el, opts) => {\n  let renderer = new CanvasRenderer(opts);\n\n  el.append(renderer.canvas);\n\n  return renderer;\n}\n\nexport default Renderer;\n","import Camera from './Camera';\nimport Time from './Time';\nimport Mouse from './Mouse';\nimport Scene from './Scene';\nimport Events from './Events';\nimport { Renderer, CanvasRenderer } from '../renderer';\n\nlet _reqFrame, _cancelFrame, _frameTimeout;\nif (typeof window !== 'undefined') {\n  _reqFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function (callback) {\n    var self = this, start, finish;\n\n    _frameTimeout = window.setTimeout(function () {\n      start = +new Date();\n      callback(start);\n      finish = +new Date();\n      self.timeout = 1000 / 60 - (finish - start);\n    }, self.timeout);\n  };\n\n  _cancelFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame || function () {\n    window.clearTimeout(_frameTimeout);\n  };\n}\n\nlet Engine = {};\n\nEngine.create = (el, opts) => {\n  let game = {};\n  game.el = el;\n  game.status = 'stop';\n  game.PAUSE_TIMEOUT = 100;\n\n  Events.create(game);\n\n  game.renderer = Renderer.create(\n    el,\n    opts\n  );\n\n  game.view = game.renderer.canvas;\n\n  game.mouse = Mouse.create(game.view);\n\n  game.camera = Camera.create(game);\n\n  game.scene = Scene.create(game);\n\n  game.start = () => {\n    Time.timeScale = 1;\n    Engine.run(game);\n    game.status = 'playing';\n  }\n\n  game.restart = () => {\n    Engine.reset(game);\n    game.start();\n  }\n\n  game.pause = () => {\n    if (game.status === 'playing') {\n      Time.timeScale = 0;\n      game.status = 'paused';\n    }\n  }\n\n  game.resume = () => {\n    if (game.status === 'paused') {\n      Time.timeScale = 1;\n      game.status = 'playing';\n    }\n  }\n\n  game.stop = () => {\n    Engine.reset(game);\n    game.status = 'stop';\n  }\n\n  Engine.reset(game);\n\n  Events.on('addObject', (object) => {\n    game.renderer.render([object]);\n  })\n\n  return game;\n}\n\nEngine.reset = (game) => {\n  _cancelFrame(game.frameReq);\n  Time.reset();\n  game.frameReq = null;\n  game.scene.reset();\n  game.renderer.clear();\n  game.renderer.render(game.scene.objects);\n}\n\nEngine.run = (game) => {\n  if (game.frameReq) {\n    game.stop();\n  }\n\n  game.frameReq = _reqFrame((timeStamp) => tick.call(null, timeStamp));\n\n  function tick (timeStamp) {\n    Events.trigger('tick', timeStamp);\n    Time.update(timeStamp); // update Time\n    game.scene.update();\n    game.renderer.clear();\n    game.renderer.render(game.scene.objects);\n    game.frameReq = _reqFrame((timeStamp) => tick.call(null, timeStamp));\n  }\n}\n\nexport default Engine\n","import { isFunction } from '../utils/Common';\n\nexport default class Object {\n  constructor (opts) {\n    this.shape = opts.shape;\n    this.fill = opts.fill !== undefined ? opts.fill : '#83cbff';\n    this.startCb = isFunction(opts.start) ? opts.start : this.start;\n    this.updateCb = isFunction(opts.update) ? opts.update : this.update;\n    this.transform0 = {\n      position: {\n        x: opts.transform.position.x || 0,\n        y: opts.transform.position.y || 0\n      }\n    }\n\n    this.reset();\n  }\n\n  start () {\n  }\n\n  update () {\n  }\n\n  reset () {\n    this.shape.transform = this.transform = JSON.parse(JSON.stringify(this.transform0));\n  }\n\n  render () {\n    const { context } = this.Scene;\n    const { position } = this.transform;\n    const rectW = 40;\n    const rectH = 40;\n\n    context.fillStyle = this.fill;\n    context.fillRect(position.x, position.y, rectW, rectH);\n  }\n}\n","let Input = {\n  keyCodeArray: []\n};\n\nInput.create = () => {\n  document.onkeydown = (event) => {\n    const { keyCode } = event;\n    let idx = Input.keyCodeArray.indexOf(keyCode);\n\n    if (idx === -1) {\n      Input.keyCodeArray.push(keyCode);\n    }\n  }\n\n  document.onkeyup = (event) => {\n    const { keyCode } = event;\n    let idx = Input.keyCodeArray.indexOf(keyCode);\n    if (idx > -1) {\n      Input.keyCodeArray.splice(idx, 1);\n    }\n  }\n}\n\nInput.getAxis = (direction) => {\n  if (direction === 'horizontal') {\n    if (Input.keyCodeArray.indexOf(37) > -1) {\n      return -1\n    }\n    if (Input.keyCodeArray.indexOf(39) > -1) {\n      return 1\n    }\n    return 0\n  }\n\n  if (direction === 'vertical') {\n    if (Input.keyCodeArray.indexOf(38) > -1) {\n      return -1\n    }\n    if (Input.keyCodeArray.indexOf(40) > -1) {\n      return 1\n    }\n    return 0\n  }\n}\n\nInput.create();\n\n// class Input {\n//   constructor () {\n//     this.keyCodeArray = [];\n\n//     document.onkeydown = (event) => {\n//       const { keyCode } = event;\n//       let idx = this.keyCodeArray.indexOf(keyCode);\n\n//       if (idx === -1) {\n//         this.keyCodeArray.push(keyCode);\n//       }\n//     }\n\n//     document.onkeyup = (event) => {\n//       const { keyCode } = event;\n//       let idx = this.keyCodeArray.indexOf(keyCode);\n//       if (idx > -1) {\n//         this.keyCodeArray.splice(idx, 1);\n//       }\n//     }\n//   }\n\n//   getAxis (direction) {\n    \n//   }\n// }\n\nexport default Input\n","class Projection {\n  constructor (min, max) {\n    if (min > max) {\n      throw 'min value should less than max value';\n    }\n    this.min = min;\n    this.max = max;\n  }\n\n  overlaps (projection) {\n    // return this.max > projection.min && projection.max > this.min;\n  }\n}\n\nexport default Projection\n","let SAT = {};\n\nSAT.detectCollide = (shapeA, shapeB) => {\n  return !SAT.separationOnAxes(shapeA, shapeB);\n}\n\nSAT.separationOnAxes = (shapeA, shapeB) => {\n  let axes = shapeA.getAxes().concat(shapeB.getAxes());\n\n  for (let i = 0; i < axes.length; i++) {\n    let axis = axes[i];\n    let projection1 = shapeA.project(axis);\n    let projection2 = shapeB.project(axis);\n    if (!projection1.overlaps(projection2)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default SAT\n","import SAT from '../collision/SAT';\n\nclass Shape {\n  constructor (opts) {\n    opts = opts || {};\n    this.transform = {\n      position: {}\n    };\n    this.fill = opts.fill === undefined ? true : !!opts.fill;\n    this.fillStyle = opts.fillStyle || '#83cbff';\n    this.strokeWidth = opts.strokeWidth || 0;\n    this.strokeStyle = opts.stroke || 'grey';\n  }\n\n  collidesWith (otherShape) {\n    return SAT.detectCollide(this, otherShape);\n  }\n\n  getAxes () {\n    throw 'getAxes() not implemented';\n  }\n\n  project () {\n    throw 'project(axis) not implemented';\n  }\n\n  move () {\n    throw 'move(dx, dy) note implemented';\n  }\n}\n\nexport default Shape\n","class Vector {\n  constructor (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  magnitude () {\n    return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n  }\n\n  add (vector) {\n    let v = new Vector();\n    v.x = this.x + vector.x;\n    v.y = this.y + vector.y;\n    return v;\n  }\n\n  /**\n   * Subtracts another vector.\n   * @method sub\n   * @param {vector} vector\n   * @return {vector} A new vector of two vector subtracted\n   */\n  sub (vector) {\n    let v = new Vector();\n    v.x = this.x - vector.x;\n    v.y = this.y - vector.y;\n    return v;\n  }\n\n  dot (vector) {\n    return this.x * vector.x + this.y * vector.y;\n  }\n\n  edge (vector) {\n    return this.sub(vector);\n  }\n\n  /**\n   * Returns the perpendicular vector. Set `negate` to true for the perpendicular in the opposite direction.\n   * @method perp\n   * @param {vector} vector\n   * @param {bool} [negate=false]\n   * @return {vector} The perpendicular vector\n   */\n  perp (negate) {\n    negate = negate === true ? -1 : 1;\n    let v = new Vector();\n    v.x = negate * -this.y;\n    v.y = negate * this.x;\n    return v;\n  }\n\n  normalize () {\n    let v = new Vector(0, 0), m = this.magnitude();\n\n    if (m !== 0) {\n      v.x = this.x / m;\n      v.y = this.y / m;\n    }\n    return v;\n  }\n\n  normal () {\n    let p = this.perp();\n    return p.normalize();\n  }\n}\n\nexport default Vector","import Projection from '../geometry/Projection';\nimport Shape from './Shape';\nimport Vector from '../geometry/Vector';\nimport Vertice from '../geometry/Vertice';\n\nclass Polygon extends Shape {\n  constructor (points, opts) {\n    super(opts);\n    this.type = 'polygon';\n    this.vertices = points.map(point => new Vertice(point[0], point[1]));\n  }\n\n  getAxes () {\n    const { x: posX, y: posY } = this.transform.position;\n\n    let v1 = new Vector(),\n      v2 = new Vector(),\n      axes = [],\n      pointNum = this.vertices.length;\n\n  \n    for (let i = 0; i < pointNum - 1; i++) {\n      v1.x = this.vertices[i].x + posX;\n      v1.y = this.vertices[i].y + posY;\n\n      v2.x = this.vertices[i + 1].x + posX;\n      v2.y = this.vertices[i + 1].y + posY;\n\n      axes.push(v1.edge(v2).normal());\n    }\n\n    v1.x = this.vertices[pointNum - 1].x + posX;\n    v1.y = this.vertices[pointNum - 1].y + posY;\n\n    v2.x = this.vertices[0].x + posX;\n    v2.y = this.vertices[0].y + posY;\n    \n    axes.push(v1.edge(v2).normal());\n\n    return axes;\n  }\n\n  project (axis) {\n    const { x: posX, y: posY } = this.transform.position;\n\n    let scalars = [],\n      v = new Vector();\n\n    this.vertices.forEach(point => {\n      v.x = point.x + posX;\n      v.y = point.y + posY;\n      scalars.push(v.dot(axis));\n    })\n\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  addPoint (x, y) {\n    this.vertices.push(new Vertice(x, y));\n  }\n\n  move (dx, dy) {\n    for (let i = 0, point; i < this.vertices.length; i++) {\n      point = this.vertices[i];\n      point.x += dx;\n      point.y += dy;\n    }\n  }\n}\n\nexport default Polygon;\n","import Shape from './Shape';\n\nclass Cirlce extends Shape {\n  constructor (radius, opts) {\n    super(opts);\n    this.type = 'circle';\n    this.radius = radius;\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Cirlce;","import Shape from './Shape';\n\nclass Rectangle extends Shape {\n  constructor (width, height, opts) {\n    super(opts);\n    this.type = 'rectangle';\n    this.width = width;\n    this.height = height;\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Rectangle;","import Shape from './Shape';\n\nclass Text extends Shape {\n  constructor (text, opts) {\n    super(opts);\n    this.type = 'text';\n    this.text = text;\n    this.font = '18px verdana';\n    this.fillStyle = '#333';\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Text;","class Line {\n  constructor (opts) {\n    opts = opts || {};\n    this.transform = {\n      position: {}\n    };\n    this.close = !!opts.close;\n    this.style = this.style || 'solid';\n    this.fill = opts.fill === undefined ? true : !!opts.fill;\n    this.fillStyle = opts.fillStyle || '#83cbff';\n    this.strokeWidth = opts.strokeWidth || 0;\n    this.strokeStyle = opts.stroke || 'grey';\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Line;","import Line from './Line';\nimport Vertice from '../geometry/Vertice';\n\nclass Polyline extends Line {\n  constructor (points, opts) {\n    super(opts);\n    this.type = 'polyline';\n    this.vertices = points.map(point => new Vertice(point[0], point[1]));\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Polyline;","export function insertAfter (el, targetEl) {\n  let parent = targetEl.parentNode;\n  if ( parent.lastChild === targetEl ){\n    parent.appendChild(el);\n  } else {\n    parent.insertBefore(el, targetEl.nextSibling);\n  }\n}\n","import Time from '../core/Time';\nimport Events from '../core/Events';\nimport CanvasRenderer from '../renderer/CanvasRenderer';\nimport { insertAfter } from '../utils/Dom';\n\nlet Performance = {};\n\nPerformance.create = function (game, opts) {\n  let performance = {};\n  let view = game.view.getBoundingClientRect();\n\n  opts = opts || {};\n  performance.el = document.createElement('div');\n  performance.el.className = 'performance-widget';\n  performance.el.style.position = 'absolute';\n  performance.el.style.top = view.top + 'px';\n  performance.el.style.left = view.left + 'px';\n  performance.el.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';\n  performance.el.style.padding = '4px 10px';\n\n  _addFPS(performance);\n  insertAfter(performance.el, game.view);\n\n  Events.on('tick', function () {\n    Performance.update(performance);\n  })\n\n  game.widget = game.widget || {};\n  game.widget['performance'] = Performance;\n}\n\nPerformance.update = function (performance) {\n  performance.fpsEl.innerText = Time.fps.toFixed(2);\n}\n\nfunction _addFPS (performance) {\n  performance.fpsEl = document.createElement('div');\n  performance.el.append(performance.fpsEl);\n  performance.fpsEl.style.color = 'white';\n}\n\nexport default Performance;\n","/*global ENV*/\nimport Engine from './core/Engine';\nimport Object from './core/Object';\nimport Input from './core/Input';\nimport Time from './core/Time';\nimport Polygon from './shapes/Polygon';\nimport Circle from './shapes/Circle';\nimport Rectangle from './shapes/Rectangle';\nimport Text from './shapes/Text';\nimport Polyline from './shapes/Polyline';\nimport Performance from './widget/Performance';\n\n// Enable LiveReload\nif (ENV !== 'production') {\n  document.write(\n    '<script src=\"http://' + (location.host || 'localhost').split(':')[0] +\n    ':35729/livereload.js?snipver=1\"></' + 'script>'\n  )\n}\n\nconst myGame = Engine.create(document.getElementById('stage'), {\n  width: 600,\n  height: 300\n});\nPerformance.create(myGame);\nconst startBtn = document.getElementById('start');\nconst stopBtn = document.getElementById('stop');\nconst pauseBtn = document.getElementById('pause');\nconst fastBtn = document.getElementById('fastward');\nconst recoverBtn = document.getElementById('recover');\n\nlet player = new Object({\n  shape: new Polygon([\n    [0, 0],\n    [60, 0],\n    [60, 20],\n    [30, 40],\n    [10, 40]\n  ], {\n    fillStyle: '#009688'\n  }),\n  transform: {\n    position: {\n      x: 230,\n      y: 150\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n    let { transform } = this;\n\n    const horizontalInput = Input.getAxis('horizontal');\n    const verticalInput = Input.getAxis('vertical');\n    const speed = 100;\n\n    transform.position.x += speed * Time.deltaTime * horizontalInput;\n    transform.position.y += speed * Time.deltaTime * verticalInput;\n\n    if (this.shape.collidesWith(obstacle1.shape)) {\n      console.log('collide!!');\n    }\n  }\n});\n\nlet obstacle1 = new Object({\n  shape: new Rectangle(600, 20),\n  transform: {\n    position: {\n      x: 0,\n      y: 270\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n  }\n});\n\nlet obstacle2 = new Object({\n  shape: new Circle(20, {\n    fillStyle: '#ffc107'\n  }),\n  transform: {\n    position: {\n      x: 100,\n      y: 50\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n    // let { transform } = this;\n\n    // const speed = 100;\n    // transform.position.x += speed * Time.deltaTime;\n  }\n});\n\nlet title = new Object({\n  shape: new Text('Engine Test'),\n  transform: {\n    position: {\n      x: 200,\n      y: 50\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n  }\n});\n\nlet polyline = new Object({\n  shape: new Polyline([\n    [0, 0],\n    [60, 0],\n    [60, 20],\n    [30, 40],\n    [10, 40]\n  ], {\n    style: 'dashed'\n  }),\n  transform: {\n    position: {\n      x: 320,\n      y: 150\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n  }\n});\n\nmyGame.scene.addObject(obstacle1);\nmyGame.scene.addObject(obstacle2);\nmyGame.scene.addObject(title);\nmyGame.scene.addObject(polyline);\nmyGame.scene.addObject(player);\n\nmyGame.start();\n\nstartBtn.addEventListener('click', () => {\n  myGame.restart();\n})\n\nstopBtn.addEventListener('click', () => {\n  myGame.stop();\n})\n\npauseBtn.addEventListener('click', () => {\n  if (myGame.status === 'paused') {\n    myGame.resume();\n  } else {\n    myGame.pause();\n  }\n})\n\nfastBtn.addEventListener('click', () => {\n  myGame.Time.timeScale = 1.5;\n})\n\nrecoverBtn.addEventListener('click', () => {\n  myGame.camera.recover();\n})\n\nconsole.log('myGame', myGame);\n"],"names":["Camera","create","game","camera","position","x","y","offset","scale","lookAt","isDragging","lastMousePosition","mouse","on","subPos","addPos","renderer","translate","mousedownPosition","wheelDelta","zoomToPoint","recover","clear","context","follow","posA","posB","STARTING_FPS","Time","timeScale","unscaledDeltaTime","deltaTime","reset","timeStart","timePassed","fps","update","timeStamp","Mouse","element","absolute","mouseupPosition","button","pixelRatio","parseInt","getAttribute","sourceEvents","mousemove","mouseout","mousedown","mouseup","mousewheel","eventHooks","eventName","callback","triggerHook","call","event","_getRelativeMousePosition","touches","changedTouches","preventDefault","Math","max","min","detail","setElement","addEventListener","setOffset","setScale","elementBounds","getBoundingClientRect","rootNode","document","documentElement","body","parentNode","scrollX","window","pageXOffset","undefined","scrollLeft","scrollY","pageYOffset","scrollTop","pageX","left","pageY","top","clientWidth","width","clientHeight","height","extend","obj","deep","argsStart","deepClone","i","arguments","length","source","prop","constructor","Object","clone","keys","key","push","isFunction","Events","events","eventNames","names","split","name","off","object","join","callbacks","newCallbacks","j","trigger","eventClone","apply","Scene","scene","objects","addObject","forEach","status","updateCb","Vertice","iMatrix","CanvasRenderer","opts","bgColor","canvas","_createCanvas","getContext","viewportTransform","_getPixelRatio","setAttribute","pixelRatios","style","backgroundColor","vpt","setViewportTransform","point","value","before","slice","transformPoint","invertTransform","after","save","transform","_renderObjects","restore","clearRect","createElement","getPixelRatio","bind","devicePixelRatio","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","shapeType","shape","type","_renderPolygon","_renderRectangle","_renderCircle","_renderText","_renderPolyline","posX","posY","beginPath","moveTo","vertices","lineTo","closePath","_draw","rect","arc","radius","PI","font","fillStyle","strokeStyle","fill","fillText","text","strokeWidth","strokeText","close","_drawLine","lineWidth","stroke","p","t","ignoreOffset","Point","a","r","o","Renderer","el","append","_reqFrame","_cancelFrame","_frameTimeout","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","self","start","finish","setTimeout","Date","timeout","cancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","Engine","PAUSE_TIMEOUT","view","run","restart","pause","resume","stop","render","frameReq","tick","startCb","transform0","JSON","parse","stringify","rectW","rectH","fillRect","Input","keyCodeArray","onkeydown","keyCode","idx","indexOf","onkeyup","splice","getAxis","direction","Projection","projection","SAT","detectCollide","shapeA","shapeB","separationOnAxes","axes","getAxes","concat","axis","projection1","project","projection2","overlaps","Shape","otherShape","Vector","sqrt","pow","vector","v","sub","negate","m","magnitude","perp","normalize","Polygon","points","map","v1","v2","pointNum","edge","normal","scalars","dot","dx","dy","Cirlce","Rectangle","Text","Line","Polyline","insertAfter","targetEl","parent","lastChild","appendChild","insertBefore","nextSibling","Performance","performance","className","padding","_addFPS","widget","fpsEl","innerText","toFixed","color","write","location","host","myGame","getElementById","startBtn","stopBtn","pauseBtn","fastBtn","recoverBtn","player","horizontalInput","verticalInput","speed","collidesWith","obstacle1","console","log","obstacle2","Circle","title","polyline"],"mappings":"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"}