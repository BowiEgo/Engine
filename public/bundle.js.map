{"version":3,"file":"bundle.js","sources":["../src/core/CanvasRenderer.js","../src/core/Camera.js","../src/core/Time.js","../src/core/Mouse.js","../src/core/Scene.js","../src/utils/Common.js","../src/core/Events.js","../src/core/Render.js","../src/core/Engine.js","../src/core/Object.js","../src/core/Input.js","../src/geometry/Vertices.js","../src/geometry/Projection.js","../src/collision/SAT.js","../src/shape/Shape.js","../src/geometry/Vector.js","../src/shape/Polygon.js","../src/shape/Circle.js","../src/shape/Rectangle.js","../src/shape/Text.js","../src/line/Line.js","../src/line/Polyline.js","../src/utils/Dom.js","../src/widget/Performance.js","../src/main.js"],"sourcesContent":["let CanvasRenderer = {\n  canvas: _createCanvas()\n};\n\nCanvasRenderer.context = CanvasRenderer.canvas.getContext('2d');\n\nCanvasRenderer.init = function (opts) {\n  const { width = 300, height = 300, bgColor = 'aliceblue' } = opts;\n  let { canvas, context } = CanvasRenderer;\n  let pixelRatio = canvas.getPixelRatio();\n  context.scale(pixelRatio, pixelRatio);\n\n  canvas.width = width * pixelRatio;\n  canvas.height = height * pixelRatio;\n  canvas.style.width = width + 'px';\n  canvas.style.height = height + 'px';\n  canvas.style.backgroundColor = bgColor;\n}\n\nCanvasRenderer.clear = function () {\n  CanvasRenderer.context.clearRect(0, 0, CanvasRenderer.canvas.width, CanvasRenderer.canvas.height);\n}\n\nfunction _createCanvas () {\n  let canvas = document.createElement('canvas');\n  canvas.getPixelRatio = _getPixelRatio.bind(null, canvas);\n  canvas.renderPolygon = _renderPolygon;\n  canvas.renderRectangle = _renderRectangle;\n  canvas.renderPolyline = _renderPolyline;\n  canvas.renderCircle = _renderCircle;\n  canvas.renderText = _renderText;\n  return canvas;\n}\n\n/**\n * Gets the pixel ratio of the canvas.\n * @method _getPixelRatio\n * @private\n * @param {HTMLElement} canvas\n * @return {Number} pixel ratio\n */\nfunction _getPixelRatio (canvas) {\n  var context = canvas.getContext('2d'),\n    devicePixelRatio = window.devicePixelRatio || 1,\n    backingStorePixelRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio ||\n    context.msBackingStorePixelRatio ||\n    context.oBackingStorePixelRatio ||\n    context.backingStorePixelRatio || 1;\n\n  return devicePixelRatio / backingStorePixelRatio;\n}\n\nfunction _renderPolygon (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.beginPath();\n  context.moveTo(shape.vertices[0].x + posX, shape.vertices[0].y + posY);\n  for (let i = 1; i < shape.vertices.length; i++) {\n    context.lineTo(shape.vertices[i].x + posX, shape.vertices[i].y + posY);\n  }\n  context.closePath();\n\n  _draw(context, shape);\n}\n\nfunction _renderRectangle (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.beginPath();\n  context.rect(posX, posY, shape.width, shape.height);\n  context.closePath();\n\n  _draw(context, shape);\n}\n\nfunction _renderCircle (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.beginPath();\n  context.arc(posX, posY, shape.radius, 0, Math.PI * 2, false);\n  context.closePath();\n\n  _draw(context, shape);\n}\n\nfunction _renderText (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.font = shape.font;\n  context.fillStyle = shape.fillStyle;\n  context.strokeStyle = shape.strokeStyle;\n  shape.fill && context.fillText(shape.text, posX, posY);\n  shape.strokeWidth > 0 && context.strokeText(shape.text, posX, posY);\n}\n\nfunction _renderPolyline (context, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  context.beginPath();\n  context.moveTo(shape.vertices[0].x + posX, shape.vertices[0].y + posY);\n  for (let i = 1; i < shape.vertices.length; i++) {\n    context.lineTo(shape.vertices[i].x + posX, shape.vertices[i].y + posY);\n  }\n  shape.close && context.closePath();\n\n  _drawLine(context, shape);\n}\n\nfunction _draw (context, shape) {\n  context.lineWidth = shape.strokeWidth;\n  context.strokeStyle = shape.strokeStyle;\n  context.fillStyle = shape.fillStyle;\n  shape.strokeWidth > 0 && context.stroke();\n  shape.fill && context.fill();\n}\n\nfunction _drawLine (context, shape) {\n  context.lineWidth = shape.strokeWidth;\n  context.strokeStyle = shape.strokeStyle;\n  context.stroke();\n}\n\nexport default CanvasRenderer;\n","import CanvasRenderer from './CanvasRenderer';\nlet Camera = {};\n\nCamera.create = function (game) {\n  let camera = {};\n  camera.position = { x: 0, y: 0 };\n  camera.offset = { x: 0, y: 0 };\n  camera.scale = 1;\n  camera.lookAt = null;\n\n  let isDragging = false;\n  let lastMousePosition = { x: 0, y: 0 };\n\n  // trackTransforms(CanvasRenderer.context);\n\n  game.mouse.on('mousemove', mouse => {\n    if (isDragging) {\n      camera.offset = subPos(mouse.position, lastMousePosition);\n      camera.position = addPos(camera.position, camera.offset);\n      lastMousePosition.x = mouse.position.x;\n      lastMousePosition.y = mouse.position.y;\n      game.renderer.clear(camera.scale);\n      CanvasRenderer.context.translate(camera.offset.x / camera.scale, camera.offset.y / camera.scale);\n    }\n  });\n\n  game.mouse.on('mouseout', mouse => {\n    isDragging = false;\n  });\n\n  game.mouse.on('mousedown', mouse => {\n    isDragging = true;\n    lastMousePosition.x = mouse.mousedownPosition.x;\n    lastMousePosition.y = mouse.mousedownPosition.y;\n  });\n\n  game.mouse.on('mouseup', mouse => {\n    camera.offset = { x: 0, y: 0 };\n    isDragging = false;\n  });\n\n  game.mouse.on('mousewheel', mouse => {\n    // let pt = CanvasRenderer.context.transformedPoint(mouse.position.x, mouse.position.y);\n    let deltaScale = 1 + mouse.wheelDelta * 0.02;\n    camera.scale *= deltaScale;\n    game.renderer.clear(camera.scale);\n    // CanvasRenderer.context.translate(pt.x, pt.y);\n    CanvasRenderer.context.scale(deltaScale, deltaScale);\n    // CanvasRenderer.context.translate(-pt.x, -pt.y);\n  });\n\n  camera.recover = function () {\n    game.renderer.clear(camera.scale);\n    CanvasRenderer.context.translate(-camera.position.x, -camera.position.y);\n    CanvasRenderer.context.scale(1 / camera.scale, 1 / camera.scale);\n    camera.scale = 1;\n    camera.offset = { x: 0, y: 0 };\n    camera.position = { x: 0, y: 0 };\n  };\n  return camera;\n}\n\nCamera.lookAt = function ()  {\n}\n\nCamera.follow = function ()  {\n}\n\nfunction addPos (posA, posB) {\n  return {\n    x: posA.x + posB.x,\n    y: posA.y + posB.y \n  }\n}\n\nfunction subPos (posA, posB) {\n  return {\n    x: posA.x - posB.x,\n    y: posA.y - posB.y \n  }\n}\n\n// function trackTransforms(context){\n//   let svg = document.createElementNS(\"http://www.w3.org/2000/svg\",'svg');\n//   let xform = svg.createSVGMatrix();\n\n//   let pt  = svg.createSVGPoint();\n//   context.transformedPoint = function(x,y){\n//     pt.x=x; pt.y=y;\n//     return pt.matrixTransform(xform.inverse());\n//   }\n// }\n\nexport default Camera\n","const STARTING_FPS = 60;\n\nlet Time = {\n  timeScale: 0,\n  unscaledDeltaTime: 0,\n  deltaTime: 0\n};\n\nTime.reset = () => {\n  Time.timeStart = 0;\n  Time.timePassed = 0;\n  Time.fps = STARTING_FPS;\n}\n\nTime.update = (timeStamp) => {\n  if (Time.timeStart === 0) {\n    Time.timeStart = timeStamp;\n    Time.fps = STARTING_FPS;\n  } else {\n    Time.fps = 1000 / (timeStamp - Time.timeStart);\n  }\n\n  Time.unscaledDeltaTime = 1 / Time.fps;\n  Time.deltaTime = Time.unscaledDeltaTime * Time.timeScale;\n\n  Time.timePassed += Time.unscaledDeltaTime;\n  Time.timeStart = timeStamp;\n}\n\nTime.reset();\n\nexport default Time\n","let Mouse = {};\n\nMouse.create = (element) => {\n  let mouse = {};\n\n  mouse.element = element;\n  mouse.absolute = { x: 0, y: 0 };\n  mouse.position = { x: 0, y: 0 };\n  mouse.mousedownPosition = { x: 0, y: 0 };\n  mouse.mouseupPosition = { x: 0, y: 0 };\n  mouse.offset = { x: 0, y: 0 };\n  mouse.scale = { x: 1, y: 1 };\n  mouse.wheelDelta = 0;\n  mouse.button = -1;\n  mouse.pixelRatio = parseInt(mouse.element.getAttribute('data-pixel-ratio'), 10) || 1;\n\n  mouse.sourceEvents = {\n    mousemove: null,\n    mouseout: null,\n    mousedown: null,\n    mouseup: null,\n    mousewheel: null\n  };\n\n  mouse.eventHooks = {\n    mousemove: null,\n    mouseout: null,\n    mousedown: null,\n    mouseup: null,\n    mousewheel: null\n  }\n\n  mouse.on = function (eventName, callback) {\n    mouse.eventHooks[eventName] = callback;\n  }\n\n  mouse.triggerHook = function (eventName) {\n    mouse.eventHooks[eventName].call(null, mouse);\n  }\n\n  mouse.mousemove = function (event) {\n    let position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n      touches = event.changedTouches;\n\n    if (touches) {\n      mouse.button = 0;\n      event.preventDefault();\n    }\n\n    mouse.absolute.x = position.x;\n    mouse.absolute.y = position.y;\n    mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n    mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    mouse.sourceEvents.mousemove = event;\n\n    mouse.triggerHook('mousemove');\n  }\n\n  mouse.mouseout = function () {\n    mouse.triggerHook('mouseout');\n  }\n\n  mouse.mousedown = function(event) {\n    let position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n      touches = event.changedTouches;\n\n    if (touches) {\n      mouse.button = 0;\n      event.preventDefault();\n    } else {\n      mouse.button = event.button;\n    }\n\n    mouse.absolute.x = position.x;\n    mouse.absolute.y = position.y;\n    mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n    mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    mouse.mousedownPosition.x = mouse.position.x;\n    mouse.mousedownPosition.y = mouse.position.y;\n    mouse.sourceEvents.mousedown = event;\n\n    mouse.triggerHook('mousedown');\n  };\n\n  mouse.mouseup = function(event) {\n    let position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n      touches = event.changedTouches;\n\n    if (touches) {\n      event.preventDefault();\n    }\n    \n    mouse.button = -1;\n    mouse.absolute.x = position.x;\n    mouse.absolute.y = position.y;\n    mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n    mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    mouse.mouseupPosition.x = mouse.position.x;\n    mouse.mouseupPosition.y = mouse.position.y;\n    mouse.sourceEvents.mouseup = event;\n\n    mouse.triggerHook('mouseup');\n  };\n\n  mouse.mousewheel = function(event) {\n    mouse.wheelDelta = Math.max(-1, Math.min(1, event.wheelDelta || -event.detail));\n    event.preventDefault();\n\n    mouse.triggerHook('mousewheel');\n  };\n\n  Mouse.setElement(mouse, element);\n\n  return mouse;\n};\n\nMouse.setElement = (mouse, element) => {\n  element.addEventListener('mousemove', mouse.mousemove);\n  element.addEventListener('mouseout', mouse.mouseout);\n  element.addEventListener('mousedown', mouse.mousedown);\n  element.addEventListener('mouseup', mouse.mouseup);\n  \n  element.addEventListener('mousewheel', mouse.mousewheel);\n  element.addEventListener('DOMMouseScroll', mouse.mousewheel);\n\n  element.addEventListener('touchmove', mouse.mousemove);\n  element.addEventListener('touchstart', mouse.mousedown);\n  element.addEventListener('touchend', mouse.mouseup);\n};\n\n/**\n * Sets the mouse position offset.\n * @method setOffset\n * @param {mouse} mouse\n * @param {vector} offset\n */\nMouse.setOffset = function(mouse, offset) {\n  mouse.offset.x = offset.x;\n  mouse.offset.y = offset.y;\n  mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n  mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n};\n\n/**\n * Sets the mouse position scale.\n * @method setScale\n * @param {mouse} mouse\n * @param {vector} scale\n */\nMouse.setScale = function(mouse, scale) {\n  mouse.scale.x = scale.x;\n  mouse.scale.y = scale.y;\n  mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n  mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n};\n\n/**\n * Gets the mouse position relative to an element given a screen pixel ratio.\n * @method _getRelativeMousePosition\n * @private\n * @param {} event\n * @param {} element\n * @param {number} pixelRatio\n * @return {}\n */\nMouse._getRelativeMousePosition = function(event, element, pixelRatio) {\n  let elementBounds = element.getBoundingClientRect(),\n    rootNode = (document.documentElement || document.body.parentNode || document.body),\n    scrollX = (window.pageXOffset !== undefined) ? window.pageXOffset : rootNode.scrollLeft,\n    scrollY = (window.pageYOffset !== undefined) ? window.pageYOffset : rootNode.scrollTop,\n    touches = event.changedTouches,\n    x, y;\n  \n  if (touches) {\n    x = touches[0].pageX - elementBounds.left - scrollX;\n    y = touches[0].pageY - elementBounds.top - scrollY;\n  } else {\n    x = event.pageX - elementBounds.left - scrollX;\n    y = event.pageY - elementBounds.top - scrollY;\n  }\n\n  return { \n    x: x / (element.clientWidth / (element.width || element.clientWidth) * pixelRatio),\n    y: y / (element.clientHeight / (element.height || element.clientHeight) * pixelRatio)\n  };\n};\n\nexport default Mouse\n","let Scene = {};\n\nScene.create = (game) => {\n  let scene = {};\n\n  scene.game = game;\n  scene.objectArray = [];\n\n  scene.addObject = (object) => {\n    scene.objectArray.push(object);\n  }\n\n  scene.reset = () => {\n    scene.objectArray.forEach((object) => {\n      object.reset();\n    })\n  }\n\n  scene.update = () => {\n    scene.objectArray.forEach((object) => {\n      if (game.status === 'playing') {\n        object.updateCb.call(object);\n      }\n    })\n  }\n\n  return scene\n}\n\nexport default Scene\n","export function extend (obj, deep) {\n  var argsStart,\n    deepClone;\n\n  if (typeof deep === 'boolean') {\n    argsStart = 2;\n    deepClone = deep;\n  } else {\n    argsStart = 1;\n    deepClone = true;\n  }\n\n  for (var i = argsStart; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    if (source) {\n      for (var prop in source) {\n        if (deepClone && source[prop] && source[prop].constructor === Object) {\n          if (!obj[prop] || obj[prop].constructor === Object) {\n            obj[prop] = obj[prop] || {};\n            extend(obj[prop], deepClone, source[prop]);\n          } else {\n            obj[prop] = source[prop];\n          }\n        } else {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n  }\n  \n  return obj;\n}\n\nexport function clone (obj, deep) {\n  return extend({}, deep, obj);\n}\n\nexport function keys (obj) {\n  if (Object.keys)\n    return Object.keys(obj);\n\n  // avoid hasOwnProperty for performance\n  var keys = [];\n  for (var key in obj)\n    keys.push(key);\n  return keys;\n}\n\nexport function isArray (obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n}\n\nexport function isFunction (obj) {\n  return typeof obj === 'function';\n}\n","import { keys, clone } from '../utils/Common';\n\nlet Events = {};\n\nEvents.on = function (object, eventNames, callback) {\n  let names = eventNames.split(' '),\n    name;\n\n  for (let i = 0; i < names.length; i++) {\n    name = names[i];\n    object.events = object.events || {};\n    object.events[name] = object.events[name] || [];\n    object.events[name].push(callback);\n  }\n\n  return callback;\n}\n\nEvents.off = function(object, eventNames, callback) {\n  if (!eventNames) {\n    object.events = {};\n    return;\n  }\n\n  // handle Events.off(object, callback)\n  if (typeof eventNames === 'function') {\n    callback = eventNames;\n    eventNames = keys(object.events).join(' ');\n  }\n\n  let names = eventNames.split(' ');\n\n  for (let i = 0; i < names.length; i++) {\n    let callbacks = object.events[names[i]],\n      newCallbacks = [];\n\n    if (callback && callbacks) {\n      for (let j = 0; j < callbacks.length; j++) {\n        if (callbacks[j] !== callback)\n          newCallbacks.push(callbacks[j]);\n      }\n    }\n\n    object.events[names[i]] = newCallbacks;\n  }\n};\n\nEvents.trigger = function(object, eventNames, event) {\n  let names,\n    name,\n    callbacks,\n    eventClone;\n\n  let events = object.events;\n  \n  if (events && keys(events).length > 0) {\n    if (!event)\n      event = {};\n\n    names = eventNames.split(' ');\n\n    for (let i = 0; i < names.length; i++) {\n      name = names[i];\n      callbacks = events[name];\n\n      if (callbacks) {\n        eventClone = clone(event, false);\n        eventClone.name = name;\n        eventClone.source = object;\n\n        for (let j = 0; j < callbacks.length; j++) {\n          callbacks[j].apply(object, [eventClone]);\n        }\n      }\n    }\n  }\n};\n\nexport default Events;\n","import Events from './Events';\nimport CanvasRenderer from './CanvasRenderer';\n\nlet Render = {};\n\nRender.create = (game, el, opts) => {\n  let renderer = {\n    el: el,\n    game: game\n  };\n\n  CanvasRenderer.init(opts);\n  renderer.el.append(CanvasRenderer.canvas);\n\n  renderer.clear = _clear.bind(null);\n  renderer.render = _render.bind(null, renderer);\n\n  return renderer\n}\n\nfunction _clear () {\n  CanvasRenderer.clear();\n}\n\nfunction _render (renderer) {\n  const { objectArray } = renderer.game.scene;\n  const { canvas, context } = CanvasRenderer;\n\n  objectArray.forEach(object => {\n    const shapeType = object.shape.type;\n\n    switch (shapeType) {\n      case 'polygon':\n        canvas.renderPolygon(context, object.shape);\n        break;\n      case 'rectangle':\n        canvas.renderRectangle(context, object.shape);\n        break;\n      case 'circle':\n        canvas.renderCircle(context, object.shape);\n        break;\n      case 'text':\n        canvas.renderText(context, object.shape);\n        break;\n      case 'polyline':\n        canvas.renderPolyline(context, object.shape);\n        break;\n      default:\n        break;\n    }\n  })\n\n  Events.trigger(renderer.game, 'tick');\n}\n\nexport default Render;\n","import Camera from './Camera';\nimport Time from './Time';\nimport Mouse from './Mouse';\nimport Scene from './Scene';\nimport Render from './Render';\nimport CanvasRenderer from './CanvasRenderer';\n\nlet _reqFrame, _cancelFrame, _frameTimeout;\nif (typeof window !== 'undefined') {\n  _reqFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function (callback) {\n    var self = this, start, finish;\n\n    _frameTimeout = window.setTimeout(function () {\n      start = +new Date();\n      callback(start);\n      finish = +new Date();\n      self.timeout = 1000 / 60 - (finish - start);\n    }, self.timeout);\n  };\n\n  _cancelFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame || function () {\n    window.clearTimeout(_frameTimeout);\n  };\n}\n\nlet Engine = {};\n\nEngine.create = (el, opts) => {\n  let game = {};\n  game.el = el;\n  game.status = 'stop';\n  game.PAUSE_TIMEOUT = 100;\n\n  game.renderer = Render.create(\n    game,\n    el,\n    opts\n  );\n\n  game.mouse = Mouse.create(CanvasRenderer.canvas);\n\n  game.camera = Camera.create(game);\n\n  game.scene = Scene.create(game);\n\n  game.start = () => {\n    Time.timeScale = 1;\n    Engine.run(game);\n    game.status = 'playing';\n  }\n\n  game.restart = () => {\n    Engine.reset(game);\n    game.start();\n  }\n\n  game.pause = () => {\n    if (game.status === 'playing') {\n      Time.timeScale = 0;\n      game.status = 'paused';\n    }\n  }\n\n  game.resume = () => {\n    if (game.status === 'paused') {\n      Time.timeScale = 1;\n      game.status = 'playing';\n    }\n  }\n\n  game.stop = () => {\n    Engine.reset(game);\n    game.status = 'stop';\n  }\n\n  Engine.reset(game);\n\n  return game;\n}\n\nEngine.reset = (game) => {\n  _cancelFrame(game.frameReq);\n  Time.reset();\n  game.frameReq = null;\n  game.scene.reset();\n  game.renderer.clear();\n  game.renderer.render();\n}\n\nEngine.run = (game) => {\n  if (game.frameReq) {\n    game.stop();\n  }\n\n  game.frameReq = _reqFrame((timeStamp) => tick.call(null, timeStamp));\n\n  function tick (timeStamp) {\n    Time.update(timeStamp); // update Time\n    game.scene.update();\n    game.renderer.clear();\n    game.renderer.render();\n    game.frameReq = _reqFrame((timeStamp) => tick.call(null, timeStamp));\n  }\n}\n\nexport default Engine\n","import { isFunction } from '../utils/Common';\n\nexport default class Object {\n  constructor (opts) {\n    this.shape = opts.shape;\n    this.fill = opts.fill !== undefined ? opts.fill : '#83cbff';\n    this.startCb = isFunction(opts.start) ? opts.start : this.start;\n    this.updateCb = isFunction(opts.update) ? opts.update : this.update;\n    this.transform0 = {\n      position: {\n        x: opts.transform.position.x || 0,\n        y: opts.transform.position.y || 0\n      }\n    }\n\n    this.reset();\n  }\n\n  start () {\n  }\n\n  update () {\n  }\n\n  reset () {\n    this.shape.transform = this.transform = JSON.parse(JSON.stringify(this.transform0));\n  }\n\n  render () {\n    const { context } = this.Scene;\n    const { position } = this.transform;\n    const rectW = 40;\n    const rectH = 40;\n\n    context.fillStyle = this.fill;\n    context.fillRect(position.x, position.y, rectW, rectH);\n  }\n}\n","let Input = {\n  keyCodeArray: []\n};\n\nInput.create = () => {\n  document.onkeydown = (event) => {\n    const { keyCode } = event;\n    let idx = Input.keyCodeArray.indexOf(keyCode);\n\n    if (idx === -1) {\n      Input.keyCodeArray.push(keyCode);\n    }\n  }\n\n  document.onkeyup = (event) => {\n    const { keyCode } = event;\n    let idx = Input.keyCodeArray.indexOf(keyCode);\n    if (idx > -1) {\n      Input.keyCodeArray.splice(idx, 1);\n    }\n  }\n}\n\nInput.getAxis = (direction) => {\n  if (direction === 'horizontal') {\n    if (Input.keyCodeArray.indexOf(37) > -1) {\n      return -1\n    }\n    if (Input.keyCodeArray.indexOf(39) > -1) {\n      return 1\n    }\n    return 0\n  }\n\n  if (direction === 'vertical') {\n    if (Input.keyCodeArray.indexOf(38) > -1) {\n      return -1\n    }\n    if (Input.keyCodeArray.indexOf(40) > -1) {\n      return 1\n    }\n    return 0\n  }\n}\n\nInput.create();\n\n// class Input {\n//   constructor () {\n//     this.keyCodeArray = [];\n\n//     document.onkeydown = (event) => {\n//       const { keyCode } = event;\n//       let idx = this.keyCodeArray.indexOf(keyCode);\n\n//       if (idx === -1) {\n//         this.keyCodeArray.push(keyCode);\n//       }\n//     }\n\n//     document.onkeyup = (event) => {\n//       const { keyCode } = event;\n//       let idx = this.keyCodeArray.indexOf(keyCode);\n//       if (idx > -1) {\n//         this.keyCodeArray.splice(idx, 1);\n//       }\n//     }\n//   }\n\n//   getAxis (direction) {\n    \n//   }\n// }\n\nexport default Input\n","class Vertices {\n  constructor (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\nexport default Vertices\n","class Projection {\n  constructor (min, max) {\n    if (min > max) {\n      throw 'min value should less than max value';\n    }\n    this.min = min;\n    this.max = max;\n  }\n\n  overlaps (projection) {\n    // return this.max > projection.min && projection.max > this.min;\n  }\n}\n\nexport default Projection\n","let SAT = {};\n\nSAT.detectCollide = (shapeA, shapeB) => {\n  return !SAT.separationOnAxes(shapeA, shapeB);\n}\n\nSAT.separationOnAxes = (shapeA, shapeB) => {\n  let axes = shapeA.getAxes().concat(shapeB.getAxes());\n\n  for (let i = 0; i < axes.length; i++) {\n    let axis = axes[i];\n    let projection1 = shapeA.project(axis);\n    let projection2 = shapeB.project(axis);\n    if (!projection1.overlaps(projection2)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default SAT\n","import SAT from '../collision/SAT';\n\nclass Shape {\n  constructor (opts) {\n    opts = opts || {};\n    this.transform = {\n      position: {}\n    };\n    this.fill = opts.fill === undefined ? true : !!opts.fill;\n    this.fillStyle = opts.fillStyle || '#83cbff';\n    this.strokeWidth = opts.strokeWidth || 0;\n    this.strokeStyle = opts.stroke || 'grey';\n  }\n\n  collidesWith (otherShape) {\n    return SAT.detectCollide(this, otherShape);\n  }\n\n  getAxes () {\n    throw 'getAxes() not implemented';\n  }\n\n  project () {\n    throw 'project(axis) not implemented';\n  }\n\n  move () {\n    throw 'move(dx, dy) note implemented';\n  }\n}\n\nexport default Shape\n","class Vector {\n  constructor (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  magnitude () {\n    return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n  }\n\n  add (vector) {\n    let v = new Vector();\n    v.x = this.x + vector.x;\n    v.y = this.y + vector.y;\n    return v;\n  }\n\n  /**\n   * Subtracts another vector.\n   * @method sub\n   * @param {vector} vector\n   * @return {vector} A new vector of two vector subtracted\n   */\n  sub (vector) {\n    let v = new Vector();\n    v.x = this.x - vector.x;\n    v.y = this.y - vector.y;\n    return v;\n  }\n\n  dot (vector) {\n    return this.x * vector.x + this.y * vector.y;\n  }\n\n  edge (vector) {\n    return this.sub(vector);\n  }\n\n  /**\n   * Returns the perpendicular vector. Set `negate` to true for the perpendicular in the opposite direction.\n   * @method perp\n   * @param {vector} vector\n   * @param {bool} [negate=false]\n   * @return {vector} The perpendicular vector\n   */\n  perp (negate) {\n    negate = negate === true ? -1 : 1;\n    let v = new Vector();\n    v.x = negate * -this.y;\n    v.y = negate * this.x;\n    return v;\n  }\n\n  normalize () {\n    let v = new Vector(0, 0), m = this.magnitude();\n\n    if (m !== 0) {\n      v.x = this.x / m;\n      v.y = this.y / m;\n    }\n    return v;\n  }\n\n  normal () {\n    let p = this.perp();\n    return p.normalize();\n  }\n}\n\nexport default Vector","import Point from '../geometry/Vertices';\nimport Projection from '../geometry/Projection';\nimport Shape from './Shape';\nimport Vector from '../geometry/Vector';\nimport Vertices from '../geometry/Vertices';\n\nclass Polygon extends Shape {\n  constructor (points, opts) {\n    super(opts);\n    this.type = 'polygon';\n    this.vertices = points.map(point => new Vertices(point[0], point[1]));\n  }\n\n  getAxes () {\n    const { x: posX, y: posY } = this.transform.position;\n\n    let v1 = new Vector(),\n      v2 = new Vector(),\n      axes = [],\n      pointNum = this.vertices.length;\n\n  \n    for (let i = 0; i < pointNum - 1; i++) {\n      v1.x = this.vertices[i].x + posX;\n      v1.y = this.vertices[i].y + posY;\n\n      v2.x = this.vertices[i + 1].x + posX;\n      v2.y = this.vertices[i + 1].y + posY;\n\n      axes.push(v1.edge(v2).normal());\n    }\n\n    v1.x = this.vertices[pointNum - 1].x + posX;\n    v1.y = this.vertices[pointNum - 1].y + posY;\n\n    v2.x = this.vertices[0].x + posX;\n    v2.y = this.vertices[0].y + posY;\n    \n    axes.push(v1.edge(v2).normal());\n\n    return axes;\n  }\n\n  project (axis) {\n    const { x: posX, y: posY } = this.transform.position;\n\n    let scalars = [],\n      v = new Vector();\n\n    this.vertices.forEach(point => {\n      v.x = point.x + posX;\n      v.y = point.y + posY;\n      scalars.push(v.dot(axis));\n    })\n\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  addPoint (x, y) {\n    this.vertices.push(new Point(x, y));\n  }\n\n  move (dx, dy) {\n    for (let i = 0, point; i < this.vertices.length; i++) {\n      point = this.vertices[i];\n      point.x += dx;\n      point.y += dy;\n    }\n  }\n}\n\nexport default Polygon;\n","import Shape from './Shape';\n\nclass Cirlce extends Shape {\n  constructor (radius, opts) {\n    super(opts);\n    this.type = 'circle';\n    this.radius = radius;\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Cirlce;","import Shape from './Shape';\n\nclass Rectangle extends Shape {\n  constructor (width, height, opts) {\n    super(opts);\n    this.type = 'rectangle';\n    this.width = width;\n    this.height = height;\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Rectangle;","import Shape from './Shape';\n\nclass Text extends Shape {\n  constructor (text, opts) {\n    super(opts);\n    this.type = 'text';\n    this.text = text;\n    this.font = '18px verdana';\n    this.fillStyle = '#333';\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Text;","class Line {\n  constructor (opts) {\n    opts = opts || {};\n    this.transform = {\n      position: {}\n    };\n    this.close = !!opts.close;\n    this.style = this.style || 'solid';\n    this.fill = opts.fill === undefined ? true : !!opts.fill;\n    this.fillStyle = opts.fillStyle || '#83cbff';\n    this.strokeWidth = opts.strokeWidth || 0;\n    this.strokeStyle = opts.stroke || 'grey';\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Line;","import Line from './Line';\nimport Vertices from '../geometry/Vertices';\n\nclass Polyline extends Line {\n  constructor (points, opts) {\n    super(opts);\n    this.type = 'polyline';\n    this.vertices = points.map(point => new Vertices(point[0], point[1]));\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Polyline;","export function insertAfter (el, targetEl) {\n  let parent = targetEl.parentNode;\n  if ( parent.lastChild === targetEl ){\n    parent.appendChild(el);\n  } else {\n    parent.insertBefore(el, targetEl.nextSibling);\n  }\n}\n","import Time from '../core/Time';\nimport Events from '../core/Events';\nimport CanvasRenderer from '../core/CanvasRenderer';\nimport { insertAfter } from '../utils/Dom';\n\nlet Performance = {};\n\nPerformance.create = function (game, opts) {\n  let performance = {};\n  let canvasRect = CanvasRenderer.canvas.getBoundingClientRect();\n\n  opts = opts || {};\n  performance.el = document.createElement('div');\n  performance.el.className = 'performance-widget';\n  performance.el.style.position = 'absolute';\n  performance.el.style.top = canvasRect.top + 'px';\n  performance.el.style.left = canvasRect.left + 'px';\n  performance.el.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';\n  performance.el.style.padding = '4px 10px';\n\n  _addFPS(performance);\n  insertAfter(performance.el, CanvasRenderer.canvas);\n\n  Events.on(game, 'tick', function () {\n    Performance.update(game, performance);\n  })\n\n  game.widget = game.widget || {};\n  game.widget['performance'] = Performance;\n}\n\nPerformance.update = function (game, performance) {\n  performance.fpsEl.innerText = Time.fps.toFixed(2);\n}\n\nfunction _addFPS (performance) {\n  performance.fpsEl = document.createElement('div');\n  performance.el.append(performance.fpsEl);\n  performance.fpsEl.style.color = 'white';\n}\n\nexport default Performance;\n","/*global ENV*/\nimport Engine from './core/Engine';\nimport Object from './core/Object';\nimport Input from './core/Input';\nimport Time from './core/Time';\nimport Polygon from './shape/Polygon';\nimport Circle from './shape/Circle';\nimport Rectangle from './shape/Rectangle';\nimport Text from './shape/Text';\nimport Polyline from './line/Polyline';\nimport Performance from './widget/Performance';\n\n// Enable LiveReload\nif (ENV !== 'production') {\n  document.write(\n    '<script src=\"http://' + (location.host || 'localhost').split(':')[0] +\n    ':35729/livereload.js?snipver=1\"></' + 'script>'\n  )\n}\n\nconst myGame = Engine.create(document.getElementById('stage'), {\n  width: 600,\n  height: 300\n});\nPerformance.create(myGame);\nconst startBtn = document.getElementById('start');\nconst stopBtn = document.getElementById('stop');\nconst pauseBtn = document.getElementById('pause');\nconst fastBtn = document.getElementById('fastward');\nconst recoverBtn = document.getElementById('recover');\n\nlet player = new Object({\n  shape: new Polygon([\n    [0, 0],\n    [60, 0],\n    [60, 20],\n    [30, 40],\n    [10, 40]\n  ], {\n    fillStyle: '#009688'\n  }),\n  transform: {\n    position: {\n      x: 230,\n      y: 150\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n    let { transform } = this;\n\n    const horizontalInput = Input.getAxis('horizontal');\n    const verticalInput = Input.getAxis('vertical');\n    const speed = 100;\n\n    transform.position.x += speed * Time.deltaTime * horizontalInput;\n    transform.position.y += speed * Time.deltaTime * verticalInput;\n\n    if (this.shape.collidesWith(obstacle1.shape)) {\n      console.log('collide!!');\n    }\n  }\n});\n\nlet obstacle1 = new Object({\n  shape: new Rectangle(600, 20),\n  transform: {\n    position: {\n      x: 0,\n      y: 270\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n  }\n});\n\nlet obstacle2 = new Object({\n  shape: new Circle(20, {\n    fillStyle: '#ffc107'\n  }),\n  transform: {\n    position: {\n      x: 100,\n      y: 50\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n    // let { transform } = this;\n\n    // const speed = 100;\n    // transform.position.x += speed * Time.deltaTime;\n  }\n});\n\nlet title = new Object({\n  shape: new Text('Engine Test'),\n  transform: {\n    position: {\n      x: 200,\n      y: 50\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n  }\n});\n\nlet polyline = new Object({\n  shape: new Polyline([\n    [0, 0],\n    [60, 0],\n    [60, 20],\n    [30, 40],\n    [10, 40]\n  ], {\n    style: 'dashed'\n  }),\n  transform: {\n    position: {\n      x: 320,\n      y: 150\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n  }\n});\n\nmyGame.scene.addObject(obstacle1);\nmyGame.scene.addObject(obstacle2);\nmyGame.scene.addObject(title);\nmyGame.scene.addObject(polyline);\nmyGame.scene.addObject(player);\n\nmyGame.renderer.render();\nmyGame.start();\n\nstartBtn.addEventListener('click', () => {\n  myGame.restart();\n})\n\nstopBtn.addEventListener('click', () => {\n  myGame.stop();\n})\n\npauseBtn.addEventListener('click', () => {\n  if (myGame.status === 'paused') {\n    myGame.resume();\n  } else {\n    myGame.pause();\n  }\n})\n\nfastBtn.addEventListener('click', () => {\n  myGame.Time.timeScale = 1.5;\n})\n\nrecoverBtn.addEventListener('click', () => {\n  myGame.camera.recover();\n})\n\nconsole.log('myGame', myGame);\n"],"names":["CanvasRenderer","canvas","_createCanvas","context","getContext","init","opts","width","height","bgColor","pixelRatio","getPixelRatio","scale","style","backgroundColor","clear","clearRect","document","createElement","_getPixelRatio","bind","renderPolygon","_renderPolygon","renderRectangle","_renderRectangle","renderPolyline","_renderPolyline","renderCircle","_renderCircle","renderText","_renderText","devicePixelRatio","window","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","shape","transform","position","posX","x","posY","y","beginPath","moveTo","vertices","i","length","lineTo","closePath","_draw","rect","arc","radius","Math","PI","font","fillStyle","strokeStyle","fill","fillText","text","strokeWidth","strokeText","close","_drawLine","lineWidth","stroke","Camera","create","game","camera","offset","lookAt","isDragging","lastMousePosition","mouse","on","subPos","addPos","renderer","translate","mousedownPosition","deltaScale","wheelDelta","recover","follow","posA","posB","STARTING_FPS","Time","timeScale","unscaledDeltaTime","deltaTime","reset","timeStart","timePassed","fps","update","timeStamp","Mouse","element","absolute","mouseupPosition","button","parseInt","getAttribute","sourceEvents","mousemove","mouseout","mousedown","mouseup","mousewheel","eventHooks","eventName","callback","triggerHook","call","event","_getRelativeMousePosition","touches","changedTouches","preventDefault","max","min","detail","setElement","addEventListener","setOffset","setScale","elementBounds","getBoundingClientRect","rootNode","documentElement","body","parentNode","scrollX","pageXOffset","undefined","scrollLeft","scrollY","pageYOffset","scrollTop","pageX","left","pageY","top","clientWidth","clientHeight","Scene","scene","objectArray","addObject","object","push","forEach","status","updateCb","extend","obj","deep","argsStart","deepClone","arguments","source","prop","constructor","Object","clone","keys","key","isFunction","Events","eventNames","names","split","name","events","off","join","callbacks","newCallbacks","j","trigger","eventClone","apply","Render","el","append","_clear","render","_render","shapeType","type","_reqFrame","_cancelFrame","_frameTimeout","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","self","start","finish","setTimeout","Date","timeout","cancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","Engine","PAUSE_TIMEOUT","run","restart","pause","resume","stop","frameReq","tick","startCb","transform0","JSON","parse","stringify","rectW","rectH","fillRect","Input","keyCodeArray","onkeydown","keyCode","idx","indexOf","onkeyup","splice","getAxis","direction","Vertices","Projection","projection","SAT","detectCollide","shapeA","shapeB","separationOnAxes","axes","getAxes","concat","axis","projection1","project","projection2","overlaps","Shape","otherShape","Vector","sqrt","pow","vector","v","sub","negate","m","magnitude","p","perp","normalize","Polygon","points","map","point","v1","v2","pointNum","edge","normal","scalars","dot","Point","dx","dy","Cirlce","Rectangle","Text","Line","Polyline","insertAfter","targetEl","parent","lastChild","appendChild","insertBefore","nextSibling","Performance","performance","canvasRect","className","padding","_addFPS","widget","fpsEl","innerText","toFixed","color","write","location","host","myGame","getElementById","startBtn","stopBtn","pauseBtn","fastBtn","recoverBtn","player","horizontalInput","verticalInput","speed","collidesWith","obstacle1","console","log","obstacle2","Circle","title","polyline"],"mappings":"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"}