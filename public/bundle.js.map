{"version":3,"file":"bundle.js","sources":["../src/core/Camera.js","../src/core/Time.js","../src/core/Mouse.js","../src/utils/Common.js","../src/core/Events.js","../src/core/Scene.js","../src/shapes/Line.js","../src/shapes/Arc.js","../src/collision/SAT.js","../src/shapes/Shape.js","../src/shapes/Circle.js","../src/shapes/Curve.js","../src/shapes/Path.js","../src/geometry/Projection.js","../src/geometry/Vector.js","../src/geometry/Vertice.js","../src/utils/Object.js","../src/utils/Array.js","../src/shapes/Polygon.js","../src/shapes/Polyline.js","../src/shapes/Rectangle.js","../src/shapes/Sprite.js","../src/shapes/Text/const.js","../src/utils/Color.js","../src/shapes/Text/TextStyle.js","../src/shapes/Text/TextMetrics.js","../src/shapes/Text/Text.js","../src/shapes/ShapesGroup.js","../src/core/Object.js","../src/renderer/ShapeRenderer/CanvasShapeRenderer.js","../src/renderer/CanvasRenderer.js","../src/renderer/Renderer.js","../src/core/Engine.js","../src/core/Input.js","../src/utils/Dom.js","../src/widget/Performance.js","../src/main.js"],"sourcesContent":["let Camera = {};\n\nCamera.create = function (game) {\n  let camera = {};\n  camera.position = { x: 0, y: 0 };\n  camera.offset = { x: 0, y: 0 };\n  camera.scale = 1;\n  camera.lookAt = null;\n\n  let isDragging = false;\n  let lastMousePosition = { x: 0, y: 0 };\n\n  // trackTransforms(CanvasRenderer.context);\n\n  game.mouse.on('mousemove', mouse => {\n    if (isDragging) {\n      camera.offset = subPos(mouse.position, lastMousePosition);\n      camera.position = addPos(camera.position, camera.offset);\n      lastMousePosition.x = mouse.position.x;\n      lastMousePosition.y = mouse.position.y;\n      game.renderer.translate(camera.offset);\n    }\n  });\n\n  game.mouse.on('mouseout', mouse => {\n    isDragging = false;\n  });\n\n  game.mouse.on('mousedown', mouse => {\n    isDragging = true;\n    lastMousePosition.x = mouse.mousedownPosition.x;\n    lastMousePosition.y = mouse.mousedownPosition.y;\n  });\n\n  game.mouse.on('mouseup', mouse => {\n    camera.offset = { x: 0, y: 0 };\n    isDragging = false;\n  });\n\n  game.mouse.on('mousewheel', mouse => {\n    camera.scale *= (1 + mouse.wheelDelta * 0.03);\n    game.renderer.zoomToPoint(mouse.position, camera.scale);\n  });\n\n  camera.recover = function () {\n    game.renderer.clear(camera.scale);\n    game.renderer.context.translate(-camera.position.x, -camera.position.y);\n    game.renderer.context.scale(1 / camera.scale, 1 / camera.scale);\n    camera.scale = 1;\n    camera.offset = { x: 0, y: 0 };\n    camera.position = { x: 0, y: 0 };\n  };\n  return camera;\n}\n\nCamera.lookAt = function ()  {\n}\n\nCamera.follow = function ()  {\n}\n\nfunction addPos (posA, posB) {\n  return {\n    x: posA.x + posB.x,\n    y: posA.y + posB.y \n  }\n}\n\nfunction subPos (posA, posB) {\n  return {\n    x: posA.x - posB.x,\n    y: posA.y - posB.y \n  }\n}\n\n// function trackTransforms(context){\n//   let svg = document.createElementNS(\"http://www.w3.org/2000/svg\",'svg');\n//   let xform = svg.createSVGMatrix();\n\n//   let pt  = svg.createSVGPoint();\n//   context.transformedPoint = function(x,y){\n//     pt.x=x; pt.y=y;\n//     return pt.matrixTransform(xform.inverse());\n//   }\n// }\n\nexport default Camera\n","const STARTING_FPS = 60;\n\nlet Time = {\n  timeScale: 0,\n  unscaledDeltaTime: 0,\n  deltaTime: 0\n};\n\nTime.reset = () => {\n  Time.timeStart = 0;\n  Time.timePassed = 0;\n  Time.fps = STARTING_FPS;\n}\n\nTime.update = (timeStamp) => {\n  if (Time.timeStart === 0) {\n    Time.timeStart = timeStamp;\n    Time.fps = STARTING_FPS;\n  } else {\n    Time.fps = 1000 / (timeStamp - Time.timeStart);\n  }\n\n  Time.unscaledDeltaTime = 1 / Time.fps;\n  Time.deltaTime = Time.unscaledDeltaTime * Time.timeScale;\n\n  Time.timePassed += Time.unscaledDeltaTime;\n  Time.timeStart = timeStamp;\n}\n\nTime.reset();\n\nexport default Time\n","let Mouse = {};\n\nMouse.create = (element) => {\n  let mouse = {};\n\n  mouse.element = element;\n  mouse.absolute = { x: 0, y: 0 };\n  mouse.position = { x: 0, y: 0 };\n  mouse.mousedownPosition = { x: 0, y: 0 };\n  mouse.mouseupPosition = { x: 0, y: 0 };\n  mouse.offset = { x: 0, y: 0 };\n  mouse.scale = { x: 1, y: 1 };\n  mouse.wheelDelta = 0;\n  mouse.button = -1;\n  mouse.pixelRatio = parseInt(mouse.element.getAttribute('data-pixel-ratio'), 10) || 1;\n\n  mouse.sourceEvents = {\n    mousemove: null,\n    mouseout: null,\n    mousedown: null,\n    mouseup: null,\n    mousewheel: null\n  };\n\n  mouse.eventHooks = {\n    mousemove: null,\n    mouseout: null,\n    mousedown: null,\n    mouseup: null,\n    mousewheel: null\n  }\n\n  mouse.on = function (eventName, callback) {\n    mouse.eventHooks[eventName] = callback;\n  }\n\n  mouse.triggerHook = function (eventName) {\n    mouse.eventHooks[eventName].call(null, mouse);\n  }\n\n  mouse.mousemove = function (event) {\n    let position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n      touches = event.changedTouches;\n\n    if (touches) {\n      mouse.button = 0;\n      event.preventDefault();\n    }\n\n    mouse.absolute.x = position.x;\n    mouse.absolute.y = position.y;\n    mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n    mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    mouse.sourceEvents.mousemove = event;\n\n    mouse.triggerHook('mousemove');\n  }\n\n  mouse.mouseout = function () {\n    mouse.triggerHook('mouseout');\n  }\n\n  mouse.mousedown = function(event) {\n    let position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n      touches = event.changedTouches;\n\n    if (touches) {\n      mouse.button = 0;\n      event.preventDefault();\n    } else {\n      mouse.button = event.button;\n    }\n\n    mouse.absolute.x = position.x;\n    mouse.absolute.y = position.y;\n    mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n    mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    mouse.mousedownPosition.x = mouse.position.x;\n    mouse.mousedownPosition.y = mouse.position.y;\n    mouse.sourceEvents.mousedown = event;\n\n    mouse.triggerHook('mousedown');\n  };\n\n  mouse.mouseup = function(event) {\n    let position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n      touches = event.changedTouches;\n\n    if (touches) {\n      event.preventDefault();\n    }\n    \n    mouse.button = -1;\n    mouse.absolute.x = position.x;\n    mouse.absolute.y = position.y;\n    mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n    mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    mouse.mouseupPosition.x = mouse.position.x;\n    mouse.mouseupPosition.y = mouse.position.y;\n    mouse.sourceEvents.mouseup = event;\n\n    mouse.triggerHook('mouseup');\n  };\n\n  mouse.mousewheel = function(event) {\n    mouse.wheelDelta = Math.max(-1, Math.min(1, event.wheelDelta || -event.detail));\n    event.preventDefault();\n\n    mouse.triggerHook('mousewheel');\n  };\n\n  Mouse.setElement(mouse, element);\n\n  return mouse;\n};\n\nMouse.setElement = (mouse, element) => {\n  element.addEventListener('mousemove', mouse.mousemove);\n  element.addEventListener('mouseout', mouse.mouseout);\n  element.addEventListener('mousedown', mouse.mousedown);\n  element.addEventListener('mouseup', mouse.mouseup);\n  \n  element.addEventListener('mousewheel', mouse.mousewheel);\n  element.addEventListener('DOMMouseScroll', mouse.mousewheel);\n\n  element.addEventListener('touchmove', mouse.mousemove);\n  element.addEventListener('touchstart', mouse.mousedown);\n  element.addEventListener('touchend', mouse.mouseup);\n};\n\n/**\n * Sets the mouse position offset.\n * @method setOffset\n * @param {mouse} mouse\n * @param {vector} offset\n */\nMouse.setOffset = function(mouse, offset) {\n  mouse.offset.x = offset.x;\n  mouse.offset.y = offset.y;\n  mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n  mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n};\n\n/**\n * Sets the mouse position scale.\n * @method setScale\n * @param {mouse} mouse\n * @param {vector} scale\n */\nMouse.setScale = function(mouse, scale) {\n  mouse.scale.x = scale.x;\n  mouse.scale.y = scale.y;\n  mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n  mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n};\n\n/**\n * Gets the mouse position relative to an element given a screen pixel ratio.\n * @method _getRelativeMousePosition\n * @private\n * @param {} event\n * @param {} element\n * @param {number} pixelRatio\n * @return {}\n */\nMouse._getRelativeMousePosition = function(event, element, pixelRatio) {\n  let elementBounds = element.getBoundingClientRect(),\n    rootNode = (document.documentElement || document.body.parentNode || document.body),\n    scrollX = (window.pageXOffset !== undefined) ? window.pageXOffset : rootNode.scrollLeft,\n    scrollY = (window.pageYOffset !== undefined) ? window.pageYOffset : rootNode.scrollTop,\n    touches = event.changedTouches,\n    x, y;\n  \n  if (touches) {\n    x = touches[0].pageX - elementBounds.left - scrollX;\n    y = touches[0].pageY - elementBounds.top - scrollY;\n  } else {\n    x = event.pageX - elementBounds.left - scrollX;\n    y = event.pageY - elementBounds.top - scrollY;\n  }\n\n  return { \n    x: x / (element.clientWidth / (element.width || element.clientWidth) * pixelRatio),\n    y: y / (element.clientHeight / (element.height || element.clientHeight) * pixelRatio)\n  };\n};\n\nexport default Mouse\n","export function extend (obj, deep) {\n  var argsStart,\n    deepClone;\n\n  if (typeof deep === 'boolean') {\n    argsStart = 2;\n    deepClone = deep;\n  } else {\n    argsStart = 1;\n    deepClone = true;\n  }\n\n  for (var i = argsStart; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    if (source) {\n      for (var prop in source) {\n        if (deepClone && source[prop] && source[prop].constructor === Object) {\n          if (!obj[prop] || obj[prop].constructor === Object) {\n            obj[prop] = obj[prop] || {};\n            extend(obj[prop], deepClone, source[prop]);\n          } else {\n            obj[prop] = source[prop];\n          }\n        } else {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n  }\n  \n  return obj;\n}\n\nexport function clone (obj, deep) {\n  return extend({}, deep, obj);\n}\n\nexport function keys (obj) {\n  if (Object.keys)\n    return Object.keys(obj);\n\n  // avoid hasOwnProperty for performance\n  var keys = [];\n  for (var key in obj)\n    keys.push(key);\n  return keys;\n}\n\nexport function isArray (obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n}\n\nexport function isFunction (obj) {\n  return typeof obj === 'function';\n}\n","import { keys, clone } from '../utils/Common';\n\nlet Events = {};\n\nEvents.create = function (game) {\n  this.game = game;\n  game.events = {};\n}\n\nEvents.on = function (eventNames, callback) {\n  let names = eventNames.split(' '),\n    name;\n\n  for (let i = 0; i < names.length; i++) {\n    name = names[i];\n    this.game.events[name] = this.game.events[name] || [];\n    this.game.events[name].push(callback);\n  }\n\n  return callback;\n}\n\nEvents.off = function(eventNames, callback) {\n  if (!eventNames) {\n    object.events = {};\n    return;\n  }\n\n  // handle Events.off(callback)\n  if (typeof eventNames === 'function') {\n    callback = eventNames;\n    eventNames = keys(this.game.events).join(' ');\n  }\n\n  let names = eventNames.split(' ');\n\n  for (let i = 0; i < names.length; i++) {\n    let callbacks = this.game.events[names[i]],\n      newCallbacks = [];\n\n    if (callback && callbacks) {\n      for (let j = 0; j < callbacks.length; j++) {\n        if (callbacks[j] !== callback)\n          newCallbacks.push(callbacks[j]);\n      }\n    }\n\n    this.game.events[names[i]] = newCallbacks;\n  }\n};\n\nEvents.trigger = function(eventNames, event) {\n  let names,\n    name,\n    callbacks,\n    eventClone;\n\n  let events = this.game.events;\n\n  if (events && keys(events).length > 0) {\n    if (!event)\n      event = {};\n\n    names = eventNames.split(' ');\n\n    for (let i = 0; i < names.length; i++) {\n      name = names[i];\n      callbacks = events[name];\n\n      if (callbacks) {\n        eventClone = clone(event, false);\n        eventClone.name = name;\n        eventClone.source = this.game;\n\n        for (let j = 0; j < callbacks.length; j++) {\n          callbacks[j].apply(this.game, [eventClone]);\n        }\n      }\n    }\n  }\n};\n\nexport default Events;\n","import Events from '../core/Events';\n\nlet Scene = {};\n\nScene.create = (game) => {\n  let scene = {};\n\n  scene.objects = [];\n\n  scene.addObject = (object) => {\n    scene.objects.push(object);\n\n    Events.trigger('addObject', object);\n  }\n\n  scene.reset = () => {\n    scene.objects.forEach((object) => {\n      object.reset();\n    })\n  }\n\n  scene.update = () => {\n    scene.objects.forEach((object) => {\n      if (game.status === 'playing') {\n        object.updateCb.call(object);\n      }\n    })\n  }\n\n  return scene\n}\n\nexport default Scene\n","class Line {\n  constructor (opts) {\n    opts = opts || {};\n    this.transform = {\n      position: {}\n    };\n    this.close = !!opts.close;\n    this.style = this.style || 'solid';\n    this.fill = opts.fill || '#83cbff';\n    this.strokeWidth = opts.strokeWidth || 0;\n    this.stroke = opts.stroke || 'grey';\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Line;","import Line from './Line';\n\nclass Arc extends Line {\n  constructor (opts) {\n    super(opts);\n    this.type = 'arc';\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Arc;","let SAT = {};\n\nSAT.detectCollide = (shapeA, shapeB) => {\n  return !SAT.separationOnAxes(shapeA, shapeB);\n}\n\nSAT.separationOnAxes = (shapeA, shapeB) => {\n  let axes = shapeA.getAxes().concat(shapeB.getAxes());\n\n  for (let i = 0; i < axes.length; i++) {\n    let axis = axes[i];\n    let projection1 = shapeA.project(axis);\n    let projection2 = shapeB.project(axis);\n    if (!projection1.overlaps(projection2)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default SAT\n","import SAT from '../collision/SAT';\n\nclass Shape {\n  constructor (opts) {\n    opts = opts || {};\n    this.transform = {\n      position: {}\n    };\n    this.fill = opts.fill || '#83cbff';\n    this.stroke = opts.stroke || 'grey';\n    this.strokeWidth = opts.strokeWidth || 0;\n  }\n\n  collidesWith (otherShape) {\n    return SAT.detectCollide(this, otherShape);\n  }\n\n  getAxes () {\n    throw 'getAxes() not implemented';\n  }\n\n  project () {\n    throw 'project(axis) not implemented';\n  }\n\n  move () {\n    throw 'move(dx, dy) note implemented';\n  }\n}\n\nexport default Shape\n","import Shape from './Shape';\n\nclass Cirlce extends Shape {\n  constructor (radius, opts) {\n    super(opts);\n    this.type = 'circle';\n    this.radius = radius;\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Cirlce;","import Line from './Line';\n\nclass Curve extends Line {\n  constructor (opts) {\n    super(opts);\n    this.type = 'curve';\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Curve;","import Shape from './Shape';\n\nconst commandLengths = {\n  m: 2,\n  l: 2,\n  h: 1,\n  v: 1,\n  c: 6,\n  s: 4,\n  q: 4,\n  t: 2,\n  a: 7\n}, \nrepeatedCommands = {\n  m: 'l',\n  M: 'L'\n};\n\nclass Path extends Shape {\n  constructor (path, opts) {\n    super(opts);\n    this.type = 'path';\n    this.path = path.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);\n    this.path = Path.parsePath(this.path);\n    this.width = 0;\n    this.height = 0;\n    this.dimensions = this.calcDimensions();\n    console.log('new Path', this);\n  }\n\n  static parsePath (path) {\n    var result = [],\n      coords = [],\n      currentPath,\n      parsed,\n      re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/ig,\n      match,\n      coordsStr;\n\n    for (var i = 0, coordsParsed, len = path.length; i < len; i++) {\n      currentPath = path[i];\n\n      coordsStr = currentPath.slice(1).trim();\n      coords.length = 0;\n\n      while ((match = re.exec(coordsStr))) {\n        coords.push(match[0]);\n      }\n\n      coordsParsed = [currentPath.charAt(0)];\n\n      for (var j = 0, jlen = coords.length; j < jlen; j++) {\n        parsed = parseFloat(coords[j]);\n        if (!isNaN(parsed)) {\n          coordsParsed.push(parsed);\n        }\n      }\n\n      var command = coordsParsed[0],\n          commandLength = commandLengths[command.toLowerCase()],\n          repeatedCommand = repeatedCommands[command] || command;\n\n      if (coordsParsed.length - 1 > commandLength) {\n        for (var k = 1, klen = coordsParsed.length; k < klen; k += commandLength) {\n          result.push([command].concat(coordsParsed.slice(k, k + commandLength)));\n          command = repeatedCommand;\n        }\n      }\n      else {\n        result.push(coordsParsed);\n      }\n    }\n\n    return result;\n  }\n\n  calcDimensions () {\n    return {\n      left: 0,\n      top: 0,\n      width: this.width,\n      height: this.height\n    };\n  }\n}\n\nexport default Path\n","class Projection {\n  constructor (min, max) {\n    if (min > max) {\n      throw 'min value should less than max value';\n    }\n    this.min = min;\n    this.max = max;\n  }\n\n  overlaps (projection) {\n    // return this.max > projection.min && projection.max > this.min;\n  }\n}\n\nexport default Projection\n","class Vector {\n  constructor (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  magnitude () {\n    return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n  }\n\n  add (vector) {\n    let v = new Vector();\n    v.x = this.x + vector.x;\n    v.y = this.y + vector.y;\n    return v;\n  }\n\n  /**\n   * Subtracts another vector.\n   * @method sub\n   * @param {vector} vector\n   * @return {vector} A new vector of two vector subtracted\n   */\n  sub (vector) {\n    let v = new Vector();\n    v.x = this.x - vector.x;\n    v.y = this.y - vector.y;\n    return v;\n  }\n\n  dot (vector) {\n    return this.x * vector.x + this.y * vector.y;\n  }\n\n  edge (vector) {\n    return this.sub(vector);\n  }\n\n  /**\n   * Returns the perpendicular vector. Set `negate` to true for the perpendicular in the opposite direction.\n   * @method perp\n   * @param {vector} vector\n   * @param {bool} [negate=false]\n   * @return {vector} The perpendicular vector\n   */\n  perp (negate) {\n    negate = negate === true ? -1 : 1;\n    let v = new Vector();\n    v.x = negate * -this.y;\n    v.y = negate * this.x;\n    return v;\n  }\n\n  normalize () {\n    let v = new Vector(0, 0), m = this.magnitude();\n\n    if (m !== 0) {\n      v.x = this.x / m;\n      v.y = this.y / m;\n    }\n    return v;\n  }\n\n  normal () {\n    let p = this.perp();\n    return p.normalize();\n  }\n}\n\nexport default Vector","class Vertice {\n  constructor (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\nexport default Vertice\n","export function getValue (object, key) {\n  let keysArray = key.split('.');\n  let value = object;\n\n  for (let i = 0, len = keysArray.length; i < len; i++) {\n    value = value[keysArray[i]];\n    if (value === undefined) {\n      console.error(`can't find object value ${key}`);\n      return;\n    }\n  }\n  \n  return value;\n}\n\n\n","import { getValue } from '../utils/Object';\n\n/**\n * Finds maximum value in array (not necessarily \"first\" one)\n * @memberOf fabric.util.array\n * @param {Array} array Array to iterate over\n * @param {String} byProperty\n * @return {*}\n */\nexport function max(array, byProperty) {\n  return find(array, byProperty, function(value1, value2) {\n    return value1 >= value2;\n  });\n}\n\n/**\n * Finds minimum value in array (not necessarily \"first\" one)\n * @memberOf fabric.util.array\n * @param {Array} array Array to iterate over\n * @param {String} byProperty\n * @return {*}\n */\nexport function min(array, byProperty) {\n  return find(array, byProperty, function(value1, value2) {\n    return value1 < value2;\n  });\n}\n\nexport function find(array, byProperty, condition) {\n  if (!array || array.length === 0) {\n    return;\n  }\n\n  var i = array.length - 1,\n      result = byProperty ? getValue(array[i], byProperty) : array[i];\n  if (byProperty) {\n    while (i--) {\n      if (condition(getValue(array[i], byProperty), result)) {\n        result = getValue(array[i], byProperty);\n      }\n    }\n  }\n  else {\n    while (i--) {\n      if (condition(array[i], result)) {\n        result = array[i];\n      }\n    }\n  }\n  return result;\n}\n","import Projection from '../geometry/Projection';\nimport Shape from './Shape';\nimport Vector from '../geometry/Vector';\nimport Vertice from '../geometry/Vertice';\nimport { min, max } from '../utils/Array';\n\nclass Polygon extends Shape {\n  constructor (points, opts) {\n    super(opts);\n    this.type = 'polygon';\n    this.vertices = points.map(point => new Vertice(point[0], point[1]));\n    this.dimensions = this.calcDimensions();\n  }\n\n  getAxes () {\n    const { x: posX, y: posY } = this.transform.position;\n\n    let v1 = new Vector(),\n      v2 = new Vector(),\n      axes = [],\n      pointNum = this.vertices.length;\n\n  \n    for (let i = 0; i < pointNum - 1; i++) {\n      v1.x = this.vertices[i].x + posX;\n      v1.y = this.vertices[i].y + posY;\n\n      v2.x = this.vertices[i + 1].x + posX;\n      v2.y = this.vertices[i + 1].y + posY;\n\n      axes.push(v1.edge(v2).normal());\n    }\n\n    v1.x = this.vertices[pointNum - 1].x + posX;\n    v1.y = this.vertices[pointNum - 1].y + posY;\n\n    v2.x = this.vertices[0].x + posX;\n    v2.y = this.vertices[0].y + posY;\n    \n    axes.push(v1.edge(v2).normal());\n\n    return axes;\n  }\n\n  project (axis) {\n    const { x: posX, y: posY } = this.transform.position;\n\n    let scalars = [],\n      v = new Vector();\n\n    this.vertices.forEach(point => {\n      v.x = point.x + posX;\n      v.y = point.y + posY;\n      scalars.push(v.dot(axis));\n    })\n\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  addPoint (x, y) {\n    this.vertices.push(new Vertice(x, y));\n  }\n\n  calcDimensions () {\n    let vertices = this.vertices,\n      minX = min(vertices, 'x') || 0,\n      minY = min(vertices, 'y') || 0,\n      maxX = max(vertices, 'x') || 0,\n      maxY = max(vertices, 'y') || 0,\n      width = (maxX - minX),\n      height = (maxY - minY);\n\n    return {\n      left: minX,\n      top: minY,\n      width: width,\n      height: height\n    };\n  }\n\n  move (dx, dy) {\n    for (let i = 0, point; i < this.vertices.length; i++) {\n      point = this.vertices[i];\n      point.x += dx;\n      point.y += dy;\n    }\n  }\n}\n\nexport default Polygon;\n","import Line from './Line';\nimport Vertice from '../geometry/Vertice';\n\nclass Polyline extends Line {\n  constructor (points, opts) {\n    super(opts);\n    this.type = 'polyline';\n    this.vertices = points.map(point => new Vertice(point[0], point[1]));\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Polyline;","import Shape from './Shape';\n\nclass Rectangle extends Shape {\n  constructor (opts) {\n    super(opts);\n    this.type = 'rectangle';\n    this.width = opts.width || 0;\n    this.height = opts.height || 0;\n    this.rx = opts.rx || 0;\n    this.ry = opts.ry || 0;\n    this.dimensions = this.calcDimensions();\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n    // console.log(axis);\n  }\n\n  addPoint (x, y) {\n    console.log(x, y);\n  }\n\n  calcDimensions () {\n    return {\n      left: 0,\n      top: 0,\n      width: this.width,\n      height: this.height\n    };\n  }\n\n  move (dx, dy) {\n    console.log(dx, dy);\n  }\n}\n\nexport default Rectangle;","import Shape from './Shape';\n\nclass Sprite extends Shape {\n  constructor (opts) {\n    super(opts);\n    this.type = 'sprite';\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Sprite;","/**\n * Constants that define the type of gradient on text.\n *\n * @static\n * @constant\n * @type {object}\n * @property {number} LINEAR_VERTICAL Vertical gradient\n * @property {number} LINEAR_HORIZONTAL Linear gradient\n */\nexport const TEXT_GRADIENT = {\n    LINEAR_VERTICAL: 0,\n    LINEAR_HORIZONTAL: 1,\n};\n","/**\n * Converts a hexadecimal color number to a string.\n * @param {number} hex - Number in hex (e.g., `0xffffff`)\n * @return {string} The string color (e.g., `\"#ffffff\"`).\n */\nexport function hex2string (hex) {\n  hex = hex.toString(16);\n  hex = '000000'.substr(0, 6 - hex.length) + hex;\n\n  return `#${hex}`;\n}\n\n/**\n * Converts a hexadecimal color number to an [R, G, B] array of normalized floats (numbers from 0.0 to 1.0).\n *\n * @param {number} hex - The hexadecimal number to convert\n * @param  {number[]} [out=[]] If supplied, this array will be used rather than returning a new one\n * @return {number[]} An array representing the [R, G, B] of the color where all values are floats.\n */\nexport function hex2rgb (hex, out) {\n  out = out || [];\n\n  out[0] = ((hex >> 16) & 0xFF) / 255;\n  out[1] = ((hex >> 8) & 0xFF) / 255;\n  out[2] = (hex & 0xFF) / 255;\n\n  return out;\n}\n\n/**\n * Converts a hexadecimal string to a hexadecimal color number.\n *\n * @param {string} The string color (e.g., `\"#ffffff\"`)\n * @return {number} Number in hexadecimal.\n */\nexport function string2hex (string) {\n  if (typeof string === 'string' && string[0] === '#') {\n    string = string.substr(1);\n  }\n\n  return parseInt(string, 16);\n}\n","import { TEXT_GRADIENT } from './const';\nimport { hex2string } from '../../utils/Color'\n\nconst defaultStyle = {\n  align: 'left',\n  breakWords: false,\n  dropShadow: false,\n  dropShadowAlpha: 1,\n  dropShadowAngle: Math.PI / 6,\n  dropShadowBlur: 0,\n  dropShadowColor: 'black',\n  dropShadowDistance: 5,\n  fill: 'black',\n  fillGradientType: TEXT_GRADIENT.LINEAR_VERTICAL,\n  fillGradientStops: [],\n  fontFamily: 'Arial',\n  fontSize: 26,\n  fontStyle: 'normal',\n  fontVariant: 'normal',\n  fontWeight: 'normal',\n  letterSpacing: 0,\n  lineHeight: 0,\n  lineJoin: 'miter',\n  miterLimit: 10,\n  padding: 0,\n  stroke: 'black',\n  strokeThickness: 0,\n  textBaseline: 'alphabetic',\n  trim: false,\n  whiteSpace: 'pre',\n  wordWrap: false,\n  wordWrapWidth: 100,\n  leading: 0,\n};\n\nconst genericFontFamilies = [\n  'serif',\n  'sans-serif',\n  'monospace',\n  'cursive',\n  'fantasy',\n  'system-ui',\n]\n\nexport class TextStyle {\n  constructor (style) {\n    this.styleID = 0;\n\n    this.reset();\n\n    deepCopyProperties(this, style, style);\n  }\n\n  reset () {\n    deepCopyProperties(this, defaultStyle, defaultStyle);\n  }\n\n  clone () {\n    const clonedProperties = {};\n\n    deepCopyProperties(clonedProperties, this, defaultStyle);\n\n    return new TextStyle(clonedProperties);\n  }\n\n  get align() {\n    return this._align;\n  }\n\n  set align (align) {\n    if (this._align !== align) {\n      this._align = align;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * Indicates if lines can be wrapped within words, it needs wordWrap to be set to true\n   *\n   * @member {boolean}\n   */\n  get breakWords () {\n    return this._breakWords;\n  }\n\n  set breakWords (breakWords) {\n    if (this._breakWords !== breakWords) {\n      this._breakWords = breakWords;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * Set a drop shadow for the text\n   *\n   * @member {boolean}\n   */\n  get dropShadow() {\n    return this._dropShadow;\n  }\n\n  set dropShadow (dropShadow) {\n    if (this._dropShadow !== dropShadow) {\n      this._dropShadow = dropShadow;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * Set alpha for the drop shadow\n   *\n   * @member {number}\n   */\n  get dropShadowAlpha () {\n    return this._dropShadowAlpha;\n  }\n\n  set dropShadowAlpha (dropShadowAlpha){\n    if (this._dropShadowAlpha !== dropShadowAlpha) {\n      this._dropShadowAlpha = dropShadowAlpha;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * Set a angle of the drop shadow\n   *\n   * @member {number}\n   */\n  get dropShadowAngle () {\n    return this._dropShadowAngle;\n  }\n\n  set dropShadowAngle (dropShadowAngle) {\n    if (this._dropShadowAngle !== dropShadowAngle) {\n      this._dropShadowAngle = dropShadowAngle;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * Set a shadow blur radius\n   *\n   * @member {number}\n   */\n  get dropShadowBlur () {\n    return this._dropShadowBlur;\n  }\n\n  set dropShadowBlur (dropShadowBlur) {\n    if (this._dropShadowBlur !== dropShadowBlur) {\n      this._dropShadowBlur = dropShadowBlur;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * A fill style to be used on the dropshadow e.g 'red', '#00FF00'\n   *\n   * @member {string|number}\n   */\n  get dropShadowColor () {\n    return this._dropShadowColor;\n  }\n\n  set dropShadowColor (dropShadowColor) {\n    const outputColor = getColor(dropShadowColor);\n    if (this._dropShadowColor !== outputColor) {\n      this._dropShadowColor = outputColor;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * Set a distance of the drop shadow\n   *\n   * @member {number}\n   */\n  get dropShadowDistance () {\n    return this._dropShadowDistance;\n  }\n\n  set dropShadowDistance (dropShadowDistance) {\n    if (this._dropShadowDistance !== dropShadowDistance) {\n      this._dropShadowDistance = dropShadowDistance;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * A canvas fillstyle that will be used on the text e.g 'red', '#00FF00'.\n   * Can be an array to create a gradient eg ['#000000','#FFFFFF']\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle|MDN}\n   *\n   * @member {string|string[]|number|number[]|CanvasGradient|CanvasPattern}\n   */\n  get fill () {\n    return this._fill;\n  }\n\n  set fill (fill) {\n    const outputColor = getColor(fill);\n    if (this._fill !== outputColor) {\n      this._fill = outputColor;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * If fill is an array of colours to create a gradient, this can change the type/direction of the gradient.\n   *\n   * @member {number}\n   */\n  get fillGradientType () {\n    return this._fillGradientType;\n  }\n\n  set fillGradientType (fillGradientType) {\n    if (this._fillGradientType !== fillGradientType) {\n      this._fillGradientType = fillGradientType;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * If fill is an array of colours to create a gradient, this array can set the stop points\n   * (numbers between 0 and 1) for the color, overriding the default behaviour of evenly spacing them.\n   *\n   * @member {number[]}\n   */\n  get fillGradientStops () {\n    return this._fillGradientStops;\n  }\n\n  set fillGradientStops (fillGradientStops) {\n    if (!areArraysEqual(this._fillGradientStops,fillGradientStops)) {\n      this._fillGradientStops = fillGradientStops;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The font family\n   *\n   * @member {string|string[]}\n   */\n  get fontFamily () {\n    return this._fontFamily;\n  }\n\n  set fontFamily (fontFamily) {\n    if (this.fontFamily !== fontFamily) {\n      this._fontFamily = fontFamily;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The font size\n   * (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em')\n   *\n   * @member {number|string}\n   */\n  get fontSize () {\n    return this._fontSize;\n  }\n\n  set fontSize (fontSize) {\n    if (this._fontSize !== fontSize) {\n      this._fontSize = fontSize;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The font style\n   * ('normal', 'italic' or 'oblique')\n   *\n   * @member {string}\n   */\n  get fontStyle () {\n    return this._fontStyle;\n  }\n  set fontStyle (fontStyle) {\n    if (this._fontStyle !== fontStyle) {\n      this._fontStyle = fontStyle;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The font variant\n   * ('normal' or 'small-caps')\n   *\n   * @member {string}\n   */\n  get fontVariant () {\n    return this._fontVariant;\n  }\n\n  set fontVariant (fontVariant) {\n    if (this._fontVariant !== fontVariant) {\n      this._fontVariant = fontVariant;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The font weight\n   * ('normal', 'bold', 'bolder', 'lighter' and '100', '200', '300', '400', '500', '600', '700', 800' or '900')\n   *\n   * @member {string}\n   */\n  get fontWeight () {\n    return this._fontWeight;\n  }\n\n  set fontWeight (fontWeight) {\n    if (this._fontWeight !== fontWeight) {\n      this._fontWeight = fontWeight;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The amount of spacing between letters, default is 0\n   *\n   * @member {number}\n   */\n  get letterSpacing () {\n    return this._letterSpacing;\n  }\n  set letterSpacing (letterSpacing) {\n    if (this._letterSpacing !== letterSpacing) {\n      this._letterSpacing = letterSpacing;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The line height, a number that represents the vertical space that a letter uses\n   *\n   * @member {number}\n   */\n  get lineHeight () {\n    return this._lineHeight;\n  }\n\n  set lineHeight (lineHeight) {\n    if (this._lineHeight !== lineHeight) {\n      this._lineHeight = lineHeight;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The space between lines\n   *\n   * @member {number}\n   */\n  get leading() {\n    return this._leading;\n  }\n\n  set leading (leading) {\n    if (this._leading !== leading) {\n      this._leading = leading;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The lineJoin property sets the type of corner created, it can resolve spiked text issues.\n   * Default is 'miter' (creates a sharp corner).\n   *\n   * @member {string}\n   */\n  get lineJoin () {\n    return this._lineJoin;\n  }\n\n  set lineJoin (lineJoin) {\n    if (this._lineJoin !== lineJoin) {\n      this._lineJoin = lineJoin;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The miter limit to use when using the 'miter' lineJoin mode\n   * This can reduce or increase the spikiness of rendered text.\n   *\n   * @member {number}\n   */\n  get miterLimit () {\n    return this._miterLimit;\n  }\n\n  set miterLimit (miterLimit) {\n    if (this._miterLimit !== miterLimit) {\n      this._miterLimit = miterLimit;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n   * by adding padding to all sides of the text.\n   *\n   * @member {number}\n   */\n  get padding () {\n    return this._padding;\n  }\n\n  set padding (padding) {\n    if (this._padding !== padding) {\n        this._padding = padding;\n        this.styleID++;\n    }\n  }\n\n  /**\n   * A canvas fillstyle that will be used on the text stroke\n   * e.g 'blue', '#FCFF00'\n   *\n   * @member {string|number}\n   */\n  get stroke () {\n    return this._stroke;\n  }\n\n  set stroke (stroke) {\n    const outputColor = getColor(stroke);\n    if (this._stroke !== outputColor) {\n      this._stroke = outputColor;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * A number that represents the thickness of the stroke.\n   * Default is 0 (no stroke)\n   *\n   * @member {number}\n   */\n  get strokeThickness() {\n    return this._strokeThickness;\n  }\n  set strokeThickness (strokeThickness) {\n    if (this._strokeThickness !== strokeThickness) {\n      this._strokeThickness = strokeThickness;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The baseline of the text that is rendered.\n   *\n   * @member {string}\n   */\n  get textBaseline () {\n    return this._textBaseline;\n  }\n\n  set textBaseline (textBaseline) {\n    if (this._textBaseline !== textBaseline) {\n      this._textBaseline = textBaseline;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * Trim transparent borders\n   *\n   * @member {boolean}\n   */\n  get trim () {\n    return this._trim;\n  }\n\n  set trim (trim) {\n    if (this._trim !== trim) {\n      this._trim = trim;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * How newlines and spaces should be handled.\n   * Default is 'pre' (preserve, preserve).\n   *\n   *  value       | New lines     |   Spaces\n   *  ---         | ---           |   ---\n   * 'normal'     | Collapse      |   Collapse\n   * 'pre'        | Preserve      |   Preserve\n   * 'pre-line'   | Preserve      |   Collapse\n   *\n   * @member {string}\n   */\n  get whiteSpace () {\n    return this._whiteSpace;\n  }\n\n  set whiteSpace (whiteSpace) {\n    if (this._whiteSpace !== whiteSpace) {\n      this._whiteSpace = whiteSpace;\n      this.styleID++;\n    }\n  }\n\n  get wordWrap () {\n    return this._wordWrap;\n  }\n\n  set wordWrap (wordWrap) {\n    if (this._wordWrap !== wordWrap) {\n      this._wordWrap = wordWrap;\n      this.styleID++;\n    }\n  }\n\n  /**\n   * The width at which text will wrap, it needs wordWrap to be set to true\n   *\n   * @member {number}\n   */\n  get wordWrapWidth () {\n    return this._wordWrapWidth;\n  }\n\n  set wordWrapWidth (wordWrapWidth) {\n    if (this._wordWrapWidth !== wordWrapWidth) {\n      this._wordWrapWidth = wordWrapWidth;\n      this.styleID++;\n    }\n  }\n\n  toFontString () {\n    const fontSizeString = (typeof this.fontSize === 'number') ? `${this.fontSize}px` : this.fontSize;\n\n    let fontFamilies = this.fontFamily;\n\n    if (!Array.isArray(this.fontFamily)) {\n      fontFamilies = this.fontFamily.split(',');\n    }\n\n    for (let i = fontFamilies.length - 1; i >= 0; i--) {\n        // Trim any extra white-space\n      let fontFamily = fontFamilies[i].trim();\n\n      // Check if font already contains strings\n      if (!(/([\\\"\\'])[^\\'\\\"]+\\1/).test(fontFamily) && genericFontFamilies.indexOf(fontFamily) < 0) {\n        fontFamily = `\"${fontFamily}\"`;\n      }\n      fontFamilies[i] = fontFamily;\n    }\n\n    return `${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${fontSizeString} ${fontFamilies.join(',')}`;\n  }\n}\n\n/**\n * Utility function to convert hexadecimal colors to strings, and simply return the color if it's a string.\n * @private\n * @param {number|number[]} color\n * @return {string} The color as a string.\n */\nfunction getSingleColor (color) {\n  if (typeof color === 'number') {\n    return hex2string(color);\n  } else if ( typeof color === 'string' ) {\n    if (color.indexOf('0x') === 0) {\n      color = color.replace('0x', '#');\n    }\n  }\n\n  return color;\n}\n\n/**\n * Utility function to convert hexadecimal colors to strings, and simply return the color if it's a string.\n * This version can also convert array of colors\n * @private\n * @param {number|number[]} color\n * @return {string} The color as a string.\n */\nfunction getColor (color) {\n  if (!Array.isArray(color)) {\n    return getSingleColor(color);\n  } else {\n    for (let i = 0; i < color.length; ++i) {\n      color[i] = getSingleColor(color[i]);\n    }\n\n    return color;\n  }\n}\n\n/**\n * Utility function to convert hexadecimal colors to strings, and simply return the color if it's a string.\n * This version can also convert array of colors\n * @private\n * @param {Array} array1 First array to compare\n * @param {Array} array2 Second array to compare\n * @return {boolean} Do the arrays contain the same values in the same order\n */\nfunction areArraysEqual (array1, array2) {\n  if (!Array.isArray(array1) || !Array.isArray(array2)) {\n    return false;\n  }\n\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utility function to ensure that object properties are copied by value, and not by reference\n * @private\n * @param {Object} target Target object to copy properties into\n * @param {Object} source Source object for the properties to copy\n * @param {string} propertyObj Object containing properties names we want to loop over\n */\nfunction deepCopyProperties (target, source, propertyObj) {\n  for (const prop in propertyObj) {\n    if (Array.isArray(source[prop])) {\n      target[prop] = source[prop].slice();\n    } else {\n      target[prop] = source[prop];\n    }\n  }\n}\n","export class TextMetrics {\n  constructor (text, style, width, height, lines, lineWidths, lineHeight, maxLineWidth, fontProperties) {\n    this.text = text;\n    this.style = style;\n    this.width = width;\n    this.height = height;\n    this.lines = lines; // {string[]}\n    this.lineWidths = lineWidths; // {number[]}\n    this.lineHeight = lineHeight;\n    this.maxLineWidth = maxLineWidth;\n    this.fontProperties = fontProperties;\n    console.log(this)\n  }\n\n  static measureText (text, style, wordWrap) {\n    wordWrap = (wordWrap === undefined || wordWrap === null) ? style.wordWrap : wordWrap;\n    const font = style.toFontString();\n    const fontProperties = TextMetrics.measureFont(font);\n\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = style.fontSize;\n      fontProperties.ascent = style.fontSize;\n    }\n\n    const context = TextMetrics._context;\n\n    context.font = font;\n\n    const outputText = wordWrap ? TextMetrics.wordWrap(text, style) : text;\n    const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineWidths = new Array(lines.length);\n    let maxLineWidth = 0;\n\n    for (let i = 0; i < lines.length; i++) {\n      const lineWidth = context.measureText(lines[i]).width + ((lines[i].length - 1) * style.letterSpacing);\n\n      lineWidths[i] = lineWidth;\n      maxLineWidth = Math.max(maxLineWidth, lineWidth);\n    }\n\n    let width = maxLineWidth + style.strokeThickness;\n\n    if (style.dropShadow) {\n      width += style.dropShadowDistance;\n    }\n\n    const lineHeight = style.lineHeight || fontProperties.fontSize + style.strokeThickness;\n    let height = Math.max(lineHeight, fontProperties.fontSize + style.strokeThickness);\n\n    if (style.dropShadow) {\n      height += style.dropShadowDistance;\n    }\n    \n    return new TextMetrics(\n      text,\n      style,\n      width,\n      height,\n      lines,\n      lineWidths,\n      lineHeight + style.leading,\n      maxLineWidth,\n      fontProperties\n    );\n  }\n\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style\n   * http://en.wikipedia.org/wiki/Typeface\n   *\n   * @static\n   * @param {string} font - String representing the style of the font\n   * @return {FontMetrics} Font properties object\n   */\n  static measureFont (font) {\n    if (TextMetrics._fonts[font]) {\n      return TextMetrics._fonts[font];\n    }\n\n    const properties = {};\n\n    const canvas = TextMetrics._canvas;\n    const context = TextMetrics._context;\n\n    context.font = font;\n\n    const metricsString = TextMetrics.METRICS_STRING + TextMetrics.BASELINE_SYMBOL;\n    const width = Math.ceil(context.measureText(metricsString).width);\n    let baseline = Math.ceil(context.measureText(TextMetrics.BASELINE_SYMBOL).width);\n    const height = 2 * baseline;\n    baseline = baseline * TextMetrics.BASELINE_MULTIPLIER | 0;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    context.fillStyle = '#f00';\n    context.fillRect(0, 0, width, height);\n\n    context.font = font;\n\n    context.textBaseline = 'alphabetic';\n    context.fillStyle = '#000';\n    context.fillText(metricsString, 0, baseline);\n\n    const imagedata = context.getImageData(0, 0, width, height).data;\n    const pixels = imagedata.length;\n    const line = width * 4;\n\n    let i = 0;\n    let idx = 0;\n    let stop = false;\n\n    for (i = 0; i < baseline; ++i) {\n      for (let j = 0; j < line; j += 4) {\n        if (imagedata[idx + j] !== 255) {\n          stop = true;\n          break;\n        }\n      }\n      if (!stop) {\n        idx += line;\n      } else {\n        break;\n      }\n    }\n\n    properties.ascent = baseline - i;\n\n    idx = pixels - line;\n    stop = false;\n\n    for (i = height; i > baseline; --i) {\n      for (let j = 0; j < line; j += 4) {\n        if (imagedata[idx + j] !== 255) {\n          stop = true;\n          break;\n        }\n      }\n\n      if (!stop) {\n        idx -= line;\n      } else {\n        break;\n      }\n    }\n\n    properties.descent = i - baseline;\n    properties.fontSize = properties.ascent + properties.descent;\n\n    TextMetrics._fonts[font] = properties;\n\n    return properties;\n  }\n\n  /**\n   * Applies newlines to a string to have it optimally fit into the horizontal\n   * bounds set by the Text object's wordWrapWidth property.\n   *\n   * @private\n   * @param {string} text - String to apply word wrapping to\n   * @param {TextStyle} style - the style to use when wrapping\n   * @param {HTMLCanvasElement} [canvas] - optional specification of the canvas to use for measuring.\n   * @return {string} New string with new lines applied where required\n   */\n  static wordWrap (text, style) {\n    const context = TextMetrics._context;\n\n    let width = 0;\n    let line = '';\n    let lines = '';\n\n    const cache = {};\n    const { letterSpacing, whiteSpace } = style;\n\n    // How to handle whitespaces\n    const collapseSpaces = TextMetrics.collapseSpaces(whiteSpace);\n    const collapseNewlines = TextMetrics.collapseNewlines(whiteSpace);\n\n    // whether or not spaces may be added to the beginning of lines\n    let canPrependSpaces = !collapseSpaces;\n\n    // There is letterSpacing after every char except the last one\n    // t_h_i_s_' '_i_s_' '_a_n_' '_e_x_a_m_p_l_e_' '_!\n    // so for convenience the above needs to be compared to width + 1 extra letterSpace\n    // t_h_i_s_' '_i_s_' '_a_n_' '_e_x_a_m_p_l_e_' '_!_\n    // ________________________________________________\n    // And then the final space is simply no appended to each line\n    const wordWrapWidth = style.wordWrapWidth + letterSpacing;\n\n    // break text into words, spaces and newline chars\n    const tokens = TextMetrics.tokenize(text);\n\n    for (let i = 0; i < tokens.length; i++) {\n      let token = tokens[i];\n\n      if (TextMetrics.isNewline(token)) {\n        if (!collapseNewlines) {\n          lines += TextMetrics.addLine(line);\n          canPrependSpaces = !collapseSpaces;\n          line = '';\n          width = 0;\n          continue;\n        }\n\n        // if we should collapse new lines\n        // we simply convert it into a space\n        token = ' ';\n      }\n\n      // if we should collapse repeated whitespaces\n      if (collapseSpaces) {\n        // check both this and the last tokens for spaces\n        const currIsBreakingSpace = TextMetrics.isBreakingSpace(token);\n        const lastIsBreakingSpace = TextMetrics.isBreakingSpace(line[line.length - 1]);\n\n        if (currIsBreakingSpace && lastIsBreakingSpace) {\n          continue;\n        }\n      }\n\n      const tokenWidth = TextMetrics.getFromCache(token, letterSpacing, cache, context);\n\n      // word is longer than desired bounds\n      if (tokenWidth > wordWrapWidth) {\n        // if we are not already at the beginning of a line\n        if (line !== '') {\n          // start newlines for overflow words\n          lines += TextMetrics.addLine(line);\n          line = '';\n          width = 0;\n        }\n\n        // break large word over multiple lines\n        if (TextMetrics.canBreakWords(token, style.breakWords)) {\n          // break word into characters\n          const characters = token.split('');\n          // loop the characters\n          for (let j = 0; j < characters.length; j++) {\n            let char = characters[j];\n\n            let k = 1;\n            // we are not at the end of the token\n\n            while (characters[j + k]) {\n              const nextChar = characters[j + k];\n              const lastChar = char[char.length - 1];\n              \n              // should not split chars\n              if (!TextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords)) {\n                // combine chars & move forward one\n                char += nextChar;\n              } else {\n                break;\n              }\n\n              k++;\n            }\n\n            j += char.length - 1;\n\n            const characterWidth = TextMetrics.getFromCache(char, letterSpacing, cache, context);\n\n            if (characterWidth + width > wordWrapWidth) {\n              lines += TextMetrics.addLine(line);\n              canPrependSpaces = false;\n              line = '';\n              width = 0;\n            }\n\n            line += char;\n            width += characterWidth;\n          }\n        } else {\n          // if there are words in this line already\n          // finish that line and start a new one\n          if (line.length > 0) {\n            lines += TextMetrics.addLine(line);\n            line = '';\n            width = 0;\n          }\n\n          const isLastToken = i === tokens.length - 1;\n\n          // give it its own line if it's not the end\n          lines += TextMetrics.addLine(token, !isLastToken);\n          canPrependSpaces = false;\n          line = '';\n          width = 0;\n        }\n      } else {\n        // word won't fit because of existing words\n        // start a new line\n        if (tokenWidth + width > wordWrapWidth) {\n          // if its a space we don't want it\n          canPrependSpaces = false;\n\n          // add a new line\n          lines += TextMetrics.addLine(line);\n\n          // start a new line\n          line = '';\n          width = 0;\n        }\n\n        // don't add spaces to the beginning of lines\n        if (line.length > 0 || !TextMetrics.isBreakingSpace(token) || canPrependSpaces) {\n          // add the word to the current line\n          line += token;\n\n          // update width counter\n          width += tokenWidth;\n        }\n      }\n    }\n\n    lines += TextMetrics.addLine(line, false);\n\n    return lines;\n  }\n\n  /**\n   * Gets & sets the widths of calculated characters in a cache object\n   *\n   * @private\n   * @param  {string}                    key            The key\n   * @param  {number}                    letterSpacing  The letter spacing\n   * @param  {object}                    cache          The cache\n   * @param  {CanvasRenderingContext2D}  context        The canvas context\n   * @return {number}                    The from cache.\n   */\n  static getFromCache (key, letterSpacing, cache, context) {\n    let width = cache[key];\n\n    if (width === undefined) {\n      const spacing = ((key.length) * letterSpacing);\n\n      width = context.measureText(key).width + spacing;\n      cache[key] = width;\n    }\n\n    return width;\n  }\n\n  /**\n   * Determines whether we should collapse breaking spaces\n   *\n   * @private\n   * @param  {string}   whiteSpace  The TextStyle property whiteSpace\n   * @return {boolean}  should collapse\n   */\n  static collapseSpaces (whiteSpace) {\n      return (whiteSpace === 'normal' || whiteSpace === 'pre-line');\n  }\n\n  /**\n   * Determines whether we should collapse newLine chars\n   *\n   * @private\n   * @param  {string}   whiteSpace  The white space\n   * @return {boolean}  should collapse\n   */\n  static collapseNewlines(whiteSpace) {\n    return (whiteSpace === 'normal');\n  }\n\n  /**\n   * Splits a string into words, breaking-spaces and newLine characters\n   *\n   * @private\n   * @param  {string}  text       The text\n   * @return {string[]}  A tokenized array\n   */\n  static tokenize (text) {\n    const tokens = [];\n    let token = '';\n    if (typeof text !== 'string') {\n      return tokens;\n    }\n\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      if (TextMetrics.isBreakingSpace(char) || TextMetrics.isNewline(char)) {\n        if (token !== '') {\n          tokens.push(token);\n          token = '';\n        }\n\n        tokens.push(char);\n\n        continue;\n      }\n      token += char;\n    }\n\n    if (token !== '') {\n      tokens.push(token);\n    }\n\n    return tokens;\n  }\n\n  /**\n   * This method exists to be easily overridden\n   * It allows one to customise which words should break\n   * Examples are if the token is CJK or numbers.\n   * It must return a boolean.\n   *\n   * @private\n   * @param  {string}  token       The token\n   * @param  {boolean}  breakWords  The style attr break words\n   * @return {boolean} whether to break word or not\n   */\n  static canBreakWords(token, breakWords) {\n    return breakWords;\n  }\n\n  /**\n   * Determines if char is a breaking whitespace.\n   *\n   * @private\n   * @param  {string}  char  The character\n   * @return {boolean}  True if whitespace, False otherwise.\n   */\n  static isBreakingSpace (char) {\n    if (typeof char !== 'string') {\n      return false;\n    }\n\n    return (TextMetrics._breakingSpaces.indexOf(char.charCodeAt(0)) >= 0);\n  }\n\n  /**\n   * Determines if char is a newline.\n   *\n   * @private\n   * @param  {string}  char  The character\n   * @return {boolean}  True if newline, False otherwise.\n   */\n  static isNewline (char) {\n    if (typeof char !== 'string') {\n      return false;\n    }\n\n    return (TextMetrics._newlines.indexOf(char.charCodeAt(0)) >= 0);\n  }\n\n  /**\n   * Convienience function for logging each line added during the wordWrap\n   * method\n   *\n   * @private\n   * @param  {string}   line        - The line of text to add\n   * @param  {boolean}  newLine     - Add new line character to end\n   * @return {string}   A formatted line\n   */\n  static addLine (line, newLine = true) {\n    line = TextMetrics.trimRight(line);\n\n    line = (newLine) ? `${line}\\n` : line;\n\n    return line;\n  }\n\n  /**\n   * trims breaking whitespaces from string\n   *\n   * @private\n   * @param  {string}  text  The text\n   * @return {string}  trimmed string\n   */\n  static trimRight (text) {\n    if (typeof text !== 'string') {\n      return '';\n    }\n\n    for (let i = text.length - 1; i >= 0; i--) {\n      const char = text[i];\n\n      if (!TextMetrics.isBreakingSpace(char)) {\n        break;\n      }\n\n      text = text.slice(0, -1);\n    }\n\n    return text;\n  }\n}\n\nconst canvas = (() => {\n  try {\n    // OffscreenCanvas2D measureText can be up to 40% faster.\n    const c = new OffscreenCanvas(0, 0);\n    return c.getContext('2d') ? c : document.createElement('canvas');\n  } catch (ex) {\n    return document.createElement('canvas');\n  }\n})();\n\ncanvas.width = canvas.height = 10;\n\nTextMetrics._canvas = canvas;\nTextMetrics._context = canvas.getContext('2d');\nTextMetrics._fonts = {};\nTextMetrics.METRICS_STRING = '|q';\nTextMetrics.BASELINE_SYMBOL = 'M';\nTextMetrics.BASELINE_MULTIPLIER = 1.4;\nTextMetrics._newlines = [\n  0x000A, // line feed\n  0x000D, // carriage return\n];\nTextMetrics._breakingSpaces = [\n  0x0009, // character tabulation\n  0x0020, // space\n  0x2000, // en quad\n  0x2001, // em quad\n  0x2002, // en space\n  0x2003, // em space\n  0x2004, // three-per-em space\n  0x2005, // four-per-em space\n  0x2006, // six-per-em space\n  0x2008, // punctuation space\n  0x2009, // thin space\n  0x200A, // hair space\n  0x205F, // medium mathematical space\n  0x3000, // ideographic space\n];\n","import Shape from '../Shape';\nimport { TextStyle } from './TextStyle';\nimport { TextMetrics } from './TextMetrics';\n\nclass Text extends Shape {\n  constructor (text, opts) {\n    super(opts);\n    this.type = 'text';\n    this.text = text;\n    this._style = null;\n    this.style = opts;\n\n    this._font = '18px verdana';\n    this.fill = '#333';\n    this.dimensions = this.calcDimensions();\n\n    this.localStyleID = -1;\n    this.measured = {};\n    console.log('new Text:', this);\n  }\n\n  get style () {\n    return this._style;\n  }\n\n  set style (style) {\n    style = style || {};\n    if (style instanceof TextStyle) {\n      this._style = style;\n    } else {\n      this._style = new TextStyle(style);\n    }\n    this.localStyleID = -1;\n    this.dirty = true;\n  }\n\n  updateText () {\n    const style = this._style;\n\n    if (this.localStyleID !== style.styleID) {\n      this.dirty = true;\n      this.localStyleID = style.styleID;\n    }\n\n    if (!this.dirty) {\n      return;\n    }\n\n    this.measured = TextMetrics.measureText(this.text || ' ', style, style.wordWrap);\n    this._font = this.style.toFontString();\n\n    this.dirty = false;\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  calcDimensions () {\n    return {\n      left: 0,\n      top: 0,\n      width: 100,\n      height: 20\n    };\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Text;","import { min, max } from '../utils/Array';\n\nexport default class ShapesGroup {\n  constructor (shapes) {\n    this.shapes = shapes;\n    this.dimensions = this.calcDimensions();\n  }\n\n  calcDimensions () {\n    let shapes = this.shapes,\n      minX = min(shapes, 'dimensions.left') || 0,\n      minY = min(shapes, 'dimensions.top') || 0,\n      maxX = max(shapes, 'dimensions.left') || 0,\n      maxY = max(shapes, 'dimensions.top') || 0,\n      width = max(shapes, 'dimensions.width'),\n      height = max(shapes, 'dimensions.height');\n\n    return {\n      left: minX,\n      top: minY,\n      width: width,\n      height: height\n    };\n  }\n\n  collidesWith (otherShape) {\n    // return SAT.detectCollide(this, otherShape);\n  }\n\n  getAxes () {\n    throw 'getAxes() not implemented';\n  }\n\n  project () {\n    throw 'project(axis) not implemented';\n  }\n\n  move () {\n    throw 'move(dx, dy) note implemented';\n  }\n}\n","import { isArray, isFunction } from '../utils/Common';\nimport { ShapesGroup } from '../shapes';\n\nexport default class Object {\n  constructor (opts) {\n    this.shape = opts.shape;\n    if (isArray(this.shape)) {\n      this.shape = new ShapesGroup(this.shape);\n    }\n    this.fill = opts.fill !== undefined ? opts.fill : '#83cbff';\n    this.startCb = isFunction(opts.start) ? opts.start : this.start;\n    this.updateCb = isFunction(opts.update) ? opts.update : this.update;\n    this.transform0 = {\n      scaleX: opts.transform.scaleX,\n      skewX: opts.transform.skewX,\n      skewY: opts.transform.skewY,\n      scaleY: opts.transform.scaleY,\n      position: {\n        x: opts.transform.position.x,\n        y: opts.transform.position.y\n      },\n    }\n\n    this.reset();\n  }\n\n  start () {\n  }\n\n  update () {\n  }\n\n  reset () {\n    this.shape.transform = this.transform = JSON.parse(JSON.stringify(this.transform0));\n  }\n}\n","import { TEXT_GRADIENT } from '../../shapes/Text/const';\n\nexport default class CanvasShapeRenderer {\n  constructor (context, pixelRatio, canvasRenderer) {\n    this.context = context;\n    this.pixelRatio = pixelRatio;\n    this.canvasRenderer = canvasRenderer;\n  }\n\n  render (shape) {\n    const { context, pixelRatio, canvasRenderer } = this;\n\n    if (shape.type === 'text') {\n      _drawText(context, shape, pixelRatio, canvasRenderer);\n      return\n    }\n\n    switch (shape.type) {\n      case 'path':\n        _execPathCommands(context, shape);\n        break;\n      case 'polygon':\n        _pathPolygon(context, shape);\n        break;\n      case 'polyline':\n        _pathPolyline(context, shape);\n        break;\n      case 'rectangle':\n        _pathRectangle(context, shape);\n        break;\n      case 'circle':\n        _pathCircle(context, shape);\n        break;\n      default:\n        break;\n    }\n\n    _setStrokeStyles(context, shape);\n    _setFillStyles(context, shape);\n    _renderStroke(context, shape);\n    _renderFill(context, shape);\n  }\n}\n\nfunction _setStrokeStyles (context, shape) {\n  if (shape.stroke) {\n    context.lineWidth = shape.strokeWidth;\n    context.lineCap = shape.strokeLineCap;\n    context.lineDashOffset = shape.strokeDashOffset;\n    context.lineJoin = shape.strokeLineJoin;\n    context.miterLimit = shape.strokeMiterLimit;\n    context.strokeStyle = shape.stroke;\n  }\n}\n\nfunction _setFillStyles (context, shape) {\n  if (shape.fill) {\n    context.fillStyle = shape.fill;\n  }\n}\n\nfunction _renderStroke (context, shape) {\n  if (!shape.stroke || shape.strokeWidth === 0) {\n    return;\n  }\n  // _setLineDash(this.context, this.strokeDashArray, this._renderDashedStroke);\n  context.save();\n  context.stroke();\n  context.restore();\n}\n\nfunction _renderFill (context) {\n  context.save();\n  context.fill();\n  context.restore();\n}\n\nfunction _pathPolygon(context, shape) {\n  let points = shape.vertices,\n    point;\n  let len = points.length;\n\n  if (!len || len === 0 || isNaN(points[len - 1].y)) {\n    return false;\n  }\n\n  context.beginPath();\n  context.moveTo(points[0].x, points[0].y);\n  for (let i = 0; i < len; i++) {\n    point = points[i];\n    context.lineTo(point.x, point.y);\n  }\n  context.closePath();\n}\n\nfunction _pathPolyline(context, shape) {\n  context.beginPath();\n  context.closePath();\n}\n\nfunction _pathRectangle(context, shape) {\n  let rx = shape.rx ? Math.min(shape.rx, shape.width / 2) : 0,\n    ry = shape.ry ? Math.min(shape.ry, shape.height / 2) : 0,\n    w = shape.width,\n    h = shape.height,\n    isRounded = rx !== 0 || ry !== 0,\n    /* \"magic number\" for bezier approximations of arcs (http://itc.ktu.lt/itc354/Riskus354.pdf) */\n    k = 1 - 0.5522847498;\n\n  context.beginPath();\n  context.moveTo(rx, 0);\n\n  context.lineTo(w - rx, 0);\n  isRounded && context.bezierCurveTo(w - k * rx, 0, w, k * ry, w, ry);\n\n  context.lineTo(w, h - ry);\n  isRounded && context.bezierCurveTo(w, h - k * ry, w - k * rx, h, w - rx, h);\n\n  context.lineTo(rx, h);\n  isRounded && context.bezierCurveTo(k * rx, h, 0, h - k * ry, 0, h - ry);\n\n  context.lineTo(0, ry);\n  isRounded && context.bezierCurveTo(0, k * ry, k * rx, 0, rx, 0);\n\n  context.closePath();\n}\n\nfunction _pathCircle(context, shape) {\n  context.beginPath();\n  context.arc(0, 0, shape.radius, 0, 2 * Math.PI);\n  context.closePath();\n}\n\nfunction _execPathCommands(context, shape) {\n  const { path } = shape;\n  let current,\n    previous,\n    subpathStartX = 0,\n    subpathStartY = 0,\n    x = 0,\n    y = 0,\n    controlX = 0,\n    controlY = 0,\n    tempX,\n    tempY\n\n  context.beginPath();\n\n  for (let i = 0, len = path.length; i < len; i++) {\n    current = path[i];\n\n    switch (current[0]) {\n      case 'l': // lineTo, relative\n        break;\n      case 'L': // lineTo, absolute\n        x = current[1];\n        y = current[2];\n        context.lineTo(x, y);\n        break;\n      case 'h': // horizontal lineTo, relative\n        break;\n      case 'H': // horizontal lineTo, absolute\n        break;\n      case 'v': // vertical lineTo, relative\n        break;\n      case 'V': // verical lineTo, absolute\n        break;\n      case 'm': // moveTo, relative\n        break;\n      case 'M': // moveTo, absolute\n        x = current[1];\n        y = current[2];\n        subpathStartX = x;\n        subpathStartY = y;\n        context.moveTo(x, y);\n        break;\n      case 'c': // bezierCurveTo, relative\n        break;\n      case 'C': // bezierCurveTo, absolute\n        break;\n      case 's': // shorthand cubic bezierCurveTo, relative\n        break;\n      case 'S': // shorthand cubic bezierCurveTo, absolute\n        break;\n      case 'q': // quadraticCurveTo, relative\n        break;\n      case 'Q': // quadraticCurveTo, absolute\n        break;\n      case 't': // shorthand quadraticCurveTo, relative\n        break;\n      case 'T': // shorthand quadraticCurveTo, absolute\n        break;\n      case 'a': // arc, relative\n        break;\n      case 'A': // arc, absolute\n        break;\n      case 'z':\n      case 'Z':\n        x = subpathStartX;\n        y = subpathStartY;\n        context.closePath();\n        break;\n    }\n    previous = current;\n  }\n}\n\nfunction _drawText (context, shape, pixelRatio, canvasRenderer) {\n  context.beginPath();\n\n  shape.updateText();\n\n  const { measured, style } = shape;\n  const width = measured.width;\n  const height = measured.height;\n  const lines = measured.lines;\n  const lineHeight = measured.lineHeight;\n  const lineWidths = measured.lineWidths;\n  const maxLineWidth = measured.maxLineWidth;\n  const fontProperties = measured.fontProperties;\n\n  context.font = shape._font;\n  context.lineWidth = style.strokeThickness;\n  context.textBaseline = style.textBaseline;\n  context.lineJoin = style.lineJoin;\n  context.miterLimit = style.miterLimit;\n\n  let linePositionX;\n  let linePositionY;\n\n  context.fillStyle = _generateFillStyle(style, lines, width, height);\n  context.strokeStyle = style.stroke;\n\n  if (style.dropShadow) {\n    context.shadowColor = style.dropShadowColor;\n    context.shadowBlur = style.dropShadowBlur;\n    context.shadowOffsetX = Math.cos(style.dropShadowAngle) * style.dropShadowDistance * canvasRenderer.getZoom();\n    context.shadowOffsetY = (Math.sin(style.dropShadowAngle) * style.dropShadowDistance) * canvasRenderer.getZoom();\n  }\n\n  for (let i = 0; i < lines.length; i++) {\n    linePositionX = style.strokeThickness / 2;\n    linePositionY = ((style.strokeThickness / 2) + (i * lineHeight)) + fontProperties.ascent;\n\n    if (style.align === 'right') {\n      linePositionX += maxLineWidth - lineWidths[i];\n    } else if (style.align === 'center') {\n      linePositionX += (maxLineWidth - lineWidths[i]) / 2;\n    }\n\n    if (style.stroke && style.strokeThickness) {\n      _drawLetterSpacing(\n        context,\n        lines[i],\n        style,\n        linePositionX + style.padding,\n        linePositionY + style.padding,\n        true\n      );\n    }\n\n    if (style.fill) {\n      _drawLetterSpacing(\n        context,\n        lines[i],\n        style,\n        linePositionX + style.padding,\n        linePositionY + style.padding\n      );\n    }\n  }\n\n  context.closePath();\n}\n\n/**\n * Generates the fill style. Can automatically generate a gradient based on the fill style being an array\n *\n * @param {object} style - The style.\n * @param {string[]} lines - The lines of text.\n * @param {number} width\n * @param {number} height\n * @return {string|number|CanvasGradient} The fill style\n */\nfunction _generateFillStyle (style, lines, width, height) {\n  if (!Array.isArray(style.fill)) {\n    return style.fill;\n  } else if (style.fill.length === 1) {\n    return style.fill[0];\n  }\n\n  // the gradient will be evenly spaced out according to how large the array is.\n  // ['#FF0000', '#00FF00', '#0000FF'] would created stops at 0.25, 0.5 and 0.75\n  let gradient;\n  let totalIterations;\n  let currentIteration;\n  let stop;\n\n  // make a copy of the style settings, so we can manipulate them later\n  const fill = style.fill.slice();\n  const fillGradientStops = style.fillGradientStops.slice();\n\n  // wanting to evenly distribute the fills. So an array of 4 colours should give fills of 0.25, 0.5 and 0.75\n  if (!fillGradientStops.length) {\n    const lengthPlus1 = fill.length + 1;\n\n    for (let i = 1; i < lengthPlus1; ++i) {\n      fillGradientStops.push(i / lengthPlus1);\n    }\n  }\n\n  // stop the bleeding of the last gradient on the line above to the top gradient of the this line\n  // by hard defining the first gradient colour at point 0, and last gradient colour at point 1\n  fill.unshift(style.fill[0]);\n  fillGradientStops.unshift(0);\n\n  fill.push(style.fill[style.fill.length - 1]);\n  fillGradientStops.push(1);\n\n  if (style.fillGradientType === TEXT_GRADIENT.LINEAR_VERTICAL) {\n    // start the gradient at the top center of the canvas, and end at the bottom middle of the canvas\n    gradient = this.context.createLinearGradient(width / 2, 0, width / 2, height);\n\n    // we need to repeat the gradient so that each individual line of text has the same vertical gradient effect\n    // ['#FF0000', '#00FF00', '#0000FF'] over 2 lines would create stops at 0.125, 0.25, 0.375, 0.625, 0.75, 0.875\n    totalIterations = (fill.length + 1) * lines.length;\n    currentIteration = 0;\n    for (let i = 0; i < lines.length; i++) {\n      currentIteration += 1;\n      for (let j = 0; j < fill.length; j++) {\n        if (typeof fillGradientStops[j] === 'number') {\n          stop = (fillGradientStops[j] / lines.length) + (i / lines.length);\n        } else {\n          stop = currentIteration / totalIterations;\n        }\n        gradient.addColorStop(stop, fill[j]);\n        currentIteration++;\n      }\n    }\n  } else {\n    // start the gradient at the center left of the canvas, and end at the center right of the canvas\n    gradient = this.context.createLinearGradient(0, height / 2, width, height / 2);\n\n    // can just evenly space out the gradients in this case, as multiple lines makes no difference\n    // to an even left to right gradient\n    totalIterations = fill.length + 1;\n    currentIteration = 1;\n\n    for (let i = 0; i < fill.length; i++) {\n      if (typeof fillGradientStops[i] === 'number') {\n        stop = fillGradientStops[i];\n      } else {\n        stop = currentIteration / totalIterations;\n      }\n      gradient.addColorStop(stop, fill[i]);\n      currentIteration++;\n    }\n  }\n\n  return gradient;\n}\n\n/**\n * Render the text with letter-spacing.\n * @param {string} text - The text to draw\n * @param {number} x - Horizontal position to draw the text\n * @param {number} y - Vertical position to draw the text\n * @param {boolean} [isStroke=false] - Is this drawing for the outside stroke of the\n *  text? If not, it's for the inside fill\n * @private\n */\nfunction _drawLetterSpacing (context, text, style, x, y, isStroke = false) {\n  // letterSpacing of 0 means normal\n  const letterSpacing = style.letterSpacing;\n\n  if (letterSpacing === 0) {\n    if (isStroke) {\n      context.strokeText(text, x, y);\n    } else {\n      context.fillText(text, x, y);\n    }\n\n    return;\n  }\n\n  let currentPosition = x;\n\n  // Using Array.from correctly splits characters whilst keeping emoji together.\n  // This is not supported on IE as it requires ES6, so regular text splitting occurs.\n  // This also doesn't account for emoji that are multiple emoji put together to make something else.\n  // Handling all of this would require a big library itself.\n  // https://medium.com/@giltayar/iterating-over-emoji-characters-the-es6-way-f06e4589516\n  // https://github.com/orling/grapheme-splitter\n  const stringArray = Array.from ? Array.from(text) : text.split('');\n  let previousWidth = context.measureText(text).width;\n  let currentWidth = 0;\n\n  for (let i = 0; i < stringArray.length; ++i) {\n    const currentChar = stringArray[i];\n\n    if (isStroke) {\n      context.strokeText(currentChar, currentPosition, y);\n    } else {\n      context.fillText(currentChar, currentPosition, y);\n    }\n    currentWidth = context.measureText(text.substring(i + 1)).width;\n    currentPosition += previousWidth - currentWidth + letterSpacing;\n    previousWidth = currentWidth;\n  }\n}\n","import Events from '../core/Events';\nimport Point from '../geometry/Vertice';\nimport { CanvasShapeRenderer } from './ShapeRenderer';\nimport { ShapesGroup } from '../shapes';\n\nconst iMatrix = [1, 0, 0, 1, 0, 0];\n\nexport default class CanvasRenderer {\n  constructor (opts) {\n    const { width = 300, height = 300, bgColor = 'aliceblue' } = opts;\n\n    this.canvas = _createCanvas();\n    this.context = this.canvas.getContext('2d');\n    this.viewportTransform = iMatrix;\n    \n    this.pixelRatio = _getPixelRatio(this.canvas);\n    this.shapeRenderer = new CanvasShapeRenderer(this.context, this.pixelRatio, this);\n    this.canvas.setAttribute('data-pixel-ratio', this.pixelRatios);\n    this.context.scale(this.pixelRatio, this.pixelRatio);\n\n    this.canvas.width = width * this.pixelRatio;\n    this.canvas.height = height * this.pixelRatio;\n    this.canvas.style.width = width + 'px';\n    this.canvas.style.height = height + 'px';\n    this.canvas.style.backgroundColor = bgColor;\n  }\n\n  get width () {\n    return this.canvas.width;\n  }\n\n  get height () {\n    return this.canvas.height;\n  }\n\n  getZoom () {\n    return this.viewportTransform[0];\n  }\n\n  setViewportTransform (vpt) {\n    this.viewportTransform = vpt;\n  }\n\n  resetTransform () {\n    this.setViewportTransform(iMatrix);\n  }\n\n  zoomToPoint (point, value) {\n    let before = point, vpt = this.viewportTransform.slice(0);\n    point = _transformPoint(point, _invertTransform(this.viewportTransform));\n    vpt[0] = value;\n    vpt[3] = value;\n    let after = _transformPoint(point, vpt);\n    vpt[4] += before.x - after.x;\n    vpt[5] += before.y - after.y;\n\n    this.setViewportTransform(vpt);\n  }\n\n  translate (offset) {\n    let vpt = this.viewportTransform.slice(0);\n\n    vpt[4] += offset.x;\n    vpt[5] += offset.y;\n\n    this.setViewportTransform(vpt);\n  }\n\n  render (objects) {\n    const { context, pixelRatio } = this;\n    let vpt = this.viewportTransform;\n    context.save();\n    context.transform(\n      vpt[0] * pixelRatio,\n      vpt[1],\n      vpt[2],\n      vpt[3] * pixelRatio,\n      vpt[4],\n      vpt[5]\n    );\n    _renderObjects.call(this, this.context, objects);\n    context.restore();\n    Events.trigger('rendered', this.context);\n  }\n\n  clear () {\n    this.context.clearRect(0, 0, this.width, this.height);\n  }\n}\n\nfunction _createCanvas () {\n  let canvas = document.createElement('canvas');\n  canvas.getPixelRatio = _getPixelRatio.bind(null, canvas);\n  return canvas;\n}\n\n/**\n * Gets the pixel ratio of the canvas.\n */\nfunction _getPixelRatio (canvas) {\n  let context = canvas.getContext('2d'),\n    devicePixelRatio = window.devicePixelRatio || 1,\n    backingStorePixelRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio ||\n    context.msBackingStorePixelRatio ||\n    context.oBackingStorePixelRatio ||\n    context.backingStorePixelRatio || 1;\n\n  return devicePixelRatio / backingStorePixelRatio;\n}\n\n/**\n * Render several types of graphics in canvas\n */\nfunction _renderObjects (context, objects) {\n  objects = objects || [];\n\n  objects.forEach(object => {\n    const transform = object.transform;\n    const { scaleX = 1, skewX = 0, skewY = 0, scaleY = 1} = transform;\n    const { x: posX, y: posY } = transform.position;\n\n    context.save();\n    context.transform(scaleX, skewX, skewY, scaleY, posX, posY);\n\n    if (object.shape instanceof ShapesGroup) {\n      object.shape.shapes.forEach(shape => {\n        _renderShape.call(this, shape);\n      })\n    } else {\n      _renderShape.call(this, object.shape);\n    }\n\n    context.restore();\n  })\n}\n\nfunction _renderShape (shape) {\n  this.shapeRenderer.render(shape);\n}\n\nfunction _transformPoint (p, t, ignoreOffset) {\n  if (ignoreOffset) {\n    return new Point(\n      t[0] * p.x + t[2] * p.y,\n      t[1] * p.x + t[3] * p.y\n    );\n  }\n  return new Point(\n    t[0] * p.x + t[2] * p.y + t[4],\n    t[1] * p.x + t[3] * p.y + t[5]\n  );\n}\n\nfunction _invertTransform (t) {\n  let a = 1 / (t[0] * t[3] - t[1] * t[2]),\n    r = [a * t[3], -a * t[1], -a * t[2], a * t[0]],\n    o = _transformPoint({ x: t[4], y: t[5] }, r, true);\n  r[4] = -o.x;\n  r[5] = -o.y;\n  return r;\n}\n","import CanvasRenderer from './CanvasRenderer';\n\nlet Renderer = {};\n\nRenderer.create = (el, opts) => {\n  let renderer = new CanvasRenderer(opts);\n\n  el.append(renderer.canvas);\n\n  return renderer;\n}\n\nexport default Renderer;\n","import Camera from './Camera';\nimport Time from './Time';\nimport Mouse from './Mouse';\nimport Scene from './Scene';\nimport Events from './Events';\nimport { Renderer, CanvasRenderer } from '../renderer';\n\nlet _reqFrame, _cancelFrame, _frameTimeout;\nif (typeof window !== 'undefined') {\n  _reqFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function (callback) {\n    var self = this, start, finish;\n\n    _frameTimeout = window.setTimeout(function () {\n      start = +new Date();\n      callback(start);\n      finish = +new Date();\n      self.timeout = 1000 / 60 - (finish - start);\n    }, self.timeout);\n  };\n\n  _cancelFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame || function () {\n    window.clearTimeout(_frameTimeout);\n  };\n}\n\nlet Engine = {};\n\nEngine.create = (el, opts) => {\n  let game = {};\n  game.el = el;\n  game.status = 'stop';\n  game.PAUSE_TIMEOUT = 100;\n\n  Events.create(game);\n\n  game.renderer = Renderer.create(\n    el,\n    opts\n  );\n\n  game.view = game.renderer.canvas;\n\n  game.mouse = Mouse.create(game.view);\n\n  game.camera = Camera.create(game);\n\n  game.scene = Scene.create(game);\n\n  game.start = () => {\n    Time.timeScale = 1;\n    Engine.run(game);\n    game.status = 'playing';\n  }\n\n  game.restart = () => {\n    Engine.reset(game);\n    game.start();\n  }\n\n  game.pause = () => {\n    if (game.status === 'playing') {\n      Time.timeScale = 0;\n      game.status = 'paused';\n    }\n  }\n\n  game.resume = () => {\n    if (game.status === 'paused') {\n      Time.timeScale = 1;\n      game.status = 'playing';\n    }\n  }\n\n  game.stop = () => {\n    Engine.reset(game);\n    game.status = 'stop';\n  }\n\n  Engine.reset(game);\n\n  Events.on('addObject', (object) => {\n    game.renderer.render([object]);\n  })\n\n  return game;\n}\n\nEngine.reset = (game) => {\n  _cancelFrame(game.frameReq);\n  Time.reset();\n  game.frameReq = null;\n  game.scene.reset();\n  game.renderer.clear();\n  game.renderer.render(game.scene.objects);\n}\n\nEngine.run = (game) => {\n  if (game.frameReq) {\n    game.stop();\n  }\n\n  game.frameReq = _reqFrame((timeStamp) => tick.call(null, timeStamp));\n\n  function tick (timeStamp) {\n    Events.trigger('tick', timeStamp);\n    Time.update(timeStamp); // update Time\n    game.scene.update();\n    game.renderer.clear();\n    game.renderer.render(game.scene.objects);\n    game.frameReq = _reqFrame((timeStamp) => tick.call(null, timeStamp));\n  }\n}\n\nexport default Engine\n","let Input = {\n  keyCodeArray: []\n};\n\nInput.create = () => {\n  document.onkeydown = (event) => {\n    const { keyCode } = event;\n    let idx = Input.keyCodeArray.indexOf(keyCode);\n\n    if (idx === -1) {\n      Input.keyCodeArray.push(keyCode);\n    }\n  }\n\n  document.onkeyup = (event) => {\n    const { keyCode } = event;\n    let idx = Input.keyCodeArray.indexOf(keyCode);\n    if (idx > -1) {\n      Input.keyCodeArray.splice(idx, 1);\n    }\n  }\n}\n\nInput.getAxis = (direction) => {\n  if (direction === 'horizontal') {\n    if (Input.keyCodeArray.indexOf(37) > -1) {\n      return -1\n    }\n    if (Input.keyCodeArray.indexOf(39) > -1) {\n      return 1\n    }\n    return 0\n  }\n\n  if (direction === 'vertical') {\n    if (Input.keyCodeArray.indexOf(38) > -1) {\n      return -1\n    }\n    if (Input.keyCodeArray.indexOf(40) > -1) {\n      return 1\n    }\n    return 0\n  }\n}\n\nInput.create();\n\n// class Input {\n//   constructor () {\n//     this.keyCodeArray = [];\n\n//     document.onkeydown = (event) => {\n//       const { keyCode } = event;\n//       let idx = this.keyCodeArray.indexOf(keyCode);\n\n//       if (idx === -1) {\n//         this.keyCodeArray.push(keyCode);\n//       }\n//     }\n\n//     document.onkeyup = (event) => {\n//       const { keyCode } = event;\n//       let idx = this.keyCodeArray.indexOf(keyCode);\n//       if (idx > -1) {\n//         this.keyCodeArray.splice(idx, 1);\n//       }\n//     }\n//   }\n\n//   getAxis (direction) {\n    \n//   }\n// }\n\nexport default Input\n","export function insertAfter (el, targetEl) {\n  let parent = targetEl.parentNode;\n  if ( parent.lastChild === targetEl ){\n    parent.appendChild(el);\n  } else {\n    parent.insertBefore(el, targetEl.nextSibling);\n  }\n}\n","import Time from '../core/Time';\nimport Events from '../core/Events';\nimport CanvasRenderer from '../renderer/CanvasRenderer';\nimport { insertAfter } from '../utils/Dom';\n\nlet Performance = {};\n\nPerformance.create = function (game, opts) {\n  let performance = {};\n  let view = game.view.getBoundingClientRect();\n\n  opts = opts || {};\n  performance.el = document.createElement('div');\n  performance.el.className = 'performance-widget';\n  performance.el.style.position = 'absolute';\n  performance.el.style.top = view.top + 'px';\n  performance.el.style.left = view.left + 'px';\n  performance.el.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';\n  performance.el.style.padding = '4px 10px';\n\n  _addFPS(performance);\n  insertAfter(performance.el, game.view);\n\n  Events.on('tick', function () {\n    Performance.update(performance);\n  })\n\n  game.widget = game.widget || {};\n  game.widget['performance'] = Performance;\n}\n\nPerformance.update = function (performance) {\n  performance.fpsEl.innerText = Time.fps.toFixed(2);\n}\n\nfunction _addFPS (performance) {\n  performance.fpsEl = document.createElement('div');\n  performance.el.append(performance.fpsEl);\n  performance.fpsEl.style.color = 'white';\n}\n\nexport default Performance;\n","/*global ENV*/\nimport Engine from './core/Engine';\nimport Input from './core/Input';\nimport Time from './core/Time';\nimport Object from './core/Object';\nimport {\n  Path,\n  Polygon,\n  Polyline,\n  Circle,\n  Rectangle,\n  Text\n} from './shapes';\nimport Performance from './widget/Performance';\n\n// Enable LiveReload\nif (ENV !== 'production') {\n  document.write(\n    '<script src=\"http://' + (location.host || 'localhost').split(':')[0] +\n    ':35729/livereload.js?snipver=1\"></' + 'script>'\n  )\n}\n\nconst myGame = Engine.create(document.getElementById('stage'), {\n  width: 600,\n  height: 300\n});\nPerformance.create(myGame);\nconst startBtn = document.getElementById('start');\nconst stopBtn = document.getElementById('stop');\nconst pauseBtn = document.getElementById('pause');\nconst fastBtn = document.getElementById('fastward');\nconst recoverBtn = document.getElementById('recover');\n\nlet polygon = new Object({\n  shape: new Polygon([\n    [0, 0],\n    [60, 0],\n    [60, 20],\n    [30, 40],\n    [10, 40]\n  ], {\n    fill: '#009688'\n  }),\n  transform: {\n    position: {\n      x: 230,\n      y: 150\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n    // let { transform } = this;\n\n    // const horizontalInput = Input.getAxis('horizontal');\n    // const verticalInput = Input.getAxis('vertical');\n    // const speed = 100;\n\n    // transform.position.x += speed * Time.deltaTime * horizontalInput;\n    // transform.position.y += speed * Time.deltaTime * verticalInput;\n\n    // if (this.shape.collidesWith(rectangle.shape)) {\n    //   console.log('collide!!');\n    // }\n  }\n});\n\nlet circle = new Object({\n  shape: new Circle(20, {\n    fill: '#ffc107'\n  }),\n  transform: {\n    position: {\n      x: 100,\n      y: 50\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n    // let { transform } = this;\n\n    // const speed = 100;\n    // transform.position.x += speed * Time.deltaTime;\n  }\n});\n\nlet title = new Object({\n  shape: new Text('Engine Test'),\n  transform: {\n    position: {\n      x: 200,\n      y: 50\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n  }\n});\n\nlet polyline = new Object({\n  shape: new Polyline([\n    [0, 0],\n    [60, 0],\n    [60, 20],\n    [30, 40],\n    [10, 40]\n  ], {\n    style: 'dashed'\n  }),\n  transform: {\n    position: {\n      x: 320,\n      y: 150\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n  }\n});\n\nlet player = new Object({\n  shape: [\n    new Rectangle({\n      width: 120,\n      height: 40,\n      rx: 2,\n      ry: 2,\n      fill: 'white',\n      stroke: 'grey',\n      strokeWidth: 2\n    }),\n    new Text('\\n\\n', {\n      align: 'center',\n      lineHeight: 12,\n      lineWidth: 16,\n      fontSize: 10,\n      fontStyle: 'italic',\n      fontFamily: 'Avenir',\n      fontWeight: 'bold',\n      underline: true,\n      linethrough: true,\n      overline: true,\n      dropShadow: true,\n      dropShadowColor: 'rgba(0, 0, 0, 0.3)',\n      letterSpacing: 4,\n      fill: '#03a9f4',\n      wordWrap: true\n    }),\n    new Path('M 0 0 L 300 100 L 200 300 z', {\n      fill: 'red',\n      stroke: 'green'\n    })\n  ],\n  transform: {\n    position: {\n      x: 360,\n      y: 40\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n    let { transform } = this;\n\n    const horizontalInput = Input.getAxis('horizontal');\n    const verticalInput = Input.getAxis('vertical');\n    const speed = 100;\n\n    transform.position.x += speed * Time.deltaTime * horizontalInput;\n    transform.position.y += speed * Time.deltaTime * verticalInput;\n  }\n});\n\nmyGame.scene.addObject(polygon);\nmyGame.scene.addObject(polyline);\nmyGame.scene.addObject(circle);\nmyGame.scene.addObject(title);\nmyGame.scene.addObject(player);\n\nmyGame.start();\n\nstartBtn.addEventListener('click', () => {\n  myGame.restart();\n})\n\nstopBtn.addEventListener('click', () => {\n  myGame.stop();\n})\n\npauseBtn.addEventListener('click', () => {\n  if (myGame.status === 'paused') {\n    myGame.resume();\n  } else {\n    myGame.pause();\n  }\n})\n\nfastBtn.addEventListener('click', () => {\n  myGame.Time.timeScale = 1.5;\n})\n\nrecoverBtn.addEventListener('click', () => {\n  myGame.camera.recover();\n})\n\nconsole.log('myGame', myGame);\n"],"names":["Camera","create","game","camera","position","x","y","offset","scale","lookAt","isDragging","lastMousePosition","mouse","on","subPos","addPos","renderer","translate","mousedownPosition","wheelDelta","zoomToPoint","recover","clear","context","follow","posA","posB","STARTING_FPS","Time","timeScale","unscaledDeltaTime","deltaTime","reset","timeStart","timePassed","fps","update","timeStamp","Mouse","element","absolute","mouseupPosition","button","pixelRatio","parseInt","getAttribute","sourceEvents","mousemove","mouseout","mousedown","mouseup","mousewheel","eventHooks","eventName","callback","triggerHook","call","event","_getRelativeMousePosition","touches","changedTouches","preventDefault","Math","max","min","detail","setElement","addEventListener","setOffset","setScale","elementBounds","getBoundingClientRect","rootNode","document","documentElement","body","parentNode","scrollX","window","pageXOffset","undefined","scrollLeft","scrollY","pageYOffset","scrollTop","pageX","left","pageY","top","clientWidth","width","clientHeight","height","extend","obj","deep","argsStart","deepClone","i","arguments","length","source","prop","constructor","Object","clone","keys","key","push","isArray","prototype","toString","isFunction","Events","events","eventNames","names","split","name","off","object","join","callbacks","newCallbacks","j","trigger","eventClone","apply","Scene","scene","objects","addObject","forEach","status","updateCb","Line","opts","transform","close","style","fill","strokeWidth","stroke","dx","dy","Arc","type","SAT","detectCollide","shapeA","shapeB","separationOnAxes","axes","getAxes","concat","axis","projection1","project","projection2","overlaps","Shape","otherShape","Cirlce","radius","Curve","commandLengths","m","l","h","v","c","s","q","t","a","repeatedCommands","M","Path","path","match","parsePath","dimensions","calcDimensions","console","log","result","coords","currentPath","parsed","re","coordsStr","coordsParsed","len","slice","trim","exec","charAt","jlen","parseFloat","isNaN","command","commandLength","toLowerCase","repeatedCommand","k","klen","Projection","projection","Vector","sqrt","pow","vector","sub","negate","magnitude","p","perp","normalize","Vertice","getValue","keysArray","value","error","array","byProperty","find","value1","value2","condition","Polygon","points","vertices","map","point","posX","posY","v1","v2","pointNum","edge","normal","scalars","dot","minX","minY","maxX","maxY","Polyline","Rectangle","rx","ry","Sprite","TEXT_GRADIENT","LINEAR_VERTICAL","LINEAR_HORIZONTAL","hex2string","hex","substr","defaultStyle","align","breakWords","dropShadow","dropShadowAlpha","dropShadowAngle","PI","dropShadowBlur","dropShadowColor","dropShadowDistance","fillGradientType","fillGradientStops","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","letterSpacing","lineHeight","lineJoin","miterLimit","padding","strokeThickness","textBaseline","whiteSpace","wordWrap","wordWrapWidth","leading","genericFontFamilies","TextStyle","styleID","deepCopyProperties","clonedProperties","fontSizeString","fontFamilies","Array","test","indexOf","_align","_breakWords","_dropShadow","_dropShadowAlpha","_dropShadowAngle","_dropShadowBlur","_dropShadowColor","outputColor","getColor","_dropShadowDistance","_fill","_fillGradientType","_fillGradientStops","areArraysEqual","_fontFamily","_fontSize","_fontStyle","_fontVariant","_fontWeight","_letterSpacing","_lineHeight","_leading","_lineJoin","_miterLimit","_padding","_stroke","_strokeThickness","_textBaseline","_trim","_whiteSpace","_wordWrap","_wordWrapWidth","getSingleColor","color","replace","array1","array2","target","propertyObj","TextMetrics","text","lines","lineWidths","maxLineWidth","fontProperties","font","toFontString","measureFont","ascent","_context","outputText","lineWidth","measureText","_fonts","properties","canvas","_canvas","metricsString","METRICS_STRING","BASELINE_SYMBOL","ceil","baseline","BASELINE_MULTIPLIER","fillStyle","fillRect","fillText","imagedata","getImageData","data","pixels","line","idx","stop","descent","cache","collapseSpaces","collapseNewlines","canPrependSpaces","tokens","tokenize","token","isNewline","addLine","currIsBreakingSpace","isBreakingSpace","lastIsBreakingSpace","tokenWidth","getFromCache","canBreakWords","characters","char","nextChar","lastChar","canBreakChars","characterWidth","isLastToken","spacing","_breakingSpaces","charCodeAt","_newlines","newLine","trimRight","OffscreenCanvas","getContext","createElement","ex","Text","_style","_font","localStyleID","measured","dirty","ShapesGroup","shapes","shape","startCb","start","transform0","scaleX","skewX","skewY","scaleY","JSON","parse","stringify","CanvasShapeRenderer","canvasRenderer","_drawText","_execPathCommands","_pathPolygon","_pathPolyline","_pathRectangle","_pathCircle","_setStrokeStyles","_setFillStyles","_renderStroke","_renderFill","lineCap","strokeLineCap","lineDashOffset","strokeDashOffset","strokeLineJoin","strokeMiterLimit","strokeStyle","save","restore","beginPath","moveTo","lineTo","closePath","w","isRounded","bezierCurveTo","arc","current","previous","subpathStartX","subpathStartY","updateText","linePositionX","linePositionY","_generateFillStyle","shadowColor","shadowBlur","shadowOffsetX","cos","getZoom","shadowOffsetY","sin","_drawLetterSpacing","gradient","totalIterations","currentIteration","lengthPlus1","unshift","createLinearGradient","addColorStop","isStroke","strokeText","currentPosition","stringArray","from","previousWidth","currentWidth","currentChar","substring","iMatrix","CanvasRenderer","bgColor","_createCanvas","viewportTransform","_getPixelRatio","shapeRenderer","setAttribute","pixelRatios","backgroundColor","vpt","setViewportTransform","before","_transformPoint","_invertTransform","after","_renderObjects","clearRect","getPixelRatio","bind","devicePixelRatio","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","_renderShape","render","ignoreOffset","Point","r","o","Renderer","el","append","_reqFrame","_cancelFrame","_frameTimeout","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","self","finish","setTimeout","Date","timeout","cancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","Engine","PAUSE_TIMEOUT","view","run","restart","pause","resume","frameReq","tick","Input","keyCodeArray","onkeydown","keyCode","onkeyup","splice","getAxis","direction","insertAfter","targetEl","parent","lastChild","appendChild","insertBefore","nextSibling","Performance","performance","className","_addFPS","widget","fpsEl","innerText","toFixed","write","location","host","myGame","getElementById","startBtn","stopBtn","pauseBtn","fastBtn","recoverBtn","polygon","circle","Circle","title","polyline","player","underline","linethrough","overline","horizontalInput","verticalInput","speed"],"mappings":";;;;;AAAA,IAAIA,MAAM,GAAG,EAAb;;AAEAA,MAAM,CAACC,MAAP,GAAgB,UAAUC,IAAV,EAAgB;MAC1BC,MAAM,GAAG,EAAb;EACAA,MAAM,CAACC,QAAP,GAAkB;IAAEC,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;GAA7B;EACAH,MAAM,CAACI,MAAP,GAAgB;IAAEF,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;GAA3B;EACAH,MAAM,CAACK,KAAP,GAAe,CAAf;EACAL,MAAM,CAACM,MAAP,GAAgB,IAAhB;MAEIC,UAAU,GAAG,KAAjB;MACIC,iBAAiB,GAAG;IAAEN,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;GAAnC,CAR8B;;EAY9BJ,IAAI,CAACU,KAAL,CAAWC,EAAX,CAAc,WAAd,EAA2B,UAAAD,KAAK,EAAI;QAC9BF,UAAJ,EAAgB;MACdP,MAAM,CAACI,MAAP,GAAgBO,MAAM,CAACF,KAAK,CAACR,QAAP,EAAiBO,iBAAjB,CAAtB;MACAR,MAAM,CAACC,QAAP,GAAkBW,MAAM,CAACZ,MAAM,CAACC,QAAR,EAAkBD,MAAM,CAACI,MAAzB,CAAxB;MACAI,iBAAiB,CAACN,CAAlB,GAAsBO,KAAK,CAACR,QAAN,CAAeC,CAArC;MACAM,iBAAiB,CAACL,CAAlB,GAAsBM,KAAK,CAACR,QAAN,CAAeE,CAArC;MACAJ,IAAI,CAACc,QAAL,CAAcC,SAAd,CAAwBd,MAAM,CAACI,MAA/B;;GANJ;EAUAL,IAAI,CAACU,KAAL,CAAWC,EAAX,CAAc,UAAd,EAA0B,UAAAD,KAAK,EAAI;IACjCF,UAAU,GAAG,KAAb;GADF;EAIAR,IAAI,CAACU,KAAL,CAAWC,EAAX,CAAc,WAAd,EAA2B,UAAAD,KAAK,EAAI;IAClCF,UAAU,GAAG,IAAb;IACAC,iBAAiB,CAACN,CAAlB,GAAsBO,KAAK,CAACM,iBAAN,CAAwBb,CAA9C;IACAM,iBAAiB,CAACL,CAAlB,GAAsBM,KAAK,CAACM,iBAAN,CAAwBZ,CAA9C;GAHF;EAMAJ,IAAI,CAACU,KAAL,CAAWC,EAAX,CAAc,SAAd,EAAyB,UAAAD,KAAK,EAAI;IAChCT,MAAM,CAACI,MAAP,GAAgB;MAAEF,CAAC,EAAE,CAAL;MAAQC,CAAC,EAAE;KAA3B;IACAI,UAAU,GAAG,KAAb;GAFF;EAKAR,IAAI,CAACU,KAAL,CAAWC,EAAX,CAAc,YAAd,EAA4B,UAAAD,KAAK,EAAI;IACnCT,MAAM,CAACK,KAAP,IAAiB,IAAII,KAAK,CAACO,UAAN,GAAmB,IAAxC;IACAjB,IAAI,CAACc,QAAL,CAAcI,WAAd,CAA0BR,KAAK,CAACR,QAAhC,EAA0CD,MAAM,CAACK,KAAjD;GAFF;;EAKAL,MAAM,CAACkB,OAAP,GAAiB,YAAY;IAC3BnB,IAAI,CAACc,QAAL,CAAcM,KAAd,CAAoBnB,MAAM,CAACK,KAA3B;IACAN,IAAI,CAACc,QAAL,CAAcO,OAAd,CAAsBN,SAAtB,CAAgC,CAACd,MAAM,CAACC,QAAP,CAAgBC,CAAjD,EAAoD,CAACF,MAAM,CAACC,QAAP,CAAgBE,CAArE;IACAJ,IAAI,CAACc,QAAL,CAAcO,OAAd,CAAsBf,KAAtB,CAA4B,IAAIL,MAAM,CAACK,KAAvC,EAA8C,IAAIL,MAAM,CAACK,KAAzD;IACAL,MAAM,CAACK,KAAP,GAAe,CAAf;IACAL,MAAM,CAACI,MAAP,GAAgB;MAAEF,CAAC,EAAE,CAAL;MAAQC,CAAC,EAAE;KAA3B;IACAH,MAAM,CAACC,QAAP,GAAkB;MAAEC,CAAC,EAAE,CAAL;MAAQC,CAAC,EAAE;KAA7B;GANF;;SAQOH,MAAP;CAlDF;;AAqDAH,MAAM,CAACS,MAAP,GAAgB,YAAa,EAA7B;;AAGAT,MAAM,CAACwB,MAAP,GAAgB,YAAa,EAA7B;;AAGA,SAAST,MAAT,CAAiBU,IAAjB,EAAuBC,IAAvB,EAA6B;SACpB;IACLrB,CAAC,EAAEoB,IAAI,CAACpB,CAAL,GAASqB,IAAI,CAACrB,CADZ;IAELC,CAAC,EAAEmB,IAAI,CAACnB,CAAL,GAASoB,IAAI,CAACpB;GAFnB;;;AAMF,SAASQ,MAAT,CAAiBW,IAAjB,EAAuBC,IAAvB,EAA6B;SACpB;IACLrB,CAAC,EAAEoB,IAAI,CAACpB,CAAL,GAASqB,IAAI,CAACrB,CADZ;IAELC,CAAC,EAAEmB,IAAI,CAACnB,CAAL,GAASoB,IAAI,CAACpB;GAFnB;;;ACrEF,IAAMqB,YAAY,GAAG,EAArB;AAEA,IAAIC,IAAI,GAAG;EACTC,SAAS,EAAE,CADF;EAETC,iBAAiB,EAAE,CAFV;EAGTC,SAAS,EAAE;CAHb;;AAMAH,IAAI,CAACI,KAAL,GAAa,YAAM;EACjBJ,IAAI,CAACK,SAAL,GAAiB,CAAjB;EACAL,IAAI,CAACM,UAAL,GAAkB,CAAlB;EACAN,IAAI,CAACO,GAAL,GAAWR,YAAX;CAHF;;AAMAC,IAAI,CAACQ,MAAL,GAAc,UAACC,SAAD,EAAe;MACvBT,IAAI,CAACK,SAAL,KAAmB,CAAvB,EAA0B;IACxBL,IAAI,CAACK,SAAL,GAAiBI,SAAjB;IACAT,IAAI,CAACO,GAAL,GAAWR,YAAX;GAFF,MAGO;IACLC,IAAI,CAACO,GAAL,GAAW,QAAQE,SAAS,GAAGT,IAAI,CAACK,SAAzB,CAAX;;;EAGFL,IAAI,CAACE,iBAAL,GAAyB,IAAIF,IAAI,CAACO,GAAlC;EACAP,IAAI,CAACG,SAAL,GAAiBH,IAAI,CAACE,iBAAL,GAAyBF,IAAI,CAACC,SAA/C;EAEAD,IAAI,CAACM,UAAL,IAAmBN,IAAI,CAACE,iBAAxB;EACAF,IAAI,CAACK,SAAL,GAAiBI,SAAjB;CAZF;;AAeAT,IAAI,CAACI,KAAL;;AC7BA,IAAIM,KAAK,GAAG,EAAZ;;AAEAA,KAAK,CAACrC,MAAN,GAAe,UAACsC,OAAD,EAAa;MACtB3B,KAAK,GAAG,EAAZ;EAEAA,KAAK,CAAC2B,OAAN,GAAgBA,OAAhB;EACA3B,KAAK,CAAC4B,QAAN,GAAiB;IAAEnC,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;GAA5B;EACAM,KAAK,CAACR,QAAN,GAAiB;IAAEC,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;GAA5B;EACAM,KAAK,CAACM,iBAAN,GAA0B;IAAEb,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;GAArC;EACAM,KAAK,CAAC6B,eAAN,GAAwB;IAAEpC,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;GAAnC;EACAM,KAAK,CAACL,MAAN,GAAe;IAAEF,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;GAA1B;EACAM,KAAK,CAACJ,KAAN,GAAc;IAAEH,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;GAAzB;EACAM,KAAK,CAACO,UAAN,GAAmB,CAAnB;EACAP,KAAK,CAAC8B,MAAN,GAAe,CAAC,CAAhB;EACA9B,KAAK,CAAC+B,UAAN,GAAmBC,QAAQ,CAAChC,KAAK,CAAC2B,OAAN,CAAcM,YAAd,CAA2B,kBAA3B,CAAD,EAAiD,EAAjD,CAAR,IAAgE,CAAnF;EAEAjC,KAAK,CAACkC,YAAN,GAAqB;IACnBC,SAAS,EAAE,IADQ;IAEnBC,QAAQ,EAAE,IAFS;IAGnBC,SAAS,EAAE,IAHQ;IAInBC,OAAO,EAAE,IAJU;IAKnBC,UAAU,EAAE;GALd;EAQAvC,KAAK,CAACwC,UAAN,GAAmB;IACjBL,SAAS,EAAE,IADM;IAEjBC,QAAQ,EAAE,IAFO;IAGjBC,SAAS,EAAE,IAHM;IAIjBC,OAAO,EAAE,IAJQ;IAKjBC,UAAU,EAAE;GALd;;EAQAvC,KAAK,CAACC,EAAN,GAAW,UAAUwC,SAAV,EAAqBC,QAArB,EAA+B;IACxC1C,KAAK,CAACwC,UAAN,CAAiBC,SAAjB,IAA8BC,QAA9B;GADF;;EAIA1C,KAAK,CAAC2C,WAAN,GAAoB,UAAUF,SAAV,EAAqB;IACvCzC,KAAK,CAACwC,UAAN,CAAiBC,SAAjB,EAA4BG,IAA5B,CAAiC,IAAjC,EAAuC5C,KAAvC;GADF;;EAIAA,KAAK,CAACmC,SAAN,GAAkB,UAAUU,KAAV,EAAiB;QAC7BrD,QAAQ,GAAGkC,KAAK,CAACoB,yBAAN,CAAgCD,KAAhC,EAAuC7C,KAAK,CAAC2B,OAA7C,EAAsD3B,KAAK,CAAC+B,UAA5D,CAAf;QACEgB,OAAO,GAAGF,KAAK,CAACG,cADlB;;QAGID,OAAJ,EAAa;MACX/C,KAAK,CAAC8B,MAAN,GAAe,CAAf;MACAe,KAAK,CAACI,cAAN;;;IAGFjD,KAAK,CAAC4B,QAAN,CAAenC,CAAf,GAAmBD,QAAQ,CAACC,CAA5B;IACAO,KAAK,CAAC4B,QAAN,CAAelC,CAAf,GAAmBF,QAAQ,CAACE,CAA5B;IACAM,KAAK,CAACR,QAAN,CAAeC,CAAf,GAAmBO,KAAK,CAAC4B,QAAN,CAAenC,CAAf,GAAmBO,KAAK,CAACJ,KAAN,CAAYH,CAA/B,GAAmCO,KAAK,CAACL,MAAN,CAAaF,CAAnE;IACAO,KAAK,CAACR,QAAN,CAAeE,CAAf,GAAmBM,KAAK,CAAC4B,QAAN,CAAelC,CAAf,GAAmBM,KAAK,CAACJ,KAAN,CAAYF,CAA/B,GAAmCM,KAAK,CAACL,MAAN,CAAaD,CAAnE;IACAM,KAAK,CAACkC,YAAN,CAAmBC,SAAnB,GAA+BU,KAA/B;IAEA7C,KAAK,CAAC2C,WAAN,CAAkB,WAAlB;GAfF;;EAkBA3C,KAAK,CAACoC,QAAN,GAAiB,YAAY;IAC3BpC,KAAK,CAAC2C,WAAN,CAAkB,UAAlB;GADF;;EAIA3C,KAAK,CAACqC,SAAN,GAAkB,UAASQ,KAAT,EAAgB;QAC5BrD,QAAQ,GAAGkC,KAAK,CAACoB,yBAAN,CAAgCD,KAAhC,EAAuC7C,KAAK,CAAC2B,OAA7C,EAAsD3B,KAAK,CAAC+B,UAA5D,CAAf;QACEgB,OAAO,GAAGF,KAAK,CAACG,cADlB;;QAGID,OAAJ,EAAa;MACX/C,KAAK,CAAC8B,MAAN,GAAe,CAAf;MACAe,KAAK,CAACI,cAAN;KAFF,MAGO;MACLjD,KAAK,CAAC8B,MAAN,GAAee,KAAK,CAACf,MAArB;;;IAGF9B,KAAK,CAAC4B,QAAN,CAAenC,CAAf,GAAmBD,QAAQ,CAACC,CAA5B;IACAO,KAAK,CAAC4B,QAAN,CAAelC,CAAf,GAAmBF,QAAQ,CAACE,CAA5B;IACAM,KAAK,CAACR,QAAN,CAAeC,CAAf,GAAmBO,KAAK,CAAC4B,QAAN,CAAenC,CAAf,GAAmBO,KAAK,CAACJ,KAAN,CAAYH,CAA/B,GAAmCO,KAAK,CAACL,MAAN,CAAaF,CAAnE;IACAO,KAAK,CAACR,QAAN,CAAeE,CAAf,GAAmBM,KAAK,CAAC4B,QAAN,CAAelC,CAAf,GAAmBM,KAAK,CAACJ,KAAN,CAAYF,CAA/B,GAAmCM,KAAK,CAACL,MAAN,CAAaD,CAAnE;IACAM,KAAK,CAACM,iBAAN,CAAwBb,CAAxB,GAA4BO,KAAK,CAACR,QAAN,CAAeC,CAA3C;IACAO,KAAK,CAACM,iBAAN,CAAwBZ,CAAxB,GAA4BM,KAAK,CAACR,QAAN,CAAeE,CAA3C;IACAM,KAAK,CAACkC,YAAN,CAAmBG,SAAnB,GAA+BQ,KAA/B;IAEA7C,KAAK,CAAC2C,WAAN,CAAkB,WAAlB;GAnBF;;EAsBA3C,KAAK,CAACsC,OAAN,GAAgB,UAASO,KAAT,EAAgB;QAC1BrD,QAAQ,GAAGkC,KAAK,CAACoB,yBAAN,CAAgCD,KAAhC,EAAuC7C,KAAK,CAAC2B,OAA7C,EAAsD3B,KAAK,CAAC+B,UAA5D,CAAf;QACEgB,OAAO,GAAGF,KAAK,CAACG,cADlB;;QAGID,OAAJ,EAAa;MACXF,KAAK,CAACI,cAAN;;;IAGFjD,KAAK,CAAC8B,MAAN,GAAe,CAAC,CAAhB;IACA9B,KAAK,CAAC4B,QAAN,CAAenC,CAAf,GAAmBD,QAAQ,CAACC,CAA5B;IACAO,KAAK,CAAC4B,QAAN,CAAelC,CAAf,GAAmBF,QAAQ,CAACE,CAA5B;IACAM,KAAK,CAACR,QAAN,CAAeC,CAAf,GAAmBO,KAAK,CAAC4B,QAAN,CAAenC,CAAf,GAAmBO,KAAK,CAACJ,KAAN,CAAYH,CAA/B,GAAmCO,KAAK,CAACL,MAAN,CAAaF,CAAnE;IACAO,KAAK,CAACR,QAAN,CAAeE,CAAf,GAAmBM,KAAK,CAAC4B,QAAN,CAAelC,CAAf,GAAmBM,KAAK,CAACJ,KAAN,CAAYF,CAA/B,GAAmCM,KAAK,CAACL,MAAN,CAAaD,CAAnE;IACAM,KAAK,CAAC6B,eAAN,CAAsBpC,CAAtB,GAA0BO,KAAK,CAACR,QAAN,CAAeC,CAAzC;IACAO,KAAK,CAAC6B,eAAN,CAAsBnC,CAAtB,GAA0BM,KAAK,CAACR,QAAN,CAAeE,CAAzC;IACAM,KAAK,CAACkC,YAAN,CAAmBI,OAAnB,GAA6BO,KAA7B;IAEA7C,KAAK,CAAC2C,WAAN,CAAkB,SAAlB;GAjBF;;EAoBA3C,KAAK,CAACuC,UAAN,GAAmB,UAASM,KAAT,EAAgB;IACjC7C,KAAK,CAACO,UAAN,GAAmB2C,IAAI,CAACC,GAAL,CAAS,CAAC,CAAV,EAAaD,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYP,KAAK,CAACtC,UAAN,IAAoB,CAACsC,KAAK,CAACQ,MAAvC,CAAb,CAAnB;IACAR,KAAK,CAACI,cAAN;IAEAjD,KAAK,CAAC2C,WAAN,CAAkB,YAAlB;GAJF;;EAOAjB,KAAK,CAAC4B,UAAN,CAAiBtD,KAAjB,EAAwB2B,OAAxB;SAEO3B,KAAP;CA/GF;;AAkHA0B,KAAK,CAAC4B,UAAN,GAAmB,UAACtD,KAAD,EAAQ2B,OAAR,EAAoB;EACrCA,OAAO,CAAC4B,gBAAR,CAAyB,WAAzB,EAAsCvD,KAAK,CAACmC,SAA5C;EACAR,OAAO,CAAC4B,gBAAR,CAAyB,UAAzB,EAAqCvD,KAAK,CAACoC,QAA3C;EACAT,OAAO,CAAC4B,gBAAR,CAAyB,WAAzB,EAAsCvD,KAAK,CAACqC,SAA5C;EACAV,OAAO,CAAC4B,gBAAR,CAAyB,SAAzB,EAAoCvD,KAAK,CAACsC,OAA1C;EAEAX,OAAO,CAAC4B,gBAAR,CAAyB,YAAzB,EAAuCvD,KAAK,CAACuC,UAA7C;EACAZ,OAAO,CAAC4B,gBAAR,CAAyB,gBAAzB,EAA2CvD,KAAK,CAACuC,UAAjD;EAEAZ,OAAO,CAAC4B,gBAAR,CAAyB,WAAzB,EAAsCvD,KAAK,CAACmC,SAA5C;EACAR,OAAO,CAAC4B,gBAAR,CAAyB,YAAzB,EAAuCvD,KAAK,CAACqC,SAA7C;EACAV,OAAO,CAAC4B,gBAAR,CAAyB,UAAzB,EAAqCvD,KAAK,CAACsC,OAA3C;CAXF;;;;;;;;;AAoBAZ,KAAK,CAAC8B,SAAN,GAAkB,UAASxD,KAAT,EAAgBL,MAAhB,EAAwB;EACxCK,KAAK,CAACL,MAAN,CAAaF,CAAb,GAAiBE,MAAM,CAACF,CAAxB;EACAO,KAAK,CAACL,MAAN,CAAaD,CAAb,GAAiBC,MAAM,CAACD,CAAxB;EACAM,KAAK,CAACR,QAAN,CAAeC,CAAf,GAAmBO,KAAK,CAAC4B,QAAN,CAAenC,CAAf,GAAmBO,KAAK,CAACJ,KAAN,CAAYH,CAA/B,GAAmCO,KAAK,CAACL,MAAN,CAAaF,CAAnE;EACAO,KAAK,CAACR,QAAN,CAAeE,CAAf,GAAmBM,KAAK,CAAC4B,QAAN,CAAelC,CAAf,GAAmBM,KAAK,CAACJ,KAAN,CAAYF,CAA/B,GAAmCM,KAAK,CAACL,MAAN,CAAaD,CAAnE;CAJF;;;;;;;;;AAaAgC,KAAK,CAAC+B,QAAN,GAAiB,UAASzD,KAAT,EAAgBJ,KAAhB,EAAuB;EACtCI,KAAK,CAACJ,KAAN,CAAYH,CAAZ,GAAgBG,KAAK,CAACH,CAAtB;EACAO,KAAK,CAACJ,KAAN,CAAYF,CAAZ,GAAgBE,KAAK,CAACF,CAAtB;EACAM,KAAK,CAACR,QAAN,CAAeC,CAAf,GAAmBO,KAAK,CAAC4B,QAAN,CAAenC,CAAf,GAAmBO,KAAK,CAACJ,KAAN,CAAYH,CAA/B,GAAmCO,KAAK,CAACL,MAAN,CAAaF,CAAnE;EACAO,KAAK,CAACR,QAAN,CAAeE,CAAf,GAAmBM,KAAK,CAAC4B,QAAN,CAAelC,CAAf,GAAmBM,KAAK,CAACJ,KAAN,CAAYF,CAA/B,GAAmCM,KAAK,CAACL,MAAN,CAAaD,CAAnE;CAJF;;;;;;;;;;;;AAgBAgC,KAAK,CAACoB,yBAAN,GAAkC,UAASD,KAAT,EAAgBlB,OAAhB,EAAyBI,UAAzB,EAAqC;MACjE2B,aAAa,GAAG/B,OAAO,CAACgC,qBAAR,EAApB;MACEC,QAAQ,GAAIC,QAAQ,CAACC,eAAT,IAA4BD,QAAQ,CAACE,IAAT,CAAcC,UAA1C,IAAwDH,QAAQ,CAACE,IAD/E;MAEEE,OAAO,GAAIC,MAAM,CAACC,WAAP,KAAuBC,SAAxB,GAAqCF,MAAM,CAACC,WAA5C,GAA0DP,QAAQ,CAACS,UAF/E;MAGEC,OAAO,GAAIJ,MAAM,CAACK,WAAP,KAAuBH,SAAxB,GAAqCF,MAAM,CAACK,WAA5C,GAA0DX,QAAQ,CAACY,SAH/E;MAIEzB,OAAO,GAAGF,KAAK,CAACG,cAJlB;MAKEvD,CALF;MAKKC,CALL;;MAOIqD,OAAJ,EAAa;IACXtD,CAAC,GAAGsD,OAAO,CAAC,CAAD,CAAP,CAAW0B,KAAX,GAAmBf,aAAa,CAACgB,IAAjC,GAAwCT,OAA5C;IACAvE,CAAC,GAAGqD,OAAO,CAAC,CAAD,CAAP,CAAW4B,KAAX,GAAmBjB,aAAa,CAACkB,GAAjC,GAAuCN,OAA3C;GAFF,MAGO;IACL7E,CAAC,GAAGoD,KAAK,CAAC4B,KAAN,GAAcf,aAAa,CAACgB,IAA5B,GAAmCT,OAAvC;IACAvE,CAAC,GAAGmD,KAAK,CAAC8B,KAAN,GAAcjB,aAAa,CAACkB,GAA5B,GAAkCN,OAAtC;;;SAGK;IACL7E,CAAC,EAAEA,CAAC,IAAIkC,OAAO,CAACkD,WAAR,IAAuBlD,OAAO,CAACmD,KAAR,IAAiBnD,OAAO,CAACkD,WAAhD,IAA+D9C,UAAnE,CADC;IAELrC,CAAC,EAAEA,CAAC,IAAIiC,OAAO,CAACoD,YAAR,IAAwBpD,OAAO,CAACqD,MAAR,IAAkBrD,OAAO,CAACoD,YAAlD,IAAkEhD,UAAtE;GAFN;CAhBF;;ACrKO,SAASkD,MAAT,CAAiBC,GAAjB,EAAsBC,IAAtB,EAA4B;MAC7BC,SAAJ,EACEC,SADF;;MAGI,OAAOF,IAAP,KAAgB,SAApB,EAA+B;IAC7BC,SAAS,GAAG,CAAZ;IACAC,SAAS,GAAGF,IAAZ;GAFF,MAGO;IACLC,SAAS,GAAG,CAAZ;IACAC,SAAS,GAAG,IAAZ;;;OAGG,IAAIC,CAAC,GAAGF,SAAb,EAAwBE,CAAC,GAAGC,SAAS,CAACC,MAAtC,EAA8CF,CAAC,EAA/C,EAAmD;QAC7CG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;QAEIG,MAAJ,EAAY;WACL,IAAIC,IAAT,IAAiBD,MAAjB,EAAyB;YACnBJ,SAAS,IAAII,MAAM,CAACC,IAAD,CAAnB,IAA6BD,MAAM,CAACC,IAAD,CAAN,CAAaC,WAAb,KAA6BC,MAA9D,EAAsE;cAChE,CAACV,GAAG,CAACQ,IAAD,CAAJ,IAAcR,GAAG,CAACQ,IAAD,CAAH,CAAUC,WAAV,KAA0BC,MAA5C,EAAoD;YAClDV,GAAG,CAACQ,IAAD,CAAH,GAAYR,GAAG,CAACQ,IAAD,CAAH,IAAa,EAAzB;YACAT,MAAM,CAACC,GAAG,CAACQ,IAAD,CAAJ,EAAYL,SAAZ,EAAuBI,MAAM,CAACC,IAAD,CAA7B,CAAN;WAFF,MAGO;YACLR,GAAG,CAACQ,IAAD,CAAH,GAAYD,MAAM,CAACC,IAAD,CAAlB;;SALJ,MAOO;UACLR,GAAG,CAACQ,IAAD,CAAH,GAAYD,MAAM,CAACC,IAAD,CAAlB;;;;;;SAMDR,GAAP;;AAGF,AAAO,SAASW,KAAT,CAAgBX,GAAhB,EAAqBC,IAArB,EAA2B;SACzBF,MAAM,CAAC,EAAD,EAAKE,IAAL,EAAWD,GAAX,CAAb;;AAGF,AAAO,SAASY,IAAT,CAAeZ,GAAf,EAAoB;MACrBU,MAAM,CAACE,IAAX,EACE,OAAOF,MAAM,CAACE,IAAP,CAAYZ,GAAZ,CAAP,CAFuB;;MAKrBY,IAAI,GAAG,EAAX;;OACK,IAAIC,GAAT,IAAgBb,GAAhB;IACEY,IAAI,CAACE,IAAL,CAAUD,GAAV;;;SACKD,IAAP;;AAGF,AAAO,SAASG,OAAT,CAAkBf,GAAlB,EAAuB;SACrBU,MAAM,CAACM,SAAP,CAAiBC,QAAjB,CAA0BvD,IAA1B,CAA+BsC,GAA/B,MAAwC,gBAA/C;;AAGF,AAAO,SAASkB,UAAT,CAAqBlB,GAArB,EAA0B;SACxB,OAAOA,GAAP,KAAe,UAAtB;;;ACpDF,IAAImB,MAAM,GAAG,EAAb;;AAEAA,MAAM,CAAChH,MAAP,GAAgB,UAAUC,IAAV,EAAgB;OACzBA,IAAL,GAAYA,IAAZ;EACAA,IAAI,CAACgH,MAAL,GAAc,EAAd;CAFF;;AAKAD,MAAM,CAACpG,EAAP,GAAY,UAAUsG,UAAV,EAAsB7D,QAAtB,EAAgC;MACtC8D,KAAK,GAAGD,UAAU,CAACE,KAAX,CAAiB,GAAjB,CAAZ;MACEC,IADF;;OAGK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,KAAK,CAAChB,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;IACrCoB,IAAI,GAAGF,KAAK,CAAClB,CAAD,CAAZ;SACKhG,IAAL,CAAUgH,MAAV,CAAiBI,IAAjB,IAAyB,KAAKpH,IAAL,CAAUgH,MAAV,CAAiBI,IAAjB,KAA0B,EAAnD;SACKpH,IAAL,CAAUgH,MAAV,CAAiBI,IAAjB,EAAuBV,IAAvB,CAA4BtD,QAA5B;;;SAGKA,QAAP;CAVF;;AAaA2D,MAAM,CAACM,GAAP,GAAa,UAASJ,UAAT,EAAqB7D,QAArB,EAA+B;MACtC,CAAC6D,UAAL,EAAiB;IACfK,MAAM,CAACN,MAAP,GAAgB,EAAhB;;GAFwC;;;MAOtC,OAAOC,UAAP,KAAsB,UAA1B,EAAsC;IACpC7D,QAAQ,GAAG6D,UAAX;IACAA,UAAU,GAAGT,IAAI,CAAC,KAAKxG,IAAL,CAAUgH,MAAX,CAAJ,CAAuBO,IAAvB,CAA4B,GAA5B,CAAb;;;MAGEL,KAAK,GAAGD,UAAU,CAACE,KAAX,CAAiB,GAAjB,CAAZ;;OAEK,IAAInB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,KAAK,CAAChB,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;QACjCwB,SAAS,GAAG,KAAKxH,IAAL,CAAUgH,MAAV,CAAiBE,KAAK,CAAClB,CAAD,CAAtB,CAAhB;QACEyB,YAAY,GAAG,EADjB;;QAGIrE,QAAQ,IAAIoE,SAAhB,EAA2B;WACpB,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAAS,CAACtB,MAA9B,EAAsCwB,CAAC,EAAvC,EAA2C;YACrCF,SAAS,CAACE,CAAD,CAAT,KAAiBtE,QAArB,EACEqE,YAAY,CAACf,IAAb,CAAkBc,SAAS,CAACE,CAAD,CAA3B;;;;SAID1H,IAAL,CAAUgH,MAAV,CAAiBE,KAAK,CAAClB,CAAD,CAAtB,IAA6ByB,YAA7B;;CAzBJ;;AA6BAV,MAAM,CAACY,OAAP,GAAiB,UAASV,UAAT,EAAqB1D,KAArB,EAA4B;MACvC2D,KAAJ,EACEE,IADF,EAEEI,SAFF,EAGEI,UAHF;MAKIZ,MAAM,GAAG,KAAKhH,IAAL,CAAUgH,MAAvB;;MAEIA,MAAM,IAAIR,IAAI,CAACQ,MAAD,CAAJ,CAAad,MAAb,GAAsB,CAApC,EAAuC;QACjC,CAAC3C,KAAL,EACEA,KAAK,GAAG,EAAR;IAEF2D,KAAK,GAAGD,UAAU,CAACE,KAAX,CAAiB,GAAjB,CAAR;;SAEK,IAAInB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,KAAK,CAAChB,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;MACrCoB,IAAI,GAAGF,KAAK,CAAClB,CAAD,CAAZ;MACAwB,SAAS,GAAGR,MAAM,CAACI,IAAD,CAAlB;;UAEII,SAAJ,EAAe;QACbI,UAAU,GAAGrB,KAAK,CAAChD,KAAD,EAAQ,KAAR,CAAlB;QACAqE,UAAU,CAACR,IAAX,GAAkBA,IAAlB;QACAQ,UAAU,CAACzB,MAAX,GAAoB,KAAKnG,IAAzB;;aAEK,IAAI0H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,SAAS,CAACtB,MAA9B,EAAsCwB,CAAC,EAAvC,EAA2C;UACzCF,SAAS,CAACE,CAAD,CAAT,CAAaG,KAAb,CAAmB,KAAK7H,IAAxB,EAA8B,CAAC4H,UAAD,CAA9B;;;;;CAxBV;;ACjDA,IAAIE,KAAK,GAAG,EAAZ;;AAEAA,KAAK,CAAC/H,MAAN,GAAe,UAACC,IAAD,EAAU;MACnB+H,KAAK,GAAG,EAAZ;EAEAA,KAAK,CAACC,OAAN,GAAgB,EAAhB;;EAEAD,KAAK,CAACE,SAAN,GAAkB,UAACX,MAAD,EAAY;IAC5BS,KAAK,CAACC,OAAN,CAActB,IAAd,CAAmBY,MAAnB;IAEAP,MAAM,CAACY,OAAP,CAAe,WAAf,EAA4BL,MAA5B;GAHF;;EAMAS,KAAK,CAACjG,KAAN,GAAc,YAAM;IAClBiG,KAAK,CAACC,OAAN,CAAcE,OAAd,CAAsB,UAACZ,MAAD,EAAY;MAChCA,MAAM,CAACxF,KAAP;KADF;GADF;;EAMAiG,KAAK,CAAC7F,MAAN,GAAe,YAAM;IACnB6F,KAAK,CAACC,OAAN,CAAcE,OAAd,CAAsB,UAACZ,MAAD,EAAY;UAC5BtH,IAAI,CAACmI,MAAL,KAAgB,SAApB,EAA+B;QAC7Bb,MAAM,CAACc,QAAP,CAAgB9E,IAAhB,CAAqBgE,MAArB;;KAFJ;GADF;;SAQOS,KAAP;CAzBF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICJMM;;;gBACSC,IAAb,EAAmB;;;IACjBA,IAAI,GAAGA,IAAI,IAAI,EAAf;SACKC,SAAL,GAAiB;MACfrI,QAAQ,EAAE;KADZ;SAGKsI,KAAL,GAAa,CAAC,CAACF,IAAI,CAACE,KAApB;SACKC,KAAL,GAAa,KAAKA,KAAL,IAAc,OAA3B;SACKC,IAAL,GAAYJ,IAAI,CAACI,IAAL,IAAa,SAAzB;SACKC,WAAL,GAAmBL,IAAI,CAACK,WAAL,IAAoB,CAAvC;SACKC,MAAL,GAAcN,IAAI,CAACM,MAAL,IAAe,MAA7B;;;;;yBAGIC,IAAIC,IAAI;;;;;;ICXVC;;;;;eACST,IAAb,EAAmB;;;;;6EACXA,IAAN;UACKU,IAAL,GAAY,KAAZ;;;;;;yBAGIH,IAAIC,IAAI;;;;EANET;;ACFlB,IAAIY,GAAG,GAAG,EAAV;;AAEAA,GAAG,CAACC,aAAJ,GAAoB,UAACC,MAAD,EAASC,MAAT,EAAoB;SAC/B,CAACH,GAAG,CAACI,gBAAJ,CAAqBF,MAArB,EAA6BC,MAA7B,CAAR;CADF;;AAIAH,GAAG,CAACI,gBAAJ,GAAuB,UAACF,MAAD,EAASC,MAAT,EAAoB;MACrCE,IAAI,GAAGH,MAAM,CAACI,OAAP,GAAiBC,MAAjB,CAAwBJ,MAAM,CAACG,OAAP,EAAxB,CAAX;;OAEK,IAAIvD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsD,IAAI,CAACpD,MAAzB,EAAiCF,CAAC,EAAlC,EAAsC;QAChCyD,IAAI,GAAGH,IAAI,CAACtD,CAAD,CAAf;QACI0D,WAAW,GAAGP,MAAM,CAACQ,OAAP,CAAeF,IAAf,CAAlB;QACIG,WAAW,GAAGR,MAAM,CAACO,OAAP,CAAeF,IAAf,CAAlB;;QACI,CAACC,WAAW,CAACG,QAAZ,CAAqBD,WAArB,CAAL,EAAwC;aAC/B,IAAP;;;;SAGG,KAAP;CAXF;;ICJME;;;iBACSxB,IAAb,EAAmB;;;IACjBA,IAAI,GAAGA,IAAI,IAAI,EAAf;SACKC,SAAL,GAAiB;MACfrI,QAAQ,EAAE;KADZ;SAGKwI,IAAL,GAAYJ,IAAI,CAACI,IAAL,IAAa,SAAzB;SACKE,MAAL,GAAcN,IAAI,CAACM,MAAL,IAAe,MAA7B;SACKD,WAAL,GAAmBL,IAAI,CAACK,WAAL,IAAoB,CAAvC;;;;;iCAGYoB,YAAY;aACjBd,GAAG,CAACC,aAAJ,CAAkB,IAAlB,EAAwBa,UAAxB,CAAP;;;;8BAGS;YACH,2BAAN;;;;8BAGS;YACH,+BAAN;;;;2BAGM;YACA,+BAAN;;;;;;;ICxBEC;;;;;kBACSC,MAAb,EAAqB3B,IAArB,EAA2B;;;;;gFACnBA,IAAN;UACKU,IAAL,GAAY,QAAZ;UACKiB,MAAL,GAAcA,MAAd;;;;;;8BAGS;;;4BAGFR,MAAM;;;6BAGLtJ,GAAGC,GAAG;;;yBAGVyI,IAAIC,IAAI;;;;EAhBKgB;;ICAfI;;;;;iBACS5B,IAAb,EAAmB;;;;;+EACXA,IAAN;UACKU,IAAL,GAAY,OAAZ;;;;;;yBAGIH,IAAIC,IAAI;;;;EANIT;;ACApB,IAAM8B,cAAc,GAAG;EACrBC,CAAC,EAAE,CADkB;EAErBC,CAAC,EAAE,CAFkB;EAGrBC,CAAC,EAAE,CAHkB;EAIrBC,CAAC,EAAE,CAJkB;EAKrBC,CAAC,EAAE,CALkB;EAMrBC,CAAC,EAAE,CANkB;EAOrBC,CAAC,EAAE,CAPkB;EAQrBC,CAAC,EAAE,CARkB;EASrBC,CAAC,EAAE;CATL;IAWAC,gBAAgB,GAAG;EACjBT,CAAC,EAAE,GADc;EAEjBU,CAAC,EAAE;CAbL;;IAgBMC;;;;;gBACSC,IAAb,EAAmB1C,IAAnB,EAAyB;;;;;8EACjBA,IAAN;UACKU,IAAL,GAAY,MAAZ;UACKgC,IAAL,GAAYA,IAAI,CAACC,KAAL,CAAW,8BAAX,CAAZ;UACKD,IAAL,GAAYD,IAAI,CAACG,SAAL,CAAe,MAAKF,IAApB,CAAZ;UACKxF,KAAL,GAAa,CAAb;UACKE,MAAL,GAAc,CAAd;UACKyF,UAAL,GAAkB,MAAKC,cAAL,EAAlB;IACAC,OAAO,CAACC,GAAR,CAAY,UAAZ;;;;;;qCAiDgB;aACT;QACLlG,IAAI,EAAE,CADD;QAELE,GAAG,EAAE,CAFA;QAGLE,KAAK,EAAE,KAAKA,KAHP;QAILE,MAAM,EAAE,KAAKA;OAJf;;;;8BA/CgBsF,MAAM;UAClBO,MAAM,GAAG,EAAb;UACEC,MAAM,GAAG,EADX;UAEEC,WAFF;UAGEC,MAHF;UAIEC,EAAE,GAAG,qDAJP;UAKEV,KALF;UAMEW,SANF;;WAQK,IAAI5F,CAAC,GAAG,CAAR,EAAW6F,YAAX,EAAyBC,GAAG,GAAGd,IAAI,CAAC9E,MAAzC,EAAiDF,CAAC,GAAG8F,GAArD,EAA0D9F,CAAC,EAA3D,EAA+D;QAC7DyF,WAAW,GAAGT,IAAI,CAAChF,CAAD,CAAlB;QAEA4F,SAAS,GAAGH,WAAW,CAACM,KAAZ,CAAkB,CAAlB,EAAqBC,IAArB,EAAZ;QACAR,MAAM,CAACtF,MAAP,GAAgB,CAAhB;;eAEQ+E,KAAK,GAAGU,EAAE,CAACM,IAAH,CAAQL,SAAR,CAAhB,EAAqC;UACnCJ,MAAM,CAAC9E,IAAP,CAAYuE,KAAK,CAAC,CAAD,CAAjB;;;QAGFY,YAAY,GAAG,CAACJ,WAAW,CAACS,MAAZ,CAAmB,CAAnB,CAAD,CAAf;;aAEK,IAAIxE,CAAC,GAAG,CAAR,EAAWyE,IAAI,GAAGX,MAAM,CAACtF,MAA9B,EAAsCwB,CAAC,GAAGyE,IAA1C,EAAgDzE,CAAC,EAAjD,EAAqD;UACnDgE,MAAM,GAAGU,UAAU,CAACZ,MAAM,CAAC9D,CAAD,CAAP,CAAnB;;cACI,CAAC2E,KAAK,CAACX,MAAD,CAAV,EAAoB;YAClBG,YAAY,CAACnF,IAAb,CAAkBgF,MAAlB;;;;YAIAY,OAAO,GAAGT,YAAY,CAAC,CAAD,CAA1B;YACIU,aAAa,GAAGpC,cAAc,CAACmC,OAAO,CAACE,WAAR,EAAD,CADlC;YAEIC,eAAe,GAAG5B,gBAAgB,CAACyB,OAAD,CAAhB,IAA6BA,OAFnD;;YAIIT,YAAY,CAAC3F,MAAb,GAAsB,CAAtB,GAA0BqG,aAA9B,EAA6C;eACtC,IAAIG,CAAC,GAAG,CAAR,EAAWC,IAAI,GAAGd,YAAY,CAAC3F,MAApC,EAA4CwG,CAAC,GAAGC,IAAhD,EAAsDD,CAAC,IAAIH,aAA3D,EAA0E;YACxEhB,MAAM,CAAC7E,IAAP,CAAY,CAAC4F,OAAD,EAAU9C,MAAV,CAAiBqC,YAAY,CAACE,KAAb,CAAmBW,CAAnB,EAAsBA,CAAC,GAAGH,aAA1B,CAAjB,CAAZ;YACAD,OAAO,GAAGG,eAAV;;SAHJ,MAMK;UACHlB,MAAM,CAAC7E,IAAP,CAAYmF,YAAZ;;;;aAIGN,MAAP;;;;;EAvDezB;;IClBb8C;;;sBACS9I,GAAb,EAAkBD,GAAlB,EAAuB;;;QACjBC,GAAG,GAAGD,GAAV,EAAe;YACP,sCAAN;;;SAEGC,GAAL,GAAWA,GAAX;SACKD,GAAL,GAAWA,GAAX;;;;;6BAGQgJ,YAAY;;;;;;;ICTlBC;;;kBACS3M,CAAb,EAAgBC,CAAhB,EAAmB;;;SACZD,CAAL,GAASA,CAAT;SACKC,CAAL,GAASA,CAAT;;;;;gCAGW;aACJwD,IAAI,CAACmJ,IAAL,CAAUnJ,IAAI,CAACoJ,GAAL,CAAS,KAAK7M,CAAd,EAAiB,CAAjB,IAAsByD,IAAI,CAACoJ,GAAL,CAAS,KAAK5M,CAAd,EAAiB,CAAjB,CAAhC,CAAP;;;;wBAGG6M,QAAQ;UACP1C,CAAC,GAAG,IAAIuC,MAAJ,EAAR;MACAvC,CAAC,CAACpK,CAAF,GAAM,KAAKA,CAAL,GAAS8M,MAAM,CAAC9M,CAAtB;MACAoK,CAAC,CAACnK,CAAF,GAAM,KAAKA,CAAL,GAAS6M,MAAM,CAAC7M,CAAtB;aACOmK,CAAP;;;;;;;;;;;wBASG0C,QAAQ;UACP1C,CAAC,GAAG,IAAIuC,MAAJ,EAAR;MACAvC,CAAC,CAACpK,CAAF,GAAM,KAAKA,CAAL,GAAS8M,MAAM,CAAC9M,CAAtB;MACAoK,CAAC,CAACnK,CAAF,GAAM,KAAKA,CAAL,GAAS6M,MAAM,CAAC7M,CAAtB;aACOmK,CAAP;;;;wBAGG0C,QAAQ;aACJ,KAAK9M,CAAL,GAAS8M,MAAM,CAAC9M,CAAhB,GAAoB,KAAKC,CAAL,GAAS6M,MAAM,CAAC7M,CAA3C;;;;yBAGI6M,QAAQ;aACL,KAAKC,GAAL,CAASD,MAAT,CAAP;;;;;;;;;;;;yBAUIE,QAAQ;MACZA,MAAM,GAAGA,MAAM,KAAK,IAAX,GAAkB,CAAC,CAAnB,GAAuB,CAAhC;UACI5C,CAAC,GAAG,IAAIuC,MAAJ,EAAR;MACAvC,CAAC,CAACpK,CAAF,GAAMgN,MAAM,GAAG,CAAC,KAAK/M,CAArB;MACAmK,CAAC,CAACnK,CAAF,GAAM+M,MAAM,GAAG,KAAKhN,CAApB;aACOoK,CAAP;;;;gCAGW;UACPA,CAAC,GAAG,IAAIuC,MAAJ,CAAW,CAAX,EAAc,CAAd,CAAR;UAA0B1C,CAAC,GAAG,KAAKgD,SAAL,EAA9B;;UAEIhD,CAAC,KAAK,CAAV,EAAa;QACXG,CAAC,CAACpK,CAAF,GAAM,KAAKA,CAAL,GAASiK,CAAf;QACAG,CAAC,CAACnK,CAAF,GAAM,KAAKA,CAAL,GAASgK,CAAf;;;aAEKG,CAAP;;;;6BAGQ;UACJ8C,CAAC,GAAG,KAAKC,IAAL,EAAR;aACOD,CAAC,CAACE,SAAF,EAAP;;;;;;;ICjEEC,UACJ,iBAAarN,CAAb,EAAgBC,CAAhB,EAAmB;;;OACZD,CAAL,GAASA,CAAT;OACKC,CAAL,GAASA,CAAT;;;ACHG,SAASqN,QAAT,CAAmBnG,MAAnB,EAA2Bb,GAA3B,EAAgC;MACjCiH,SAAS,GAAGjH,GAAG,CAACU,KAAJ,CAAU,GAAV,CAAhB;MACIwG,KAAK,GAAGrG,MAAZ;;OAEK,IAAItB,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAG4B,SAAS,CAACxH,MAAhC,EAAwCF,CAAC,GAAG8F,GAA5C,EAAiD9F,CAAC,EAAlD,EAAsD;IACpD2H,KAAK,GAAGA,KAAK,CAACD,SAAS,CAAC1H,CAAD,CAAV,CAAb;;QACI2H,KAAK,KAAK7I,SAAd,EAAyB;MACvBuG,OAAO,CAACuC,KAAR,mCAAyCnH,GAAzC;;;;;SAKGkH,KAAP;;;ACVF;;;;;;;;AAOA,AAAO,SAAS9J,GAAT,CAAagK,KAAb,EAAoBC,UAApB,EAAgC;SAC9BC,IAAI,CAACF,KAAD,EAAQC,UAAR,EAAoB,UAASE,MAAT,EAAiBC,MAAjB,EAAyB;WAC/CD,MAAM,IAAIC,MAAjB;GADS,CAAX;;;;;;;;;;AAYF,AAAO,SAASnK,GAAT,CAAa+J,KAAb,EAAoBC,UAApB,EAAgC;SAC9BC,IAAI,CAACF,KAAD,EAAQC,UAAR,EAAoB,UAASE,MAAT,EAAiBC,MAAjB,EAAyB;WAC/CD,MAAM,GAAGC,MAAhB;GADS,CAAX;;AAKF,AAAO,SAASF,IAAT,CAAcF,KAAd,EAAqBC,UAArB,EAAiCI,SAAjC,EAA4C;MAC7C,CAACL,KAAD,IAAUA,KAAK,CAAC3H,MAAN,KAAiB,CAA/B,EAAkC;;;;MAI9BF,CAAC,GAAG6H,KAAK,CAAC3H,MAAN,GAAe,CAAvB;MACIqF,MAAM,GAAGuC,UAAU,GAAGL,QAAQ,CAACI,KAAK,CAAC7H,CAAD,CAAN,EAAW8H,UAAX,CAAX,GAAoCD,KAAK,CAAC7H,CAAD,CADhE;;MAEI8H,UAAJ,EAAgB;WACP9H,CAAC,EAAR,EAAY;UACNkI,SAAS,CAACT,QAAQ,CAACI,KAAK,CAAC7H,CAAD,CAAN,EAAW8H,UAAX,CAAT,EAAiCvC,MAAjC,CAAb,EAAuD;QACrDA,MAAM,GAAGkC,QAAQ,CAACI,KAAK,CAAC7H,CAAD,CAAN,EAAW8H,UAAX,CAAjB;;;GAHN,MAOK;WACI9H,CAAC,EAAR,EAAY;UACNkI,SAAS,CAACL,KAAK,CAAC7H,CAAD,CAAN,EAAWuF,MAAX,CAAb,EAAiC;QAC/BA,MAAM,GAAGsC,KAAK,CAAC7H,CAAD,CAAd;;;;;SAICuF,MAAP;;;IC3CI4C;;;;;mBACSC,MAAb,EAAqB9F,IAArB,EAA2B;;;;;iFACnBA,IAAN;UACKU,IAAL,GAAY,SAAZ;UACKqF,QAAL,GAAgBD,MAAM,CAACE,GAAP,CAAW,UAAAC,KAAK;aAAI,IAAIf,OAAJ,CAAYe,KAAK,CAAC,CAAD,CAAjB,EAAsBA,KAAK,CAAC,CAAD,CAA3B,CAAJ;KAAhB,CAAhB;UACKpD,UAAL,GAAkB,MAAKC,cAAL,EAAlB;;;;;;8BAGS;kCACoB,KAAK7C,SAAL,CAAerI,QADnC;UACEsO,IADF,yBACDrO,CADC;UACWsO,IADX,yBACQrO,CADR;UAGLsO,EAAE,GAAG,IAAI5B,MAAJ,EAAT;UACE6B,EAAE,GAAG,IAAI7B,MAAJ,EADP;UAEExD,IAAI,GAAG,EAFT;UAGEsF,QAAQ,GAAG,KAAKP,QAAL,CAAcnI,MAH3B;;WAMK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4I,QAAQ,GAAG,CAA/B,EAAkC5I,CAAC,EAAnC,EAAuC;QACrC0I,EAAE,CAACvO,CAAH,GAAO,KAAKkO,QAAL,CAAcrI,CAAd,EAAiB7F,CAAjB,GAAqBqO,IAA5B;QACAE,EAAE,CAACtO,CAAH,GAAO,KAAKiO,QAAL,CAAcrI,CAAd,EAAiB5F,CAAjB,GAAqBqO,IAA5B;QAEAE,EAAE,CAACxO,CAAH,GAAO,KAAKkO,QAAL,CAAcrI,CAAC,GAAG,CAAlB,EAAqB7F,CAArB,GAAyBqO,IAAhC;QACAG,EAAE,CAACvO,CAAH,GAAO,KAAKiO,QAAL,CAAcrI,CAAC,GAAG,CAAlB,EAAqB5F,CAArB,GAAyBqO,IAAhC;QAEAnF,IAAI,CAAC5C,IAAL,CAAUgI,EAAE,CAACG,IAAH,CAAQF,EAAR,EAAYG,MAAZ,EAAV;;;MAGFJ,EAAE,CAACvO,CAAH,GAAO,KAAKkO,QAAL,CAAcO,QAAQ,GAAG,CAAzB,EAA4BzO,CAA5B,GAAgCqO,IAAvC;MACAE,EAAE,CAACtO,CAAH,GAAO,KAAKiO,QAAL,CAAcO,QAAQ,GAAG,CAAzB,EAA4BxO,CAA5B,GAAgCqO,IAAvC;MAEAE,EAAE,CAACxO,CAAH,GAAO,KAAKkO,QAAL,CAAc,CAAd,EAAiBlO,CAAjB,GAAqBqO,IAA5B;MACAG,EAAE,CAACvO,CAAH,GAAO,KAAKiO,QAAL,CAAc,CAAd,EAAiBjO,CAAjB,GAAqBqO,IAA5B;MAEAnF,IAAI,CAAC5C,IAAL,CAAUgI,EAAE,CAACG,IAAH,CAAQF,EAAR,EAAYG,MAAZ,EAAV;aAEOxF,IAAP;;;;4BAGOG,MAAM;mCACgB,KAAKlB,SAAL,CAAerI,QAD/B;UACFsO,IADE,0BACLrO,CADK;UACOsO,IADP,0BACIrO,CADJ;UAGT2O,OAAO,GAAG,EAAd;UACExE,CAAC,GAAG,IAAIuC,MAAJ,EADN;WAGKuB,QAAL,CAAcnG,OAAd,CAAsB,UAAAqG,KAAK,EAAI;QAC7BhE,CAAC,CAACpK,CAAF,GAAMoO,KAAK,CAACpO,CAAN,GAAUqO,IAAhB;QACAjE,CAAC,CAACnK,CAAF,GAAMmO,KAAK,CAACnO,CAAN,GAAUqO,IAAhB;QACAM,OAAO,CAACrI,IAAR,CAAa6D,CAAC,CAACyE,GAAF,CAAMvF,IAAN,CAAb;OAHF;aAMO,IAAImD,UAAJ,CAAehJ,IAAI,CAACE,GAAL,CAAS+D,KAAT,CAAejE,IAAf,EAAqBmL,OAArB,CAAf,EAA8CnL,IAAI,CAACC,GAAL,CAASgE,KAAT,CAAejE,IAAf,EAAqBmL,OAArB,CAA9C,CAAP;;;;6BAGQ5O,GAAGC,GAAG;WACTiO,QAAL,CAAc3H,IAAd,CAAmB,IAAI8G,OAAJ,CAAYrN,CAAZ,EAAeC,CAAf,CAAnB;;;;qCAGgB;UACZiO,QAAQ,GAAG,KAAKA,QAApB;UACEY,IAAI,GAAGnL,GAAG,CAACuK,QAAD,EAAW,GAAX,CAAH,IAAsB,CAD/B;UAEEa,IAAI,GAAGpL,GAAG,CAACuK,QAAD,EAAW,GAAX,CAAH,IAAsB,CAF/B;UAGEc,IAAI,GAAGtL,GAAG,CAACwK,QAAD,EAAW,GAAX,CAAH,IAAsB,CAH/B;UAIEe,IAAI,GAAGvL,GAAG,CAACwK,QAAD,EAAW,GAAX,CAAH,IAAsB,CAJ/B;UAKE7I,KAAK,GAAI2J,IAAI,GAAGF,IALlB;UAMEvJ,MAAM,GAAI0J,IAAI,GAAGF,IANnB;aAQO;QACL9J,IAAI,EAAE6J,IADD;QAEL3J,GAAG,EAAE4J,IAFA;QAGL1J,KAAK,EAAEA,KAHF;QAILE,MAAM,EAAEA;OAJV;;;;yBAQImD,IAAIC,IAAI;WACP,IAAI9C,CAAC,GAAG,CAAR,EAAWuI,KAAhB,EAAuBvI,CAAC,GAAG,KAAKqI,QAAL,CAAcnI,MAAzC,EAAiDF,CAAC,EAAlD,EAAsD;QACpDuI,KAAK,GAAG,KAAKF,QAAL,CAAcrI,CAAd,CAAR;QACAuI,KAAK,CAACpO,CAAN,IAAW0I,EAAX;QACA0F,KAAK,CAACnO,CAAN,IAAW0I,EAAX;;;;;;EA9EgBgB;;ICHhBuF;;;;;oBACSjB,MAAb,EAAqB9F,IAArB,EAA2B;;;;;kFACnBA,IAAN;UACKU,IAAL,GAAY,UAAZ;UACKqF,QAAL,GAAgBD,MAAM,CAACE,GAAP,CAAW,UAAAC,KAAK;aAAI,IAAIf,OAAJ,CAAYe,KAAK,CAAC,CAAD,CAAjB,EAAsBA,KAAK,CAAC,CAAD,CAA3B,CAAJ;KAAhB,CAAhB;;;;;;yBAGI1F,IAAIC,IAAI;;;;EAPOT;;ICDjBiH;;;;;qBACShH,IAAb,EAAmB;;;;;mFACXA,IAAN;UACKU,IAAL,GAAY,WAAZ;UACKxD,KAAL,GAAa8C,IAAI,CAAC9C,KAAL,IAAc,CAA3B;UACKE,MAAL,GAAc4C,IAAI,CAAC5C,MAAL,IAAe,CAA7B;UACK6J,EAAL,GAAUjH,IAAI,CAACiH,EAAL,IAAW,CAArB;UACKC,EAAL,GAAUlH,IAAI,CAACkH,EAAL,IAAW,CAArB;UACKrE,UAAL,GAAkB,MAAKC,cAAL,EAAlB;;;;;;8BAGS;;;4BAGF3B,MAAM;;;;6BAILtJ,GAAGC,GAAG;MACdiL,OAAO,CAACC,GAAR,CAAYnL,CAAZ,EAAeC,CAAf;;;;qCAGgB;aACT;QACLgF,IAAI,EAAE,CADD;QAELE,GAAG,EAAE,CAFA;QAGLE,KAAK,EAAE,KAAKA,KAHP;QAILE,MAAM,EAAE,KAAKA;OAJf;;;;yBAQImD,IAAIC,IAAI;MACZuC,OAAO,CAACC,GAAR,CAAYzC,EAAZ,EAAgBC,EAAhB;;;;;EAhCoBgB;;ICAlB2F;;;;;kBACSnH,IAAb,EAAmB;;;;;gFACXA,IAAN;UACKU,IAAL,GAAY,QAAZ;;;;;;8BAGS;;;4BAGFS,MAAM;;;6BAGLtJ,GAAGC,GAAG;;;yBAGVyI,IAAIC,IAAI;;;;EAfKgB;;ACFrB;;;;;;;;;AASA,AAAO,IAAM4F,aAAa,GAAG;EACzBC,eAAe,EAAE,CADQ;EAEzBC,iBAAiB,EAAE;CAFhB;;ACTP;;;;;AAKA,AAAO,SAASC,UAAT,CAAqBC,GAArB,EAA0B;EAC/BA,GAAG,GAAGA,GAAG,CAACjJ,QAAJ,CAAa,EAAb,CAAN;EACAiJ,GAAG,GAAG,SAASC,MAAT,CAAgB,CAAhB,EAAmB,IAAID,GAAG,CAAC5J,MAA3B,IAAqC4J,GAA3C;oBAEWA,GAAX;;;ACNF,IAAME,YAAY,GAAG;EACnBC,KAAK,EAAE,MADY;EAEnBC,UAAU,EAAE,KAFO;EAGnBC,UAAU,EAAE,KAHO;EAInBC,eAAe,EAAE,CAJE;EAKnBC,eAAe,EAAEzM,IAAI,CAAC0M,EAAL,GAAU,CALR;EAMnBC,cAAc,EAAE,CANG;EAOnBC,eAAe,EAAE,OAPE;EAQnBC,kBAAkB,EAAE,CARD;EASnB/H,IAAI,EAAE,OATa;EAUnBgI,gBAAgB,EAAEhB,aAAa,CAACC,eAVb;EAWnBgB,iBAAiB,EAAE,EAXA;EAYnBC,UAAU,EAAE,OAZO;EAanBC,QAAQ,EAAE,EAbS;EAcnBC,SAAS,EAAE,QAdQ;EAenBC,WAAW,EAAE,QAfM;EAgBnBC,UAAU,EAAE,QAhBO;EAiBnBC,aAAa,EAAE,CAjBI;EAkBnBC,UAAU,EAAE,CAlBO;EAmBnBC,QAAQ,EAAE,OAnBS;EAoBnBC,UAAU,EAAE,EApBO;EAqBnBC,OAAO,EAAE,CArBU;EAsBnBzI,MAAM,EAAE,OAtBW;EAuBnB0I,eAAe,EAAE,CAvBE;EAwBnBC,YAAY,EAAE,YAxBK;EAyBnBvF,IAAI,EAAE,KAzBa;EA0BnBwF,UAAU,EAAE,KA1BO;EA2BnBC,QAAQ,EAAE,KA3BS;EA4BnBC,aAAa,EAAE,GA5BI;EA6BnBC,OAAO,EAAE;CA7BX;AAgCA,IAAMC,mBAAmB,GAAG,CAC1B,OAD0B,EAE1B,YAF0B,EAG1B,WAH0B,EAI1B,SAJ0B,EAK1B,SAL0B,EAM1B,WAN0B,CAA5B;AASA,IAAaC,SAAb;;AAAA;qBACepJ,KAAb,EAAoB;;;SACbqJ,OAAL,GAAe,CAAf;SAEKhQ,KAAL;IAEAiQ,kBAAkB,CAAC,IAAD,EAAOtJ,KAAP,EAAcA,KAAd,CAAlB;;;;;4BAGO;MACPsJ,kBAAkB,CAAC,IAAD,EAAO/B,YAAP,EAAqBA,YAArB,CAAlB;;;;4BAGO;UACDgC,gBAAgB,GAAG,EAAzB;MAEAD,kBAAkB,CAACC,gBAAD,EAAmB,IAAnB,EAAyBhC,YAAzB,CAAlB;aAEO,IAAI6B,SAAJ,CAAcG,gBAAd,CAAP;;;;mCA4dc;UACRC,cAAc,GAAI,OAAO,KAAKpB,QAAZ,KAAyB,QAA1B,aAAyC,KAAKA,QAA9C,UAA6D,KAAKA,QAAzF;UAEIqB,YAAY,GAAG,KAAKtB,UAAxB;;UAEI,CAACuB,KAAK,CAACxL,OAAN,CAAc,KAAKiK,UAAnB,CAAL,EAAqC;QACnCsB,YAAY,GAAG,KAAKtB,UAAL,CAAgBzJ,KAAhB,CAAsB,GAAtB,CAAf;;;WAGG,IAAInB,CAAC,GAAGkM,YAAY,CAAChM,MAAb,GAAsB,CAAnC,EAAsCF,CAAC,IAAI,CAA3C,EAA8CA,CAAC,EAA/C,EAAmD;;YAE7C4K,UAAU,GAAGsB,YAAY,CAAClM,CAAD,CAAZ,CAAgBgG,IAAhB,EAAjB,CAFiD;;YAK7C,CAAE,oBAAD,CAAuBoG,IAAvB,CAA4BxB,UAA5B,CAAD,IAA4CgB,mBAAmB,CAACS,OAApB,CAA4BzB,UAA5B,IAA0C,CAA1F,EAA6F;UAC3FA,UAAU,eAAOA,UAAP,OAAV;;;QAEFsB,YAAY,CAAClM,CAAD,CAAZ,GAAkB4K,UAAlB;;;uBAGQ,KAAKE,SAAf,cAA4B,KAAKC,WAAjC,cAAgD,KAAKC,UAArD,cAAmEiB,cAAnE,cAAqFC,YAAY,CAAC3K,IAAb,CAAkB,GAAlB,CAArF;;;;wBA7eU;aACH,KAAK+K,MAAZ;KAtBJ;sBAyBarC,KAzBb,EAyBoB;UACZ,KAAKqC,MAAL,KAAgBrC,KAApB,EAA2B;aACpBqC,MAAL,GAAcrC,KAAd;aACK6B,OAAL;;;;;;;;;;;wBASc;aACT,KAAKS,WAAZ;KAtCJ;sBAyCkBrC,UAzClB,EAyC8B;UACtB,KAAKqC,WAAL,KAAqBrC,UAAzB,EAAqC;aAC9BqC,WAAL,GAAmBrC,UAAnB;aACK4B,OAAL;;;;;;;;;;;wBASa;aACR,KAAKU,WAAZ;KAtDJ;sBAyDkBrC,UAzDlB,EAyD8B;UACtB,KAAKqC,WAAL,KAAqBrC,UAAzB,EAAqC;aAC9BqC,WAAL,GAAmBrC,UAAnB;aACK2B,OAAL;;;;;;;;;;;wBASmB;aACd,KAAKW,gBAAZ;KAtEJ;sBAyEuBrC,eAzEvB,EAyEuC;UAC/B,KAAKqC,gBAAL,KAA0BrC,eAA9B,EAA+C;aACxCqC,gBAAL,GAAwBrC,eAAxB;aACK0B,OAAL;;;;;;;;;;;wBASmB;aACd,KAAKY,gBAAZ;KAtFJ;sBAyFuBrC,eAzFvB,EAyFwC;UAChC,KAAKqC,gBAAL,KAA0BrC,eAA9B,EAA+C;aACxCqC,gBAAL,GAAwBrC,eAAxB;aACKyB,OAAL;;;;;;;;;;;wBASkB;aACb,KAAKa,eAAZ;KAtGJ;sBAyGsBpC,cAzGtB,EAyGsC;UAC9B,KAAKoC,eAAL,KAAyBpC,cAA7B,EAA6C;aACtCoC,eAAL,GAAuBpC,cAAvB;aACKuB,OAAL;;;;;;;;;;;wBASmB;aACd,KAAKc,gBAAZ;KAtHJ;sBAyHuBpC,eAzHvB,EAyHwC;UAC9BqC,WAAW,GAAGC,QAAQ,CAACtC,eAAD,CAA5B;;UACI,KAAKoC,gBAAL,KAA0BC,WAA9B,EAA2C;aACpCD,gBAAL,GAAwBC,WAAxB;aACKf,OAAL;;;;;;;;;;;wBASsB;aACjB,KAAKiB,mBAAZ;KAvIJ;sBA0I0BtC,kBA1I1B,EA0I8C;UACtC,KAAKsC,mBAAL,KAA6BtC,kBAAjC,EAAqD;aAC9CsC,mBAAL,GAA2BtC,kBAA3B;aACKqB,OAAL;;;;;;;;;;;;;wBAWQ;aACH,KAAKkB,KAAZ;KAzJJ;sBA4JYtK,IA5JZ,EA4JkB;UACRmK,WAAW,GAAGC,QAAQ,CAACpK,IAAD,CAA5B;;UACI,KAAKsK,KAAL,KAAeH,WAAnB,EAAgC;aACzBG,KAAL,GAAaH,WAAb;aACKf,OAAL;;;;;;;;;;;wBASoB;aACf,KAAKmB,iBAAZ;KA1KJ;sBA6KwBvC,gBA7KxB,EA6K0C;UAClC,KAAKuC,iBAAL,KAA2BvC,gBAA/B,EAAiD;aAC1CuC,iBAAL,GAAyBvC,gBAAzB;aACKoB,OAAL;;;;;;;;;;;;wBAUqB;aAChB,KAAKoB,kBAAZ;KA3LJ;sBA8LyBvC,iBA9LzB,EA8L4C;UACpC,CAACwC,cAAc,CAAC,KAAKD,kBAAN,EAAyBvC,iBAAzB,CAAnB,EAAgE;aACzDuC,kBAAL,GAA0BvC,iBAA1B;aACKmB,OAAL;;;;;;;;;;;wBASc;aACT,KAAKsB,WAAZ;KA3MJ;sBA8MkBxC,UA9MlB,EA8M8B;UACtB,KAAKA,UAAL,KAAoBA,UAAxB,EAAoC;aAC7BwC,WAAL,GAAmBxC,UAAnB;aACKkB,OAAL;;;;;;;;;;;;wBAUY;aACP,KAAKuB,SAAZ;KA5NJ;sBA+NgBxC,QA/NhB,EA+N0B;UAClB,KAAKwC,SAAL,KAAmBxC,QAAvB,EAAiC;aAC1BwC,SAAL,GAAiBxC,QAAjB;aACKiB,OAAL;;;;;;;;;;;;wBAUa;aACR,KAAKwB,UAAZ;KA7OJ;sBA+OiBxC,SA/OjB,EA+O4B;UACpB,KAAKwC,UAAL,KAAoBxC,SAAxB,EAAmC;aAC5BwC,UAAL,GAAkBxC,SAAlB;aACKgB,OAAL;;;;;;;;;;;;wBAUe;aACV,KAAKyB,YAAZ;KA7PJ;sBAgQmBxC,WAhQnB,EAgQgC;UACxB,KAAKwC,YAAL,KAAsBxC,WAA1B,EAAuC;aAChCwC,YAAL,GAAoBxC,WAApB;aACKe,OAAL;;;;;;;;;;;;wBAUc;aACT,KAAK0B,WAAZ;KA9QJ;sBAiRkBxC,UAjRlB,EAiR8B;UACtB,KAAKwC,WAAL,KAAqBxC,UAAzB,EAAqC;aAC9BwC,WAAL,GAAmBxC,UAAnB;aACKc,OAAL;;;;;;;;;;;wBASiB;aACZ,KAAK2B,cAAZ;KA9RJ;sBAgSqBxC,aAhSrB,EAgSoC;UAC5B,KAAKwC,cAAL,KAAwBxC,aAA5B,EAA2C;aACpCwC,cAAL,GAAsBxC,aAAtB;aACKa,OAAL;;;;;;;;;;;wBASc;aACT,KAAK4B,WAAZ;KA7SJ;sBAgTkBxC,UAhTlB,EAgT8B;UACtB,KAAKwC,WAAL,KAAqBxC,UAAzB,EAAqC;aAC9BwC,WAAL,GAAmBxC,UAAnB;aACKY,OAAL;;;;;;;;;;;wBASU;aACL,KAAK6B,QAAZ;KA7TJ;sBAgUehC,OAhUf,EAgUwB;UAChB,KAAKgC,QAAL,KAAkBhC,OAAtB,EAA+B;aACxBgC,QAAL,GAAgBhC,OAAhB;aACKG,OAAL;;;;;;;;;;;;wBAUY;aACP,KAAK8B,SAAZ;KA9UJ;sBAiVgBzC,QAjVhB,EAiV0B;UAClB,KAAKyC,SAAL,KAAmBzC,QAAvB,EAAiC;aAC1ByC,SAAL,GAAiBzC,QAAjB;aACKW,OAAL;;;;;;;;;;;;wBAUc;aACT,KAAK+B,WAAZ;KA/VJ;sBAkWkBzC,UAlWlB,EAkW8B;UACtB,KAAKyC,WAAL,KAAqBzC,UAAzB,EAAqC;aAC9ByC,WAAL,GAAmBzC,UAAnB;aACKU,OAAL;;;;;;;;;;;;wBAUW;aACN,KAAKgC,QAAZ;KAhXJ;sBAmXezC,OAnXf,EAmXwB;UAChB,KAAKyC,QAAL,KAAkBzC,OAAtB,EAA+B;aACtByC,QAAL,GAAgBzC,OAAhB;aACKS,OAAL;;;;;;;;;;;;wBAUQ;aACL,KAAKiC,OAAZ;KAjYJ;sBAoYcnL,MApYd,EAoYsB;UACZiK,WAAW,GAAGC,QAAQ,CAAClK,MAAD,CAA5B;;UACI,KAAKmL,OAAL,KAAiBlB,WAArB,EAAkC;aAC3BkB,OAAL,GAAelB,WAAf;aACKf,OAAL;;;;;;;;;;;;wBAUkB;aACb,KAAKkC,gBAAZ;KAnZJ;sBAqZuB1C,eArZvB,EAqZwC;UAChC,KAAK0C,gBAAL,KAA0B1C,eAA9B,EAA+C;aACxC0C,gBAAL,GAAwB1C,eAAxB;aACKQ,OAAL;;;;;;;;;;;wBASgB;aACX,KAAKmC,aAAZ;KAlaJ;sBAqaoB1C,YArapB,EAqakC;UAC1B,KAAK0C,aAAL,KAAuB1C,YAA3B,EAAyC;aAClC0C,aAAL,GAAqB1C,YAArB;aACKO,OAAL;;;;;;;;;;;wBASQ;aACH,KAAKoC,KAAZ;KAlbJ;sBAqbYlI,IArbZ,EAqbkB;UACV,KAAKkI,KAAL,KAAelI,IAAnB,EAAyB;aAClBkI,KAAL,GAAalI,IAAb;aACK8F,OAAL;;;;;;;;;;;;;;;;;;wBAgBc;aACT,KAAKqC,WAAZ;KAzcJ;sBA4ckB3C,UA5clB,EA4c8B;UACtB,KAAK2C,WAAL,KAAqB3C,UAAzB,EAAqC;aAC9B2C,WAAL,GAAmB3C,UAAnB;aACKM,OAAL;;;;;wBAIY;aACP,KAAKsC,SAAZ;KApdJ;sBAudgB3C,QAvdhB,EAud0B;UAClB,KAAK2C,SAAL,KAAmB3C,QAAvB,EAAiC;aAC1B2C,SAAL,GAAiB3C,QAAjB;aACKK,OAAL;;;;;;;;;;;wBASiB;aACZ,KAAKuC,cAAZ;KApeJ;sBAueqB3C,aAverB,EAueoC;UAC5B,KAAK2C,cAAL,KAAwB3C,aAA5B,EAA2C;aACpC2C,cAAL,GAAsB3C,aAAtB;aACKI,OAAL;;;;;;;;;;;;;;AAkCN,SAASwC,cAAT,CAAyBC,KAAzB,EAAgC;MAC1B,OAAOA,KAAP,KAAiB,QAArB,EAA+B;WACtB1E,UAAU,CAAC0E,KAAD,CAAjB;GADF,MAEO,IAAK,OAAOA,KAAP,KAAiB,QAAtB,EAAiC;QAClCA,KAAK,CAAClC,OAAN,CAAc,IAAd,MAAwB,CAA5B,EAA+B;MAC7BkC,KAAK,GAAGA,KAAK,CAACC,OAAN,CAAc,IAAd,EAAoB,GAApB,CAAR;;;;SAIGD,KAAP;;;;;;;;;;;AAUF,SAASzB,QAAT,CAAmByB,KAAnB,EAA0B;MACpB,CAACpC,KAAK,CAACxL,OAAN,CAAc4N,KAAd,CAAL,EAA2B;WAClBD,cAAc,CAACC,KAAD,CAArB;GADF,MAEO;SACA,IAAIvO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuO,KAAK,CAACrO,MAA1B,EAAkC,EAAEF,CAApC,EAAuC;MACrCuO,KAAK,CAACvO,CAAD,CAAL,GAAWsO,cAAc,CAACC,KAAK,CAACvO,CAAD,CAAN,CAAzB;;;WAGKuO,KAAP;;;;;;;;;;;;;AAYJ,SAASpB,cAAT,CAAyBsB,MAAzB,EAAiCC,MAAjC,EAAyC;MACnC,CAACvC,KAAK,CAACxL,OAAN,CAAc8N,MAAd,CAAD,IAA0B,CAACtC,KAAK,CAACxL,OAAN,CAAc+N,MAAd,CAA/B,EAAsD;WAC7C,KAAP;;;MAGED,MAAM,CAACvO,MAAP,KAAkBwO,MAAM,CAACxO,MAA7B,EAAqC;WAC5B,KAAP;;;OAGG,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyO,MAAM,CAACvO,MAA3B,EAAmC,EAAEF,CAArC,EAAwC;QAClCyO,MAAM,CAACzO,CAAD,CAAN,KAAc0O,MAAM,CAAC1O,CAAD,CAAxB,EAA6B;aACpB,KAAP;;;;SAIG,IAAP;;;;;;;;;;;AAUF,SAAS+L,kBAAT,CAA6B4C,MAA7B,EAAqCxO,MAArC,EAA6CyO,WAA7C,EAA0D;OACnD,IAAMxO,IAAX,IAAmBwO,WAAnB,EAAgC;QAC1BzC,KAAK,CAACxL,OAAN,CAAcR,MAAM,CAACC,IAAD,CAApB,CAAJ,EAAiC;MAC/BuO,MAAM,CAACvO,IAAD,CAAN,GAAeD,MAAM,CAACC,IAAD,CAAN,CAAa2F,KAAb,EAAf;KADF,MAEO;MACL4I,MAAM,CAACvO,IAAD,CAAN,GAAeD,MAAM,CAACC,IAAD,CAArB;;;;;IC7nBOyO,WAAb;;AAAA;uBACeC,IAAb,EAAmBrM,KAAnB,EAA0BjD,KAA1B,EAAiCE,MAAjC,EAAyCqP,KAAzC,EAAgDC,UAAhD,EAA4D9D,UAA5D,EAAwE+D,YAAxE,EAAsFC,cAAtF,EAAsG;;;SAC/FJ,IAAL,GAAYA,IAAZ;SACKrM,KAAL,GAAaA,KAAb;SACKjD,KAAL,GAAaA,KAAb;SACKE,MAAL,GAAcA,MAAd;SACKqP,KAAL,GAAaA,KAAb,CALoG;;SAM/FC,UAAL,GAAkBA,UAAlB,CANoG;;SAO/F9D,UAAL,GAAkBA,UAAlB;SACK+D,YAAL,GAAoBA,YAApB;SACKC,cAAL,GAAsBA,cAAtB;IACA7J,OAAO,CAACC,GAAR,CAAY,IAAZ;;;;;gCAGkBwJ,IAdtB,EAc4BrM,KAd5B,EAcmCgJ,QAdnC,EAc6C;MACzCA,QAAQ,GAAIA,QAAQ,KAAK3M,SAAb,IAA0B2M,QAAQ,KAAK,IAAxC,GAAgDhJ,KAAK,CAACgJ,QAAtD,GAAiEA,QAA5E;UACM0D,IAAI,GAAG1M,KAAK,CAAC2M,YAAN,EAAb;UACMF,cAAc,GAAGL,WAAW,CAACQ,WAAZ,CAAwBF,IAAxB,CAAvB;;UAEID,cAAc,CAACrE,QAAf,KAA4B,CAAhC,EAAmC;QACjCqE,cAAc,CAACrE,QAAf,GAA0BpI,KAAK,CAACoI,QAAhC;QACAqE,cAAc,CAACI,MAAf,GAAwB7M,KAAK,CAACoI,QAA9B;;;UAGIxP,OAAO,GAAGwT,WAAW,CAACU,QAA5B;MAEAlU,OAAO,CAAC8T,IAAR,GAAeA,IAAf;UAEMK,UAAU,GAAG/D,QAAQ,GAAGoD,WAAW,CAACpD,QAAZ,CAAqBqD,IAArB,EAA2BrM,KAA3B,CAAH,GAAuCqM,IAAlE;UACMC,KAAK,GAAGS,UAAU,CAACrO,KAAX,CAAiB,gBAAjB,CAAd;UACM6N,UAAU,GAAG,IAAI7C,KAAJ,CAAU4C,KAAK,CAAC7O,MAAhB,CAAnB;UACI+O,YAAY,GAAG,CAAnB;;WAEK,IAAIjP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+O,KAAK,CAAC7O,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;YAC/ByP,SAAS,GAAGpU,OAAO,CAACqU,WAAR,CAAoBX,KAAK,CAAC/O,CAAD,CAAzB,EAA8BR,KAA9B,GAAuC,CAACuP,KAAK,CAAC/O,CAAD,CAAL,CAASE,MAAT,GAAkB,CAAnB,IAAwBuC,KAAK,CAACwI,aAAvF;QAEA+D,UAAU,CAAChP,CAAD,CAAV,GAAgByP,SAAhB;QACAR,YAAY,GAAGrR,IAAI,CAACC,GAAL,CAASoR,YAAT,EAAuBQ,SAAvB,CAAf;;;UAGEjQ,KAAK,GAAGyP,YAAY,GAAGxM,KAAK,CAAC6I,eAAjC;;UAEI7I,KAAK,CAAC0H,UAAV,EAAsB;QACpB3K,KAAK,IAAIiD,KAAK,CAACgI,kBAAf;;;UAGIS,UAAU,GAAGzI,KAAK,CAACyI,UAAN,IAAoBgE,cAAc,CAACrE,QAAf,GAA0BpI,KAAK,CAAC6I,eAAvE;UACI5L,MAAM,GAAG9B,IAAI,CAACC,GAAL,CAASqN,UAAT,EAAqBgE,cAAc,CAACrE,QAAf,GAA0BpI,KAAK,CAAC6I,eAArD,CAAb;;UAEI7I,KAAK,CAAC0H,UAAV,EAAsB;QACpBzK,MAAM,IAAI+C,KAAK,CAACgI,kBAAhB;;;aAGK,IAAIoE,WAAJ,CACLC,IADK,EAELrM,KAFK,EAGLjD,KAHK,EAILE,MAJK,EAKLqP,KALK,EAMLC,UANK,EAOL9D,UAAU,GAAGzI,KAAK,CAACkJ,OAPd,EAQLsD,YARK,EASLC,cATK,CAAP;;;;;;;;;;;;;gCAqBkBC,IA1EtB,EA0E4B;UACpBN,WAAW,CAACc,MAAZ,CAAmBR,IAAnB,CAAJ,EAA8B;eACrBN,WAAW,CAACc,MAAZ,CAAmBR,IAAnB,CAAP;;;UAGIS,UAAU,GAAG,EAAnB;UAEMC,MAAM,GAAGhB,WAAW,CAACiB,OAA3B;UACMzU,OAAO,GAAGwT,WAAW,CAACU,QAA5B;MAEAlU,OAAO,CAAC8T,IAAR,GAAeA,IAAf;UAEMY,aAAa,GAAGlB,WAAW,CAACmB,cAAZ,GAA6BnB,WAAW,CAACoB,eAA/D;UACMzQ,KAAK,GAAG5B,IAAI,CAACsS,IAAL,CAAU7U,OAAO,CAACqU,WAAR,CAAoBK,aAApB,EAAmCvQ,KAA7C,CAAd;UACI2Q,QAAQ,GAAGvS,IAAI,CAACsS,IAAL,CAAU7U,OAAO,CAACqU,WAAR,CAAoBb,WAAW,CAACoB,eAAhC,EAAiDzQ,KAA3D,CAAf;UACME,MAAM,GAAG,IAAIyQ,QAAnB;MACAA,QAAQ,GAAGA,QAAQ,GAAGtB,WAAW,CAACuB,mBAAvB,GAA6C,CAAxD;MAEAP,MAAM,CAACrQ,KAAP,GAAeA,KAAf;MACAqQ,MAAM,CAACnQ,MAAP,GAAgBA,MAAhB;MAEArE,OAAO,CAACgV,SAAR,GAAoB,MAApB;MACAhV,OAAO,CAACiV,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuB9Q,KAAvB,EAA8BE,MAA9B;MAEArE,OAAO,CAAC8T,IAAR,GAAeA,IAAf;MAEA9T,OAAO,CAACkQ,YAAR,GAAuB,YAAvB;MACAlQ,OAAO,CAACgV,SAAR,GAAoB,MAApB;MACAhV,OAAO,CAACkV,QAAR,CAAiBR,aAAjB,EAAgC,CAAhC,EAAmCI,QAAnC;UAEMK,SAAS,GAAGnV,OAAO,CAACoV,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAA2BjR,KAA3B,EAAkCE,MAAlC,EAA0CgR,IAA5D;UACMC,MAAM,GAAGH,SAAS,CAACtQ,MAAzB;UACM0Q,IAAI,GAAGpR,KAAK,GAAG,CAArB;UAEIQ,CAAC,GAAG,CAAR;UACI6Q,GAAG,GAAG,CAAV;UACIC,IAAI,GAAG,KAAX;;WAEK9Q,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGmQ,QAAhB,EAA0B,EAAEnQ,CAA5B,EAA+B;aACxB,IAAI0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkP,IAApB,EAA0BlP,CAAC,IAAI,CAA/B,EAAkC;cAC5B8O,SAAS,CAACK,GAAG,GAAGnP,CAAP,CAAT,KAAuB,GAA3B,EAAgC;YAC9BoP,IAAI,GAAG,IAAP;;;;;YAIA,CAACA,IAAL,EAAW;UACTD,GAAG,IAAID,IAAP;SADF,MAEO;;;;;MAKThB,UAAU,CAACN,MAAX,GAAoBa,QAAQ,GAAGnQ,CAA/B;MAEA6Q,GAAG,GAAGF,MAAM,GAAGC,IAAf;MACAE,IAAI,GAAG,KAAP;;WAEK9Q,CAAC,GAAGN,MAAT,EAAiBM,CAAC,GAAGmQ,QAArB,EAA+B,EAAEnQ,CAAjC,EAAoC;aAC7B,IAAI0B,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGkP,IAApB,EAA0BlP,EAAC,IAAI,CAA/B,EAAkC;cAC5B8O,SAAS,CAACK,GAAG,GAAGnP,EAAP,CAAT,KAAuB,GAA3B,EAAgC;YAC9BoP,IAAI,GAAG,IAAP;;;;;YAKA,CAACA,IAAL,EAAW;UACTD,GAAG,IAAID,IAAP;SADF,MAEO;;;;;MAKThB,UAAU,CAACmB,OAAX,GAAqB/Q,CAAC,GAAGmQ,QAAzB;MACAP,UAAU,CAAC/E,QAAX,GAAsB+E,UAAU,CAACN,MAAX,GAAoBM,UAAU,CAACmB,OAArD;MAEAlC,WAAW,CAACc,MAAZ,CAAmBR,IAAnB,IAA2BS,UAA3B;aAEOA,UAAP;;;;;;;;;;;;;;;6BAaed,IApKnB,EAoKyBrM,KApKzB,EAoKgC;UACtBpH,OAAO,GAAGwT,WAAW,CAACU,QAA5B;UAEI/P,KAAK,GAAG,CAAZ;UACIoR,IAAI,GAAG,EAAX;UACI7B,KAAK,GAAG,EAAZ;UAEMiC,KAAK,GAAG,EAAd;UACQ/F,aARoB,GAQUxI,KARV,CAQpBwI,aARoB;UAQLO,UARK,GAQU/I,KARV,CAQL+I,UARK;;UAWtByF,cAAc,GAAGpC,WAAW,CAACoC,cAAZ,CAA2BzF,UAA3B,CAAvB;UACM0F,gBAAgB,GAAGrC,WAAW,CAACqC,gBAAZ,CAA6B1F,UAA7B,CAAzB,CAZ4B;;UAexB2F,gBAAgB,GAAG,CAACF,cAAxB,CAf4B;;;;;;;UAuBtBvF,aAAa,GAAGjJ,KAAK,CAACiJ,aAAN,GAAsBT,aAA5C,CAvB4B;;UA0BtBmG,MAAM,GAAGvC,WAAW,CAACwC,QAAZ,CAAqBvC,IAArB,CAAf;;WAEK,IAAI9O,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoR,MAAM,CAAClR,MAA3B,EAAmCF,CAAC,EAApC,EAAwC;YAClCsR,KAAK,GAAGF,MAAM,CAACpR,CAAD,CAAlB;;YAEI6O,WAAW,CAAC0C,SAAZ,CAAsBD,KAAtB,CAAJ,EAAkC;cAC5B,CAACJ,gBAAL,EAAuB;YACrBnC,KAAK,IAAIF,WAAW,CAAC2C,OAAZ,CAAoBZ,IAApB,CAAT;YACAO,gBAAgB,GAAG,CAACF,cAApB;YACAL,IAAI,GAAG,EAAP;YACApR,KAAK,GAAG,CAAR;;WAL8B;;;;UAWhC8R,KAAK,GAAG,GAAR;SAdoC;;;YAkBlCL,cAAJ,EAAoB;;cAEZQ,mBAAmB,GAAG5C,WAAW,CAAC6C,eAAZ,CAA4BJ,KAA5B,CAA5B;cACMK,mBAAmB,GAAG9C,WAAW,CAAC6C,eAAZ,CAA4Bd,IAAI,CAACA,IAAI,CAAC1Q,MAAL,GAAc,CAAf,CAAhC,CAA5B;;cAEIuR,mBAAmB,IAAIE,mBAA3B,EAAgD;;;;;YAK5CC,UAAU,GAAG/C,WAAW,CAACgD,YAAZ,CAAyBP,KAAzB,EAAgCrG,aAAhC,EAA+C+F,KAA/C,EAAsD3V,OAAtD,CAAnB,CA5BsC;;YA+BlCuW,UAAU,GAAGlG,aAAjB,EAAgC;;cAE1BkF,IAAI,KAAK,EAAb,EAAiB;;YAEf7B,KAAK,IAAIF,WAAW,CAAC2C,OAAZ,CAAoBZ,IAApB,CAAT;YACAA,IAAI,GAAG,EAAP;YACApR,KAAK,GAAG,CAAR;WAN4B;;;cAU1BqP,WAAW,CAACiD,aAAZ,CAA0BR,KAA1B,EAAiC7O,KAAK,CAACyH,UAAvC,CAAJ,EAAwD;;gBAEhD6H,UAAU,GAAGT,KAAK,CAACnQ,KAAN,CAAY,EAAZ,CAAnB,CAFsD;;iBAIjD,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqQ,UAAU,CAAC7R,MAA/B,EAAuCwB,CAAC,EAAxC,EAA4C;kBACtCsQ,IAAI,GAAGD,UAAU,CAACrQ,CAAD,CAArB;kBAEIgF,CAAC,GAAG,CAAR,CAH0C;;qBAMnCqL,UAAU,CAACrQ,CAAC,GAAGgF,CAAL,CAAjB,EAA0B;oBAClBuL,QAAQ,GAAGF,UAAU,CAACrQ,CAAC,GAAGgF,CAAL,CAA3B;oBACMwL,QAAQ,GAAGF,IAAI,CAACA,IAAI,CAAC9R,MAAL,GAAc,CAAf,CAArB,CAFwB;;oBAKpB,CAAC2O,WAAW,CAACsD,aAAZ,CAA0BD,QAA1B,EAAoCD,QAApC,EAA8CX,KAA9C,EAAqD5P,CAArD,EAAwDe,KAAK,CAACyH,UAA9D,CAAL,EAAgF;;kBAE9E8H,IAAI,IAAIC,QAAR;iBAFF,MAGO;;;;gBAIPvL,CAAC;;;cAGHhF,CAAC,IAAIsQ,IAAI,CAAC9R,MAAL,GAAc,CAAnB;kBAEMkS,cAAc,GAAGvD,WAAW,CAACgD,YAAZ,CAAyBG,IAAzB,EAA+B/G,aAA/B,EAA8C+F,KAA9C,EAAqD3V,OAArD,CAAvB;;kBAEI+W,cAAc,GAAG5S,KAAjB,GAAyBkM,aAA7B,EAA4C;gBAC1CqD,KAAK,IAAIF,WAAW,CAAC2C,OAAZ,CAAoBZ,IAApB,CAAT;gBACAO,gBAAgB,GAAG,KAAnB;gBACAP,IAAI,GAAG,EAAP;gBACApR,KAAK,GAAG,CAAR;;;cAGFoR,IAAI,IAAIoB,IAAR;cACAxS,KAAK,IAAI4S,cAAT;;WArCJ,MAuCO;;;gBAGDxB,IAAI,CAAC1Q,MAAL,GAAc,CAAlB,EAAqB;cACnB6O,KAAK,IAAIF,WAAW,CAAC2C,OAAZ,CAAoBZ,IAApB,CAAT;cACAA,IAAI,GAAG,EAAP;cACApR,KAAK,GAAG,CAAR;;;gBAGI6S,WAAW,GAAGrS,CAAC,KAAKoR,MAAM,CAAClR,MAAP,GAAgB,CAA1C,CATK;;YAYL6O,KAAK,IAAIF,WAAW,CAAC2C,OAAZ,CAAoBF,KAApB,EAA2B,CAACe,WAA5B,CAAT;YACAlB,gBAAgB,GAAG,KAAnB;YACAP,IAAI,GAAG,EAAP;YACApR,KAAK,GAAG,CAAR;;SAhEJ,MAkEO;;;cAGDoS,UAAU,GAAGpS,KAAb,GAAqBkM,aAAzB,EAAwC;;YAEtCyF,gBAAgB,GAAG,KAAnB,CAFsC;;YAKtCpC,KAAK,IAAIF,WAAW,CAAC2C,OAAZ,CAAoBZ,IAApB,CAAT,CALsC;;YAQtCA,IAAI,GAAG,EAAP;YACApR,KAAK,GAAG,CAAR;WAZG;;;cAgBDoR,IAAI,CAAC1Q,MAAL,GAAc,CAAd,IAAmB,CAAC2O,WAAW,CAAC6C,eAAZ,CAA4BJ,KAA5B,CAApB,IAA0DH,gBAA9D,EAAgF;;YAE9EP,IAAI,IAAIU,KAAR,CAF8E;;YAK9E9R,KAAK,IAAIoS,UAAT;;;;;MAKN7C,KAAK,IAAIF,WAAW,CAAC2C,OAAZ,CAAoBZ,IAApB,EAA0B,KAA1B,CAAT;aAEO7B,KAAP;;;;;;;;;;;;;;;iCAamBtO,GA1UvB,EA0U4BwK,aA1U5B,EA0U2C+F,KA1U3C,EA0UkD3V,OA1UlD,EA0U2D;UACnDmE,KAAK,GAAGwR,KAAK,CAACvQ,GAAD,CAAjB;;UAEIjB,KAAK,KAAKV,SAAd,EAAyB;YACjBwT,OAAO,GAAK7R,GAAG,CAACP,MAAL,GAAe+K,aAAhC;QAEAzL,KAAK,GAAGnE,OAAO,CAACqU,WAAR,CAAoBjP,GAApB,EAAyBjB,KAAzB,GAAiC8S,OAAzC;QACAtB,KAAK,CAACvQ,GAAD,CAAL,GAAajB,KAAb;;;aAGKA,KAAP;;;;;;;;;;;;mCAUqBgM,UA9VzB,EA8VqC;aACvBA,UAAU,KAAK,QAAf,IAA2BA,UAAU,KAAK,UAAlD;;;;;;;;;;;;qCAUoBA,UAzW1B,EAyWsC;aAC1BA,UAAU,KAAK,QAAvB;;;;;;;;;;;;6BAUesD,IApXnB,EAoXyB;UACfsC,MAAM,GAAG,EAAf;UACIE,KAAK,GAAG,EAAZ;;UACI,OAAOxC,IAAP,KAAgB,QAApB,EAA8B;eACrBsC,MAAP;;;WAGG,IAAIpR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8O,IAAI,CAAC5O,MAAzB,EAAiCF,CAAC,EAAlC,EAAsC;YAC9BgS,IAAI,GAAGlD,IAAI,CAAC9O,CAAD,CAAjB;;YACI6O,WAAW,CAAC6C,eAAZ,CAA4BM,IAA5B,KAAqCnD,WAAW,CAAC0C,SAAZ,CAAsBS,IAAtB,CAAzC,EAAsE;cAChEV,KAAK,KAAK,EAAd,EAAkB;YAChBF,MAAM,CAAC1Q,IAAP,CAAY4Q,KAAZ;YACAA,KAAK,GAAG,EAAR;;;UAGFF,MAAM,CAAC1Q,IAAP,CAAYsR,IAAZ;;;;QAIFV,KAAK,IAAIU,IAAT;;;UAGEV,KAAK,KAAK,EAAd,EAAkB;QAChBF,MAAM,CAAC1Q,IAAP,CAAY4Q,KAAZ;;;aAGKF,MAAP;;;;;;;;;;;;;;;;kCAcmBE,KA5ZvB,EA4Z8BpH,UA5Z9B,EA4Z0C;aAC/BA,UAAP;;;;;;;;;;;;oCAUsB8H,IAva1B,EAuagC;UACxB,OAAOA,IAAP,KAAgB,QAApB,EAA8B;eACrB,KAAP;;;aAGMnD,WAAW,CAAC0D,eAAZ,CAA4BlG,OAA5B,CAAoC2F,IAAI,CAACQ,UAAL,CAAgB,CAAhB,CAApC,KAA2D,CAAnE;;;;;;;;;;;;8BAUgBR,IAtbpB,EAsb0B;UAClB,OAAOA,IAAP,KAAgB,QAApB,EAA8B;eACrB,KAAP;;;aAGMnD,WAAW,CAAC4D,SAAZ,CAAsBpG,OAAtB,CAA8B2F,IAAI,CAACQ,UAAL,CAAgB,CAAhB,CAA9B,KAAqD,CAA7D;;;;;;;;;;;;;;4BAYc5B,IAvclB,EAucwC;UAAhB8B,OAAgB,uEAAN,IAAM;MACpC9B,IAAI,GAAG/B,WAAW,CAAC8D,SAAZ,CAAsB/B,IAAtB,CAAP;MAEAA,IAAI,GAAI8B,OAAD,aAAe9B,IAAf,UAA0BA,IAAjC;aAEOA,IAAP;;;;;;;;;;;;8BAUgB9B,IAtdpB,EAsd0B;UAClB,OAAOA,IAAP,KAAgB,QAApB,EAA8B;eACrB,EAAP;;;WAGG,IAAI9O,CAAC,GAAG8O,IAAI,CAAC5O,MAAL,GAAc,CAA3B,EAA8BF,CAAC,IAAI,CAAnC,EAAsCA,CAAC,EAAvC,EAA2C;YACnCgS,IAAI,GAAGlD,IAAI,CAAC9O,CAAD,CAAjB;;YAEI,CAAC6O,WAAW,CAAC6C,eAAZ,CAA4BM,IAA5B,CAAL,EAAwC;;;;QAIxClD,IAAI,GAAGA,IAAI,CAAC/I,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAP;;;aAGK+I,IAAP;;;;;;;AAIJ,IAAMe,MAAM,GAAI,YAAM;MAChB;;QAEIrL,CAAC,GAAG,IAAIoO,eAAJ,CAAoB,CAApB,EAAuB,CAAvB,CAAV;WACOpO,CAAC,CAACqO,UAAF,CAAa,IAAb,IAAqBrO,CAArB,GAAyBjG,QAAQ,CAACuU,aAAT,CAAuB,QAAvB,CAAhC;GAHF,CAIE,OAAOC,EAAP,EAAW;WACJxU,QAAQ,CAACuU,aAAT,CAAuB,QAAvB,CAAP;;CANW,EAAf;;AAUAjD,MAAM,CAACrQ,KAAP,GAAeqQ,MAAM,CAACnQ,MAAP,GAAgB,EAA/B;AAEAmP,WAAW,CAACiB,OAAZ,GAAsBD,MAAtB;AACAhB,WAAW,CAACU,QAAZ,GAAuBM,MAAM,CAACgD,UAAP,CAAkB,IAAlB,CAAvB;AACAhE,WAAW,CAACc,MAAZ,GAAqB,EAArB;AACAd,WAAW,CAACmB,cAAZ,GAA6B,MAA7B;AACAnB,WAAW,CAACoB,eAAZ,GAA8B,GAA9B;AACApB,WAAW,CAACuB,mBAAZ,GAAkC,GAAlC;AACAvB,WAAW,CAAC4D,SAAZ,GAAwB,CACtB,MADsB;AAEtB,MAFsB,CAAxB;AAIA5D,WAAW,CAAC0D,eAAZ,GAA8B,CAC5B,MAD4B;AAE5B,MAF4B;AAG5B,MAH4B;AAI5B,MAJ4B;AAK5B,MAL4B;AAM5B,MAN4B;AAO5B,MAP4B;AAQ5B,MAR4B;AAS5B,MAT4B;AAU5B,MAV4B;AAW5B,MAX4B;AAY5B,MAZ4B;AAa5B,MAb4B;AAc5B,MAd4B,CAA9B;;IC3fMS;;;;;gBACSlE,IAAb,EAAmBxM,IAAnB,EAAyB;;;;;8EACjBA,IAAN;UACKU,IAAL,GAAY,MAAZ;UACK8L,IAAL,GAAYA,IAAZ;UACKmE,MAAL,GAAc,IAAd;UACKxQ,KAAL,GAAaH,IAAb;UAEK4Q,KAAL,GAAa,cAAb;UACKxQ,IAAL,GAAY,MAAZ;UACKyC,UAAL,GAAkB,MAAKC,cAAL,EAAlB;UAEK+N,YAAL,GAAoB,CAAC,CAArB;UACKC,QAAL,GAAgB,EAAhB;IACA/N,OAAO,CAACC,GAAR,CAAY,WAAZ;;;;;;iCAkBY;UACN7C,KAAK,GAAG,KAAKwQ,MAAnB;;UAEI,KAAKE,YAAL,KAAsB1Q,KAAK,CAACqJ,OAAhC,EAAyC;aAClCuH,KAAL,GAAa,IAAb;aACKF,YAAL,GAAoB1Q,KAAK,CAACqJ,OAA1B;;;UAGE,CAAC,KAAKuH,KAAV,EAAiB;;;;WAIZD,QAAL,GAAgBvE,WAAW,CAACa,WAAZ,CAAwB,KAAKZ,IAAL,IAAa,GAArC,EAA0CrM,KAA1C,EAAiDA,KAAK,CAACgJ,QAAvD,CAAhB;WACKyH,KAAL,GAAa,KAAKzQ,KAAL,CAAW2M,YAAX,EAAb;WAEKiE,KAAL,GAAa,KAAb;;;;8BAGS;;;4BAGF5P,MAAM;;;6BAGLtJ,GAAGC,GAAG;;;qCAGE;aACT;QACLgF,IAAI,EAAE,CADD;QAELE,GAAG,EAAE,CAFA;QAGLE,KAAK,EAAE,GAHF;QAILE,MAAM,EAAE;OAJV;;;;yBAQImD,IAAIC,IAAI;;;wBAnDD;aACJ,KAAKmQ,MAAZ;;sBAGSxQ,OAAO;MAChBA,KAAK,GAAGA,KAAK,IAAI,EAAjB;;UACIA,KAAK,YAAYoJ,SAArB,EAAgC;aACzBoH,MAAL,GAAcxQ,KAAd;OADF,MAEO;aACAwQ,MAAL,GAAc,IAAIpH,SAAJ,CAAcpJ,KAAd,CAAd;;;WAEG0Q,YAAL,GAAoB,CAAC,CAArB;WACKE,KAAL,GAAa,IAAb;;;;;EA7BevP;;ICFEwP;;;uBACNC,MAAb,EAAqB;;;SACdA,MAAL,GAAcA,MAAd;SACKpO,UAAL,GAAkB,KAAKC,cAAL,EAAlB;;;;;qCAGgB;UACZmO,MAAM,GAAG,KAAKA,MAAlB;UACEtK,IAAI,GAAGnL,GAAG,CAACyV,MAAD,EAAS,iBAAT,CAAH,IAAkC,CAD3C;UAEErK,IAAI,GAAGpL,GAAG,CAACyV,MAAD,EAAS,gBAAT,CAAH,IAAiC,CAF1C;UAGEpK,IAAI,GAAGtL,GAAG,CAAC0V,MAAD,EAAS,iBAAT,CAAH,IAAkC,CAH3C;UAIEnK,IAAI,GAAGvL,GAAG,CAAC0V,MAAD,EAAS,gBAAT,CAAH,IAAiC,CAJ1C;UAKE/T,KAAK,GAAG3B,GAAG,CAAC0V,MAAD,EAAS,kBAAT,CALb;UAME7T,MAAM,GAAG7B,GAAG,CAAC0V,MAAD,EAAS,mBAAT,CANd;aAQO;QACLnU,IAAI,EAAE6J,IADD;QAEL3J,GAAG,EAAE4J,IAFA;QAGL1J,KAAK,EAAEA,KAHF;QAILE,MAAM,EAAEA;OAJV;;;;iCAQYqE,YAAY;;;;8BAIf;YACH,2BAAN;;;;8BAGS;YACH,+BAAN;;;;2BAGM;YACA,+BAAN;;;;;;;ICnCiBzD;;;kBACNgC,IAAb,EAAmB;;;SACZkR,KAAL,GAAalR,IAAI,CAACkR,KAAlB;;QACI7S,OAAO,CAAC,KAAK6S,KAAN,CAAX,EAAyB;WAClBA,KAAL,GAAa,IAAIF,WAAJ,CAAgB,KAAKE,KAArB,CAAb;;;SAEG9Q,IAAL,GAAYJ,IAAI,CAACI,IAAL,KAAc5D,SAAd,GAA0BwD,IAAI,CAACI,IAA/B,GAAsC,SAAlD;SACK+Q,OAAL,GAAe3S,UAAU,CAACwB,IAAI,CAACoR,KAAN,CAAV,GAAyBpR,IAAI,CAACoR,KAA9B,GAAsC,KAAKA,KAA1D;SACKtR,QAAL,GAAgBtB,UAAU,CAACwB,IAAI,CAACpG,MAAN,CAAV,GAA0BoG,IAAI,CAACpG,MAA/B,GAAwC,KAAKA,MAA7D;SACKyX,UAAL,GAAkB;MAChBC,MAAM,EAAEtR,IAAI,CAACC,SAAL,CAAeqR,MADP;MAEhBC,KAAK,EAAEvR,IAAI,CAACC,SAAL,CAAesR,KAFN;MAGhBC,KAAK,EAAExR,IAAI,CAACC,SAAL,CAAeuR,KAHN;MAIhBC,MAAM,EAAEzR,IAAI,CAACC,SAAL,CAAewR,MAJP;MAKhB7Z,QAAQ,EAAE;QACRC,CAAC,EAAEmI,IAAI,CAACC,SAAL,CAAerI,QAAf,CAAwBC,CADnB;QAERC,CAAC,EAAEkI,IAAI,CAACC,SAAL,CAAerI,QAAf,CAAwBE;;KAP/B;SAWK0B,KAAL;;;;;4BAGO;;;6BAGC;;;4BAGD;WACF0X,KAAL,CAAWjR,SAAX,GAAuB,KAAKA,SAAL,GAAiByR,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKP,UAApB,CAAX,CAAxC;;;;;;;IC/BiBQ;;;+BACN9Y,OAAb,EAAsBoB,UAAtB,EAAkC2X,cAAlC,EAAkD;;;SAC3C/Y,OAAL,GAAeA,OAAf;SACKoB,UAAL,GAAkBA,UAAlB;SACK2X,cAAL,GAAsBA,cAAtB;;;;;2BAGMZ,OAAO;UACLnY,OADK,GACmC,IADnC,CACLA,OADK;UACIoB,UADJ,GACmC,IADnC,CACIA,UADJ;UACgB2X,cADhB,GACmC,IADnC,CACgBA,cADhB;;UAGTZ,KAAK,CAACxQ,IAAN,KAAe,MAAnB,EAA2B;QACzBqR,SAAS,CAAChZ,OAAD,EAAUmY,KAAV,EAAiB/W,UAAjB,EAA6B2X,cAA7B,CAAT;;;;;cAIMZ,KAAK,CAACxQ,IAAd;aACO,MAAL;UACEsR,iBAAiB,CAACjZ,OAAD,EAAUmY,KAAV,CAAjB;;;;aAEG,SAAL;UACEe,YAAY,CAAClZ,OAAD,EAAUmY,KAAV,CAAZ;;;;aAEG,UAAL;UACEgB,aAAa,CAACnZ,OAAD,EAAUmY,KAAV,CAAb;;;;aAEG,WAAL;UACEiB,cAAc,CAACpZ,OAAD,EAAUmY,KAAV,CAAd;;;;aAEG,QAAL;UACEkB,WAAW,CAACrZ,OAAD,EAAUmY,KAAV,CAAX;;;;;;;;MAMJmB,gBAAgB,CAACtZ,OAAD,EAAUmY,KAAV,CAAhB;;MACAoB,cAAc,CAACvZ,OAAD,EAAUmY,KAAV,CAAd;;MACAqB,aAAa,CAACxZ,OAAD,EAAUmY,KAAV,CAAb;;MACAsB,WAAW,CAACzZ,OAAD,EAAUmY,KAAV,CAAX;;;;;;;AAIJ,SAASmB,gBAAT,CAA2BtZ,OAA3B,EAAoCmY,KAApC,EAA2C;MACrCA,KAAK,CAAC5Q,MAAV,EAAkB;IAChBvH,OAAO,CAACoU,SAAR,GAAoB+D,KAAK,CAAC7Q,WAA1B;IACAtH,OAAO,CAAC0Z,OAAR,GAAkBvB,KAAK,CAACwB,aAAxB;IACA3Z,OAAO,CAAC4Z,cAAR,GAAyBzB,KAAK,CAAC0B,gBAA/B;IACA7Z,OAAO,CAAC8P,QAAR,GAAmBqI,KAAK,CAAC2B,cAAzB;IACA9Z,OAAO,CAAC+P,UAAR,GAAqBoI,KAAK,CAAC4B,gBAA3B;IACA/Z,OAAO,CAACga,WAAR,GAAsB7B,KAAK,CAAC5Q,MAA5B;;;;AAIJ,SAASgS,cAAT,CAAyBvZ,OAAzB,EAAkCmY,KAAlC,EAAyC;MACnCA,KAAK,CAAC9Q,IAAV,EAAgB;IACdrH,OAAO,CAACgV,SAAR,GAAoBmD,KAAK,CAAC9Q,IAA1B;;;;AAIJ,SAASmS,aAAT,CAAwBxZ,OAAxB,EAAiCmY,KAAjC,EAAwC;MAClC,CAACA,KAAK,CAAC5Q,MAAP,IAAiB4Q,KAAK,CAAC7Q,WAAN,KAAsB,CAA3C,EAA8C;;GADR;;;EAKtCtH,OAAO,CAACia,IAAR;EACAja,OAAO,CAACuH,MAAR;EACAvH,OAAO,CAACka,OAAR;;;AAGF,SAAST,WAAT,CAAsBzZ,OAAtB,EAA+B;EAC7BA,OAAO,CAACia,IAAR;EACAja,OAAO,CAACqH,IAAR;EACArH,OAAO,CAACka,OAAR;;;AAGF,SAAShB,YAAT,CAAsBlZ,OAAtB,EAA+BmY,KAA/B,EAAsC;MAChCpL,MAAM,GAAGoL,KAAK,CAACnL,QAAnB;MACEE,KADF;MAEIzC,GAAG,GAAGsC,MAAM,CAAClI,MAAjB;;MAEI,CAAC4F,GAAD,IAAQA,GAAG,KAAK,CAAhB,IAAqBO,KAAK,CAAC+B,MAAM,CAACtC,GAAG,GAAG,CAAP,CAAN,CAAgB1L,CAAjB,CAA9B,EAAmD;WAC1C,KAAP;;;EAGFiB,OAAO,CAACma,SAAR;EACAna,OAAO,CAACoa,MAAR,CAAerN,MAAM,CAAC,CAAD,CAAN,CAAUjO,CAAzB,EAA4BiO,MAAM,CAAC,CAAD,CAAN,CAAUhO,CAAtC;;OACK,IAAI4F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8F,GAApB,EAAyB9F,CAAC,EAA1B,EAA8B;IAC5BuI,KAAK,GAAGH,MAAM,CAACpI,CAAD,CAAd;IACA3E,OAAO,CAACqa,MAAR,CAAenN,KAAK,CAACpO,CAArB,EAAwBoO,KAAK,CAACnO,CAA9B;;;EAEFiB,OAAO,CAACsa,SAAR;;;AAGF,SAASnB,aAAT,CAAuBnZ,OAAvB,EAAgCmY,KAAhC,EAAuC;EACrCnY,OAAO,CAACma,SAAR;EACAna,OAAO,CAACsa,SAAR;;;AAGF,SAASlB,cAAT,CAAwBpZ,OAAxB,EAAiCmY,KAAjC,EAAwC;MAClCjK,EAAE,GAAGiK,KAAK,CAACjK,EAAN,GAAW3L,IAAI,CAACE,GAAL,CAAS0V,KAAK,CAACjK,EAAf,EAAmBiK,KAAK,CAAChU,KAAN,GAAc,CAAjC,CAAX,GAAiD,CAA1D;MACEgK,EAAE,GAAGgK,KAAK,CAAChK,EAAN,GAAW5L,IAAI,CAACE,GAAL,CAAS0V,KAAK,CAAChK,EAAf,EAAmBgK,KAAK,CAAC9T,MAAN,GAAe,CAAlC,CAAX,GAAkD,CADzD;MAEEkW,CAAC,GAAGpC,KAAK,CAAChU,KAFZ;MAGE8E,CAAC,GAAGkP,KAAK,CAAC9T,MAHZ;MAIEmW,SAAS,GAAGtM,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAJjC;;;EAME9C,CAAC,GAAG,IAAI,YANV;EAQArL,OAAO,CAACma,SAAR;EACAna,OAAO,CAACoa,MAAR,CAAelM,EAAf,EAAmB,CAAnB;EAEAlO,OAAO,CAACqa,MAAR,CAAeE,CAAC,GAAGrM,EAAnB,EAAuB,CAAvB;EACAsM,SAAS,IAAIxa,OAAO,CAACya,aAAR,CAAsBF,CAAC,GAAGlP,CAAC,GAAG6C,EAA9B,EAAkC,CAAlC,EAAqCqM,CAArC,EAAwClP,CAAC,GAAG8C,EAA5C,EAAgDoM,CAAhD,EAAmDpM,EAAnD,CAAb;EAEAnO,OAAO,CAACqa,MAAR,CAAeE,CAAf,EAAkBtR,CAAC,GAAGkF,EAAtB;EACAqM,SAAS,IAAIxa,OAAO,CAACya,aAAR,CAAsBF,CAAtB,EAAyBtR,CAAC,GAAGoC,CAAC,GAAG8C,EAAjC,EAAqCoM,CAAC,GAAGlP,CAAC,GAAG6C,EAA7C,EAAiDjF,CAAjD,EAAoDsR,CAAC,GAAGrM,EAAxD,EAA4DjF,CAA5D,CAAb;EAEAjJ,OAAO,CAACqa,MAAR,CAAenM,EAAf,EAAmBjF,CAAnB;EACAuR,SAAS,IAAIxa,OAAO,CAACya,aAAR,CAAsBpP,CAAC,GAAG6C,EAA1B,EAA8BjF,CAA9B,EAAiC,CAAjC,EAAoCA,CAAC,GAAGoC,CAAC,GAAG8C,EAA5C,EAAgD,CAAhD,EAAmDlF,CAAC,GAAGkF,EAAvD,CAAb;EAEAnO,OAAO,CAACqa,MAAR,CAAe,CAAf,EAAkBlM,EAAlB;EACAqM,SAAS,IAAIxa,OAAO,CAACya,aAAR,CAAsB,CAAtB,EAAyBpP,CAAC,GAAG8C,EAA7B,EAAiC9C,CAAC,GAAG6C,EAArC,EAAyC,CAAzC,EAA4CA,EAA5C,EAAgD,CAAhD,CAAb;EAEAlO,OAAO,CAACsa,SAAR;;;AAGF,SAASjB,WAAT,CAAqBrZ,OAArB,EAA8BmY,KAA9B,EAAqC;EACnCnY,OAAO,CAACma,SAAR;EACAna,OAAO,CAAC0a,GAAR,CAAY,CAAZ,EAAe,CAAf,EAAkBvC,KAAK,CAACvP,MAAxB,EAAgC,CAAhC,EAAmC,IAAIrG,IAAI,CAAC0M,EAA5C;EACAjP,OAAO,CAACsa,SAAR;;;AAGF,SAASrB,iBAAT,CAA2BjZ,OAA3B,EAAoCmY,KAApC,EAA2C;MACjCxO,IADiC,GACxBwO,KADwB,CACjCxO,IADiC;MAErCgR,OAAJ;MACEC,AACAC,aAAa,GAAG,CAFlB;MAGEC,aAAa,GAAG,CAHlB;MAIEhc,CAAC,GAAG,CAJN;MAKEC,CAAC,GAAG,CALN;EAWAiB,OAAO,CAACma,SAAR;;OAEK,IAAIxV,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGd,IAAI,CAAC9E,MAA3B,EAAmCF,CAAC,GAAG8F,GAAvC,EAA4C9F,CAAC,EAA7C,EAAiD;IAC/CgW,OAAO,GAAGhR,IAAI,CAAChF,CAAD,CAAd;;YAEQgW,OAAO,CAAC,CAAD,CAAf;WACO,GAAL;;;;WAEK,GAAL;;QACE7b,CAAC,GAAG6b,OAAO,CAAC,CAAD,CAAX;QACA5b,CAAC,GAAG4b,OAAO,CAAC,CAAD,CAAX;QACA3a,OAAO,CAACqa,MAAR,CAAevb,CAAf,EAAkBC,CAAlB;;;WAEG,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;QACED,CAAC,GAAG6b,OAAO,CAAC,CAAD,CAAX;QACA5b,CAAC,GAAG4b,OAAO,CAAC,CAAD,CAAX;QACAE,aAAa,GAAG/b,CAAhB;QACAgc,aAAa,GAAG/b,CAAhB;QACAiB,OAAO,CAACoa,MAAR,CAAetb,CAAf,EAAkBC,CAAlB;;;WAEG,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;;;;WAEK,GAAL;WACK,GAAL;QACED,CAAC,GAAG+b,aAAJ;QACA9b,CAAC,GAAG+b,aAAJ;QACA9a,OAAO,CAACsa,SAAR;;;AAIL;;;AAGH,SAAStB,SAAT,CAAoBhZ,OAApB,EAA6BmY,KAA7B,EAAoC/W,UAApC,EAAgD2X,cAAhD,EAAgE;EAC9D/Y,OAAO,CAACma,SAAR;EAEAhC,KAAK,CAAC4C,UAAN;MAEQhD,QALsD,GAKlCI,KALkC,CAKtDJ,QALsD;MAK5C3Q,KAL4C,GAKlC+Q,KALkC,CAK5C/Q,KAL4C;MAMxDjD,KAAK,GAAG4T,QAAQ,CAAC5T,KAAvB;MACME,MAAM,GAAG0T,QAAQ,CAAC1T,MAAxB;MACMqP,KAAK,GAAGqE,QAAQ,CAACrE,KAAvB;MACM7D,UAAU,GAAGkI,QAAQ,CAAClI,UAA5B;MACM8D,UAAU,GAAGoE,QAAQ,CAACpE,UAA5B;MACMC,YAAY,GAAGmE,QAAQ,CAACnE,YAA9B;MACMC,cAAc,GAAGkE,QAAQ,CAAClE,cAAhC;EAEA7T,OAAO,CAAC8T,IAAR,GAAeqE,KAAK,CAACN,KAArB;EACA7X,OAAO,CAACoU,SAAR,GAAoBhN,KAAK,CAAC6I,eAA1B;EACAjQ,OAAO,CAACkQ,YAAR,GAAuB9I,KAAK,CAAC8I,YAA7B;EACAlQ,OAAO,CAAC8P,QAAR,GAAmB1I,KAAK,CAAC0I,QAAzB;EACA9P,OAAO,CAAC+P,UAAR,GAAqB3I,KAAK,CAAC2I,UAA3B;MAEIiL,aAAJ;MACIC,aAAJ;EAEAjb,OAAO,CAACgV,SAAR,GAAoBkG,kBAAkB,CAAC9T,KAAD,EAAQsM,KAAR,EAAevP,KAAf,EAAsBE,MAAtB,CAAtC;EACArE,OAAO,CAACga,WAAR,GAAsB5S,KAAK,CAACG,MAA5B;;MAEIH,KAAK,CAAC0H,UAAV,EAAsB;IACpB9O,OAAO,CAACmb,WAAR,GAAsB/T,KAAK,CAAC+H,eAA5B;IACAnP,OAAO,CAACob,UAAR,GAAqBhU,KAAK,CAAC8H,cAA3B;IACAlP,OAAO,CAACqb,aAAR,GAAwB9Y,IAAI,CAAC+Y,GAAL,CAASlU,KAAK,CAAC4H,eAAf,IAAkC5H,KAAK,CAACgI,kBAAxC,GAA6D2J,cAAc,CAACwC,OAAf,EAArF;IACAvb,OAAO,CAACwb,aAAR,GAAyBjZ,IAAI,CAACkZ,GAAL,CAASrU,KAAK,CAAC4H,eAAf,IAAkC5H,KAAK,CAACgI,kBAAzC,GAA+D2J,cAAc,CAACwC,OAAf,EAAvF;;;OAGG,IAAI5W,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+O,KAAK,CAAC7O,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;IACrCqW,aAAa,GAAG5T,KAAK,CAAC6I,eAAN,GAAwB,CAAxC;IACAgL,aAAa,GAAK7T,KAAK,CAAC6I,eAAN,GAAwB,CAAzB,GAA+BtL,CAAC,GAAGkL,UAApC,GAAmDgE,cAAc,CAACI,MAAlF;;QAEI7M,KAAK,CAACwH,KAAN,KAAgB,OAApB,EAA6B;MAC3BoM,aAAa,IAAIpH,YAAY,GAAGD,UAAU,CAAChP,CAAD,CAA1C;KADF,MAEO,IAAIyC,KAAK,CAACwH,KAAN,KAAgB,QAApB,EAA8B;MACnCoM,aAAa,IAAI,CAACpH,YAAY,GAAGD,UAAU,CAAChP,CAAD,CAA1B,IAAiC,CAAlD;;;QAGEyC,KAAK,CAACG,MAAN,IAAgBH,KAAK,CAAC6I,eAA1B,EAA2C;MACzCyL,kBAAkB,CAChB1b,OADgB,EAEhB0T,KAAK,CAAC/O,CAAD,CAFW,EAGhByC,KAHgB,EAIhB4T,aAAa,GAAG5T,KAAK,CAAC4I,OAJN,EAKhBiL,aAAa,GAAG7T,KAAK,CAAC4I,OALN,EAMhB,IANgB,CAAlB;;;QAUE5I,KAAK,CAACC,IAAV,EAAgB;MACdqU,kBAAkB,CAChB1b,OADgB,EAEhB0T,KAAK,CAAC/O,CAAD,CAFW,EAGhByC,KAHgB,EAIhB4T,aAAa,GAAG5T,KAAK,CAAC4I,OAJN,EAKhBiL,aAAa,GAAG7T,KAAK,CAAC4I,OALN,CAAlB;;;;EAUJhQ,OAAO,CAACsa,SAAR;;;;;;;;;;;;;AAYF,SAASY,kBAAT,CAA6B9T,KAA7B,EAAoCsM,KAApC,EAA2CvP,KAA3C,EAAkDE,MAAlD,EAA0D;MACpD,CAACyM,KAAK,CAACxL,OAAN,CAAc8B,KAAK,CAACC,IAApB,CAAL,EAAgC;WACvBD,KAAK,CAACC,IAAb;GADF,MAEO,IAAID,KAAK,CAACC,IAAN,CAAWxC,MAAX,KAAsB,CAA1B,EAA6B;WAC3BuC,KAAK,CAACC,IAAN,CAAW,CAAX,CAAP;GAJsD;;;;MASpDsU,QAAJ;MACIC,eAAJ;MACIC,gBAAJ;MACIpG,IAAJ,CAZwD;;MAelDpO,IAAI,GAAGD,KAAK,CAACC,IAAN,CAAWqD,KAAX,EAAb;MACM4E,iBAAiB,GAAGlI,KAAK,CAACkI,iBAAN,CAAwB5E,KAAxB,EAA1B,CAhBwD;;MAmBpD,CAAC4E,iBAAiB,CAACzK,MAAvB,EAA+B;QACvBiX,WAAW,GAAGzU,IAAI,CAACxC,MAAL,GAAc,CAAlC;;SAEK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmX,WAApB,EAAiC,EAAEnX,CAAnC,EAAsC;MACpC2K,iBAAiB,CAACjK,IAAlB,CAAuBV,CAAC,GAAGmX,WAA3B;;GAvBoD;;;;EA6BxDzU,IAAI,CAAC0U,OAAL,CAAa3U,KAAK,CAACC,IAAN,CAAW,CAAX,CAAb;EACAiI,iBAAiB,CAACyM,OAAlB,CAA0B,CAA1B;EAEA1U,IAAI,CAAChC,IAAL,CAAU+B,KAAK,CAACC,IAAN,CAAWD,KAAK,CAACC,IAAN,CAAWxC,MAAX,GAAoB,CAA/B,CAAV;EACAyK,iBAAiB,CAACjK,IAAlB,CAAuB,CAAvB;;MAEI+B,KAAK,CAACiI,gBAAN,KAA2BhB,aAAa,CAACC,eAA7C,EAA8D;;IAE5DqN,QAAQ,GAAG,KAAK3b,OAAL,CAAagc,oBAAb,CAAkC7X,KAAK,GAAG,CAA1C,EAA6C,CAA7C,EAAgDA,KAAK,GAAG,CAAxD,EAA2DE,MAA3D,CAAX,CAF4D;;;IAM5DuX,eAAe,GAAG,CAACvU,IAAI,CAACxC,MAAL,GAAc,CAAf,IAAoB6O,KAAK,CAAC7O,MAA5C;IACAgX,gBAAgB,GAAG,CAAnB;;SACK,IAAIlX,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG+O,KAAK,CAAC7O,MAA1B,EAAkCF,EAAC,EAAnC,EAAuC;MACrCkX,gBAAgB,IAAI,CAApB;;WACK,IAAIxV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgB,IAAI,CAACxC,MAAzB,EAAiCwB,CAAC,EAAlC,EAAsC;YAChC,OAAOiJ,iBAAiB,CAACjJ,CAAD,CAAxB,KAAgC,QAApC,EAA8C;UAC5CoP,IAAI,GAAInG,iBAAiB,CAACjJ,CAAD,CAAjB,GAAuBqN,KAAK,CAAC7O,MAA9B,GAAyCF,EAAC,GAAG+O,KAAK,CAAC7O,MAA1D;SADF,MAEO;UACL4Q,IAAI,GAAGoG,gBAAgB,GAAGD,eAA1B;;;QAEFD,QAAQ,CAACM,YAAT,CAAsBxG,IAAtB,EAA4BpO,IAAI,CAAChB,CAAD,CAAhC;QACAwV,gBAAgB;;;GAjBtB,MAoBO;;IAELF,QAAQ,GAAG,KAAK3b,OAAL,CAAagc,oBAAb,CAAkC,CAAlC,EAAqC3X,MAAM,GAAG,CAA9C,EAAiDF,KAAjD,EAAwDE,MAAM,GAAG,CAAjE,CAAX,CAFK;;;IAMLuX,eAAe,GAAGvU,IAAI,CAACxC,MAAL,GAAc,CAAhC;IACAgX,gBAAgB,GAAG,CAAnB;;SAEK,IAAIlX,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAG0C,IAAI,CAACxC,MAAzB,EAAiCF,GAAC,EAAlC,EAAsC;UAChC,OAAO2K,iBAAiB,CAAC3K,GAAD,CAAxB,KAAgC,QAApC,EAA8C;QAC5C8Q,IAAI,GAAGnG,iBAAiB,CAAC3K,GAAD,CAAxB;OADF,MAEO;QACL8Q,IAAI,GAAGoG,gBAAgB,GAAGD,eAA1B;;;MAEFD,QAAQ,CAACM,YAAT,CAAsBxG,IAAtB,EAA4BpO,IAAI,CAAC1C,GAAD,CAAhC;MACAkX,gBAAgB;;;;SAIbF,QAAP;;;;;;;;;;;;;AAYF,SAASD,kBAAT,CAA6B1b,OAA7B,EAAsCyT,IAAtC,EAA4CrM,KAA5C,EAAmDtI,CAAnD,EAAsDC,CAAtD,EAA2E;MAAlBmd,QAAkB,uEAAP,KAAO;;MAEnEtM,aAAa,GAAGxI,KAAK,CAACwI,aAA5B;;MAEIA,aAAa,KAAK,CAAtB,EAAyB;QACnBsM,QAAJ,EAAc;MACZlc,OAAO,CAACmc,UAAR,CAAmB1I,IAAnB,EAAyB3U,CAAzB,EAA4BC,CAA5B;KADF,MAEO;MACLiB,OAAO,CAACkV,QAAR,CAAiBzB,IAAjB,EAAuB3U,CAAvB,EAA0BC,CAA1B;;;;;;MAMAqd,eAAe,GAAGtd,CAAtB,CAdyE;;;;;;;MAsBnEud,WAAW,GAAGvL,KAAK,CAACwL,IAAN,GAAaxL,KAAK,CAACwL,IAAN,CAAW7I,IAAX,CAAb,GAAgCA,IAAI,CAAC3N,KAAL,CAAW,EAAX,CAApD;MACIyW,aAAa,GAAGvc,OAAO,CAACqU,WAAR,CAAoBZ,IAApB,EAA0BtP,KAA9C;MACIqY,YAAY,GAAG,CAAnB;;OAEK,IAAI7X,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0X,WAAW,CAACxX,MAAhC,EAAwC,EAAEF,CAA1C,EAA6C;QACrC8X,WAAW,GAAGJ,WAAW,CAAC1X,CAAD,CAA/B;;QAEIuX,QAAJ,EAAc;MACZlc,OAAO,CAACmc,UAAR,CAAmBM,WAAnB,EAAgCL,eAAhC,EAAiDrd,CAAjD;KADF,MAEO;MACLiB,OAAO,CAACkV,QAAR,CAAiBuH,WAAjB,EAA8BL,eAA9B,EAA+Crd,CAA/C;;;IAEFyd,YAAY,GAAGxc,OAAO,CAACqU,WAAR,CAAoBZ,IAAI,CAACiJ,SAAL,CAAe/X,CAAC,GAAG,CAAnB,CAApB,EAA2CR,KAA1D;IACAiY,eAAe,IAAIG,aAAa,GAAGC,YAAhB,GAA+B5M,aAAlD;IACA2M,aAAa,GAAGC,YAAhB;;;;AClZJ,IAAMG,OAAO,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAhB;;IAEqBC;;;0BACN3V,IAAb,EAAmB;;;sBAC4CA,IAD5C,CACT9C,KADS;QACTA,KADS,4BACD,GADC;uBAC4C8C,IAD5C,CACI5C,MADJ;QACIA,MADJ,6BACa,GADb;wBAC4C4C,IAD5C,CACkB4V,OADlB;QACkBA,OADlB,8BAC4B,WAD5B;SAGZrI,MAAL,GAAcsI,aAAa,EAA3B;SACK9c,OAAL,GAAe,KAAKwU,MAAL,CAAYgD,UAAZ,CAAuB,IAAvB,CAAf;SACKuF,iBAAL,GAAyBJ,OAAzB;SAEKvb,UAAL,GAAkB4b,cAAc,CAAC,KAAKxI,MAAN,CAAhC;SACKyI,aAAL,GAAqB,IAAInE,mBAAJ,CAAwB,KAAK9Y,OAA7B,EAAsC,KAAKoB,UAA3C,EAAuD,IAAvD,CAArB;SACKoT,MAAL,CAAY0I,YAAZ,CAAyB,kBAAzB,EAA6C,KAAKC,WAAlD;SACKnd,OAAL,CAAaf,KAAb,CAAmB,KAAKmC,UAAxB,EAAoC,KAAKA,UAAzC;SAEKoT,MAAL,CAAYrQ,KAAZ,GAAoBA,KAAK,GAAG,KAAK/C,UAAjC;SACKoT,MAAL,CAAYnQ,MAAZ,GAAqBA,MAAM,GAAG,KAAKjD,UAAnC;SACKoT,MAAL,CAAYpN,KAAZ,CAAkBjD,KAAlB,GAA0BA,KAAK,GAAG,IAAlC;SACKqQ,MAAL,CAAYpN,KAAZ,CAAkB/C,MAAlB,GAA2BA,MAAM,GAAG,IAApC;SACKmQ,MAAL,CAAYpN,KAAZ,CAAkBgW,eAAlB,GAAoCP,OAApC;;;;;8BAWS;aACF,KAAKE,iBAAL,CAAuB,CAAvB,CAAP;;;;yCAGoBM,KAAK;WACpBN,iBAAL,GAAyBM,GAAzB;;;;qCAGgB;WACXC,oBAAL,CAA0BX,OAA1B;;;;gCAGWzP,OAAOZ,OAAO;UACrBiR,MAAM,GAAGrQ,KAAb;UAAoBmQ,GAAG,GAAG,KAAKN,iBAAL,CAAuBrS,KAAvB,CAA6B,CAA7B,CAA1B;MACAwC,KAAK,GAAGsQ,eAAe,CAACtQ,KAAD,EAAQuQ,gBAAgB,CAAC,KAAKV,iBAAN,CAAxB,CAAvB;MACAM,GAAG,CAAC,CAAD,CAAH,GAAS/Q,KAAT;MACA+Q,GAAG,CAAC,CAAD,CAAH,GAAS/Q,KAAT;;UACIoR,KAAK,GAAGF,eAAe,CAACtQ,KAAD,EAAQmQ,GAAR,CAA3B;;MACAA,GAAG,CAAC,CAAD,CAAH,IAAUE,MAAM,CAACze,CAAP,GAAW4e,KAAK,CAAC5e,CAA3B;MACAue,GAAG,CAAC,CAAD,CAAH,IAAUE,MAAM,CAACxe,CAAP,GAAW2e,KAAK,CAAC3e,CAA3B;WAEKue,oBAAL,CAA0BD,GAA1B;;;;8BAGSre,QAAQ;UACbqe,GAAG,GAAG,KAAKN,iBAAL,CAAuBrS,KAAvB,CAA6B,CAA7B,CAAV;MAEA2S,GAAG,CAAC,CAAD,CAAH,IAAUre,MAAM,CAACF,CAAjB;MACAue,GAAG,CAAC,CAAD,CAAH,IAAUre,MAAM,CAACD,CAAjB;WAEKue,oBAAL,CAA0BD,GAA1B;;;;2BAGM1W,SAAS;UACP3G,OADO,GACiB,IADjB,CACPA,OADO;UACEoB,UADF,GACiB,IADjB,CACEA,UADF;UAEXic,GAAG,GAAG,KAAKN,iBAAf;MACA/c,OAAO,CAACia,IAAR;MACAja,OAAO,CAACkH,SAAR,CACEmW,GAAG,CAAC,CAAD,CAAH,GAASjc,UADX,EAEEic,GAAG,CAAC,CAAD,CAFL,EAGEA,GAAG,CAAC,CAAD,CAHL,EAIEA,GAAG,CAAC,CAAD,CAAH,GAASjc,UAJX,EAKEic,GAAG,CAAC,CAAD,CALL,EAMEA,GAAG,CAAC,CAAD,CANL;;MAQAM,cAAc,CAAC1b,IAAf,CAAoB,IAApB,EAA0B,KAAKjC,OAA/B,EAAwC2G,OAAxC;;MACA3G,OAAO,CAACka,OAAR;MACAxU,MAAM,CAACY,OAAP,CAAe,UAAf,EAA2B,KAAKtG,OAAhC;;;;4BAGO;WACFA,OAAL,CAAa4d,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,KAAKzZ,KAAlC,EAAyC,KAAKE,MAA9C;;;;wBA3DW;aACJ,KAAKmQ,MAAL,CAAYrQ,KAAnB;;;;wBAGY;aACL,KAAKqQ,MAAL,CAAYnQ,MAAnB;;;;;;;AA0DJ,SAASyY,aAAT,GAA0B;MACpBtI,MAAM,GAAGtR,QAAQ,CAACuU,aAAT,CAAuB,QAAvB,CAAb;EACAjD,MAAM,CAACqJ,aAAP,GAAuBb,cAAc,CAACc,IAAf,CAAoB,IAApB,EAA0BtJ,MAA1B,CAAvB;SACOA,MAAP;;;;;;;AAMF,SAASwI,cAAT,CAAyBxI,MAAzB,EAAiC;MAC3BxU,OAAO,GAAGwU,MAAM,CAACgD,UAAP,CAAkB,IAAlB,CAAd;MACEuG,gBAAgB,GAAGxa,MAAM,CAACwa,gBAAP,IAA2B,CADhD;MAEEC,sBAAsB,GAAGhe,OAAO,CAACie,4BAAR,IAAwCje,OAAO,CAACke,yBAAhD,IACzBle,OAAO,CAACme,wBADiB,IAEzBne,OAAO,CAACoe,uBAFiB,IAGzBpe,OAAO,CAACge,sBAHiB,IAGS,CALpC;SAOOD,gBAAgB,GAAGC,sBAA1B;;;;;;;AAMF,SAASL,cAAT,CAAyB3d,OAAzB,EAAkC2G,OAAlC,EAA2C;;;EACzCA,OAAO,GAAGA,OAAO,IAAI,EAArB;EAEAA,OAAO,CAACE,OAAR,CAAgB,UAAAZ,MAAM,EAAI;QAClBiB,SAAS,GAAGjB,MAAM,CAACiB,SAAzB;4BACwDA,SAFhC,CAEhBqR,MAFgB;QAEhBA,MAFgB,kCAEP,CAFO;2BAEgCrR,SAFhC,CAEJsR,KAFI;QAEJA,KAFI,iCAEI,CAFJ;2BAEgCtR,SAFhC,CAEOuR,KAFP;QAEOA,KAFP,iCAEe,CAFf;4BAEgCvR,SAFhC,CAEkBwR,MAFlB;QAEkBA,MAFlB,kCAE2B,CAF3B;8BAGKxR,SAAS,CAACrI,QAHf;QAGbsO,IAHa,uBAGhBrO,CAHgB;QAGJsO,IAHI,uBAGPrO,CAHO;IAKxBiB,OAAO,CAACia,IAAR;IACAja,OAAO,CAACkH,SAAR,CAAkBqR,MAAlB,EAA0BC,KAA1B,EAAiCC,KAAjC,EAAwCC,MAAxC,EAAgDvL,IAAhD,EAAsDC,IAAtD;;QAEInH,MAAM,CAACkS,KAAP,YAAwBF,WAA5B,EAAyC;MACvChS,MAAM,CAACkS,KAAP,CAAaD,MAAb,CAAoBrR,OAApB,CAA4B,UAAAsR,KAAK,EAAI;QACnCkG,YAAY,CAACpc,IAAb,CAAkB,KAAlB,EAAwBkW,KAAxB;OADF;KADF,MAIO;MACLkG,YAAY,CAACpc,IAAb,CAAkB,KAAlB,EAAwBgE,MAAM,CAACkS,KAA/B;;;IAGFnY,OAAO,CAACka,OAAR;GAhBF;;;AAoBF,SAASmE,YAAT,CAAuBlG,KAAvB,EAA8B;OACvB8E,aAAL,CAAmBqB,MAAnB,CAA0BnG,KAA1B;;;AAGF,SAASqF,eAAT,CAA0BxR,CAA1B,EAA6B1C,CAA7B,EAAgCiV,YAAhC,EAA8C;MACxCA,YAAJ,EAAkB;WACT,IAAIC,OAAJ,CACLlV,CAAC,CAAC,CAAD,CAAD,GAAO0C,CAAC,CAAClN,CAAT,GAAawK,CAAC,CAAC,CAAD,CAAD,GAAO0C,CAAC,CAACjN,CADjB,EAELuK,CAAC,CAAC,CAAD,CAAD,GAAO0C,CAAC,CAAClN,CAAT,GAAawK,CAAC,CAAC,CAAD,CAAD,GAAO0C,CAAC,CAACjN,CAFjB,CAAP;;;SAKK,IAAIyf,OAAJ,CACLlV,CAAC,CAAC,CAAD,CAAD,GAAO0C,CAAC,CAAClN,CAAT,GAAawK,CAAC,CAAC,CAAD,CAAD,GAAO0C,CAAC,CAACjN,CAAtB,GAA0BuK,CAAC,CAAC,CAAD,CADtB,EAELA,CAAC,CAAC,CAAD,CAAD,GAAO0C,CAAC,CAAClN,CAAT,GAAawK,CAAC,CAAC,CAAD,CAAD,GAAO0C,CAAC,CAACjN,CAAtB,GAA0BuK,CAAC,CAAC,CAAD,CAFtB,CAAP;;;AAMF,SAASmU,gBAAT,CAA2BnU,CAA3B,EAA8B;MACxBC,CAAC,GAAG,KAAKD,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAR,GAAcA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAA3B,CAAR;MACEmV,CAAC,GAAG,CAAClV,CAAC,GAAGD,CAAC,CAAC,CAAD,CAAN,EAAW,CAACC,CAAD,GAAKD,CAAC,CAAC,CAAD,CAAjB,EAAsB,CAACC,CAAD,GAAKD,CAAC,CAAC,CAAD,CAA5B,EAAiCC,CAAC,GAAGD,CAAC,CAAC,CAAD,CAAtC,CADN;MAEEoV,CAAC,GAAGlB,eAAe,CAAC;IAAE1e,CAAC,EAAEwK,CAAC,CAAC,CAAD,CAAN;IAAWvK,CAAC,EAAEuK,CAAC,CAAC,CAAD;GAAhB,EAAuBmV,CAAvB,EAA0B,IAA1B,CAFrB;;EAGAA,CAAC,CAAC,CAAD,CAAD,GAAO,CAACC,CAAC,CAAC5f,CAAV;EACA2f,CAAC,CAAC,CAAD,CAAD,GAAO,CAACC,CAAC,CAAC3f,CAAV;SACO0f,CAAP;;;AC7JF,IAAIE,QAAQ,GAAG,EAAf;;AAEAA,QAAQ,CAACjgB,MAAT,GAAkB,UAACkgB,EAAD,EAAK3X,IAAL,EAAc;MAC1BxH,QAAQ,GAAG,IAAImd,cAAJ,CAAmB3V,IAAnB,CAAf;EAEA2X,EAAE,CAACC,MAAH,CAAUpf,QAAQ,CAAC+U,MAAnB;SAEO/U,QAAP;CALF;;ACGA,IAAIqf,SAAJ,EAAeC,YAAf,EAA6BC,aAA7B;;AACA,IAAI,OAAOzb,MAAP,KAAkB,WAAtB,EAAmC;EACjCub,SAAS,GAAGvb,MAAM,CAAC0b,qBAAP,IAAgC1b,MAAM,CAAC2b,2BAAvC,IAAsE3b,MAAM,CAAC4b,wBAA7E,IAAyG5b,MAAM,CAAC6b,uBAAhH,IAA2I7b,MAAM,CAAC8b,sBAAlJ,IAA4K,UAAUtd,QAAV,EAAoB;QACtMud,IAAI,GAAG,IAAX;QAAiBjH,KAAjB;QAAwBkH,MAAxB;IAEAP,aAAa,GAAGzb,MAAM,CAACic,UAAP,CAAkB,YAAY;MAC5CnH,KAAK,GAAG,CAAC,IAAIoH,IAAJ,EAAT;MACA1d,QAAQ,CAACsW,KAAD,CAAR;MACAkH,MAAM,GAAG,CAAC,IAAIE,IAAJ,EAAV;MACAH,IAAI,CAACI,OAAL,GAAe,OAAO,EAAP,IAAaH,MAAM,GAAGlH,KAAtB,CAAf;KAJc,EAKbiH,IAAI,CAACI,OALQ,CAAhB;GAHF;;EAWAX,YAAY,GAAGxb,MAAM,CAACoc,oBAAP,IAA+Bpc,MAAM,CAACqc,uBAAtC,IAAiE,YAAY;IAC1Frc,MAAM,CAACsc,YAAP,CAAoBb,aAApB;GADF;;;AAKF,IAAIc,MAAM,GAAG,EAAb;;AAEAA,MAAM,CAACphB,MAAP,GAAgB,UAACkgB,EAAD,EAAK3X,IAAL,EAAc;MACxBtI,IAAI,GAAG,EAAX;EACAA,IAAI,CAACigB,EAAL,GAAUA,EAAV;EACAjgB,IAAI,CAACmI,MAAL,GAAc,MAAd;EACAnI,IAAI,CAACohB,aAAL,GAAqB,GAArB;EAEAra,MAAM,CAAChH,MAAP,CAAcC,IAAd;EAEAA,IAAI,CAACc,QAAL,GAAgBkf,QAAQ,CAACjgB,MAAT,CACdkgB,EADc,EAEd3X,IAFc,CAAhB;EAKAtI,IAAI,CAACqhB,IAAL,GAAYrhB,IAAI,CAACc,QAAL,CAAc+U,MAA1B;EAEA7V,IAAI,CAACU,KAAL,GAAa0B,KAAK,CAACrC,MAAN,CAAaC,IAAI,CAACqhB,IAAlB,CAAb;EAEArhB,IAAI,CAACC,MAAL,GAAcH,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAd;EAEAA,IAAI,CAAC+H,KAAL,GAAaD,KAAK,CAAC/H,MAAN,CAAaC,IAAb,CAAb;;EAEAA,IAAI,CAAC0Z,KAAL,GAAa,YAAM;IACjBhY,IAAI,CAACC,SAAL,GAAiB,CAAjB;IACAwf,MAAM,CAACG,GAAP,CAAWthB,IAAX;IACAA,IAAI,CAACmI,MAAL,GAAc,SAAd;GAHF;;EAMAnI,IAAI,CAACuhB,OAAL,GAAe,YAAM;IACnBJ,MAAM,CAACrf,KAAP,CAAa9B,IAAb;IACAA,IAAI,CAAC0Z,KAAL;GAFF;;EAKA1Z,IAAI,CAACwhB,KAAL,GAAa,YAAM;QACbxhB,IAAI,CAACmI,MAAL,KAAgB,SAApB,EAA+B;MAC7BzG,IAAI,CAACC,SAAL,GAAiB,CAAjB;MACA3B,IAAI,CAACmI,MAAL,GAAc,QAAd;;GAHJ;;EAOAnI,IAAI,CAACyhB,MAAL,GAAc,YAAM;QACdzhB,IAAI,CAACmI,MAAL,KAAgB,QAApB,EAA8B;MAC5BzG,IAAI,CAACC,SAAL,GAAiB,CAAjB;MACA3B,IAAI,CAACmI,MAAL,GAAc,SAAd;;GAHJ;;EAOAnI,IAAI,CAAC8W,IAAL,GAAY,YAAM;IAChBqK,MAAM,CAACrf,KAAP,CAAa9B,IAAb;IACAA,IAAI,CAACmI,MAAL,GAAc,MAAd;GAFF;;EAKAgZ,MAAM,CAACrf,KAAP,CAAa9B,IAAb;EAEA+G,MAAM,CAACpG,EAAP,CAAU,WAAV,EAAuB,UAAC2G,MAAD,EAAY;IACjCtH,IAAI,CAACc,QAAL,CAAc6e,MAAd,CAAqB,CAACrY,MAAD,CAArB;GADF;SAIOtH,IAAP;CAzDF;;AA4DAmhB,MAAM,CAACrf,KAAP,GAAe,UAAC9B,IAAD,EAAU;EACvBogB,YAAY,CAACpgB,IAAI,CAAC0hB,QAAN,CAAZ;;EACAhgB,IAAI,CAACI,KAAL;EACA9B,IAAI,CAAC0hB,QAAL,GAAgB,IAAhB;EACA1hB,IAAI,CAAC+H,KAAL,CAAWjG,KAAX;EACA9B,IAAI,CAACc,QAAL,CAAcM,KAAd;EACApB,IAAI,CAACc,QAAL,CAAc6e,MAAd,CAAqB3f,IAAI,CAAC+H,KAAL,CAAWC,OAAhC;CANF;;AASAmZ,MAAM,CAACG,GAAP,GAAa,UAACthB,IAAD,EAAU;MACjBA,IAAI,CAAC0hB,QAAT,EAAmB;IACjB1hB,IAAI,CAAC8W,IAAL;;;EAGF9W,IAAI,CAAC0hB,QAAL,GAAgBvB,SAAS,CAAC,UAAChe,SAAD;WAAewf,IAAI,CAACre,IAAL,CAAU,IAAV,EAAgBnB,SAAhB,CAAf;GAAD,CAAzB;;WAESwf,IAAT,CAAexf,SAAf,EAA0B;IACxB4E,MAAM,CAACY,OAAP,CAAe,MAAf,EAAuBxF,SAAvB;IACAT,IAAI,CAACQ,MAAL,CAAYC,SAAZ,EAFwB;;IAGxBnC,IAAI,CAAC+H,KAAL,CAAW7F,MAAX;IACAlC,IAAI,CAACc,QAAL,CAAcM,KAAd;IACApB,IAAI,CAACc,QAAL,CAAc6e,MAAd,CAAqB3f,IAAI,CAAC+H,KAAL,CAAWC,OAAhC;IACAhI,IAAI,CAAC0hB,QAAL,GAAgBvB,SAAS,CAAC,UAAChe,SAAD;aAAewf,IAAI,CAACre,IAAL,CAAU,IAAV,EAAgBnB,SAAhB,CAAf;KAAD,CAAzB;;CAbJ;;AChGA,IAAIyf,KAAK,GAAG;EACVC,YAAY,EAAE;CADhB;;AAIAD,KAAK,CAAC7hB,MAAN,GAAe,YAAM;EACnBwE,QAAQ,CAACud,SAAT,GAAqB,UAACve,KAAD,EAAW;QACtBwe,OADsB,GACVxe,KADU,CACtBwe,OADsB;QAE1BlL,GAAG,GAAG+K,KAAK,CAACC,YAAN,CAAmBxP,OAAnB,CAA2B0P,OAA3B,CAAV;;QAEIlL,GAAG,KAAK,CAAC,CAAb,EAAgB;MACd+K,KAAK,CAACC,YAAN,CAAmBnb,IAAnB,CAAwBqb,OAAxB;;GALJ;;EASAxd,QAAQ,CAACyd,OAAT,GAAmB,UAACze,KAAD,EAAW;QACpBwe,OADoB,GACRxe,KADQ,CACpBwe,OADoB;QAExBlL,GAAG,GAAG+K,KAAK,CAACC,YAAN,CAAmBxP,OAAnB,CAA2B0P,OAA3B,CAAV;;QACIlL,GAAG,GAAG,CAAC,CAAX,EAAc;MACZ+K,KAAK,CAACC,YAAN,CAAmBI,MAAnB,CAA0BpL,GAA1B,EAA+B,CAA/B;;GAJJ;CAVF;;AAmBA+K,KAAK,CAACM,OAAN,GAAgB,UAACC,SAAD,EAAe;MACzBA,SAAS,KAAK,YAAlB,EAAgC;QAC1BP,KAAK,CAACC,YAAN,CAAmBxP,OAAnB,CAA2B,EAA3B,IAAiC,CAAC,CAAtC,EAAyC;aAChC,CAAC,CAAR;;;QAEEuP,KAAK,CAACC,YAAN,CAAmBxP,OAAnB,CAA2B,EAA3B,IAAiC,CAAC,CAAtC,EAAyC;aAChC,CAAP;;;WAEK,CAAP;;;MAGE8P,SAAS,KAAK,UAAlB,EAA8B;QACxBP,KAAK,CAACC,YAAN,CAAmBxP,OAAnB,CAA2B,EAA3B,IAAiC,CAAC,CAAtC,EAAyC;aAChC,CAAC,CAAR;;;QAEEuP,KAAK,CAACC,YAAN,CAAmBxP,OAAnB,CAA2B,EAA3B,IAAiC,CAAC,CAAtC,EAAyC;aAChC,CAAP;;;WAEK,CAAP;;CAlBJ;;AAsBAuP,KAAK,CAAC7hB,MAAN;;AC7CO,SAASqiB,WAAT,CAAsBnC,EAAtB,EAA0BoC,QAA1B,EAAoC;MACrCC,MAAM,GAAGD,QAAQ,CAAC3d,UAAtB;;MACK4d,MAAM,CAACC,SAAP,KAAqBF,QAA1B,EAAoC;IAClCC,MAAM,CAACE,WAAP,CAAmBvC,EAAnB;GADF,MAEO;IACLqC,MAAM,CAACG,YAAP,CAAoBxC,EAApB,EAAwBoC,QAAQ,CAACK,WAAjC;;;;ACAJ,IAAIC,WAAW,GAAG,EAAlB;;AAEAA,WAAW,CAAC5iB,MAAZ,GAAqB,UAAUC,IAAV,EAAgBsI,IAAhB,EAAsB;MACrCsa,WAAW,GAAG,EAAlB;MACIvB,IAAI,GAAGrhB,IAAI,CAACqhB,IAAL,CAAUhd,qBAAV,EAAX;EAEAiE,IAAI,GAAGA,IAAI,IAAI,EAAf;EACAsa,WAAW,CAAC3C,EAAZ,GAAiB1b,QAAQ,CAACuU,aAAT,CAAuB,KAAvB,CAAjB;EACA8J,WAAW,CAAC3C,EAAZ,CAAe4C,SAAf,GAA2B,oBAA3B;EACAD,WAAW,CAAC3C,EAAZ,CAAexX,KAAf,CAAqBvI,QAArB,GAAgC,UAAhC;EACA0iB,WAAW,CAAC3C,EAAZ,CAAexX,KAAf,CAAqBnD,GAArB,GAA2B+b,IAAI,CAAC/b,GAAL,GAAW,IAAtC;EACAsd,WAAW,CAAC3C,EAAZ,CAAexX,KAAf,CAAqBrD,IAArB,GAA4Bic,IAAI,CAACjc,IAAL,GAAY,IAAxC;EACAwd,WAAW,CAAC3C,EAAZ,CAAexX,KAAf,CAAqBgW,eAArB,GAAuC,oBAAvC;EACAmE,WAAW,CAAC3C,EAAZ,CAAexX,KAAf,CAAqB4I,OAArB,GAA+B,UAA/B;;EAEAyR,OAAO,CAACF,WAAD,CAAP;;EACAR,WAAW,CAACQ,WAAW,CAAC3C,EAAb,EAAiBjgB,IAAI,CAACqhB,IAAtB,CAAX;EAEAta,MAAM,CAACpG,EAAP,CAAU,MAAV,EAAkB,YAAY;IAC5BgiB,WAAW,CAACzgB,MAAZ,CAAmB0gB,WAAnB;GADF;EAIA5iB,IAAI,CAAC+iB,MAAL,GAAc/iB,IAAI,CAAC+iB,MAAL,IAAe,EAA7B;EACA/iB,IAAI,CAAC+iB,MAAL,CAAY,aAAZ,IAA6BJ,WAA7B;CArBF;;AAwBAA,WAAW,CAACzgB,MAAZ,GAAqB,UAAU0gB,WAAV,EAAuB;EAC1CA,WAAW,CAACI,KAAZ,CAAkBC,SAAlB,GAA8BvhB,IAAI,CAACO,GAAL,CAASihB,OAAT,CAAiB,CAAjB,CAA9B;CADF;;AAIA,SAASJ,OAAT,CAAkBF,WAAlB,EAA+B;EAC7BA,WAAW,CAACI,KAAZ,GAAoBze,QAAQ,CAACuU,aAAT,CAAuB,KAAvB,CAApB;EACA8J,WAAW,CAAC3C,EAAZ,CAAeC,MAAf,CAAsB0C,WAAW,CAACI,KAAlC;EACAJ,WAAW,CAACI,KAAZ,CAAkBva,KAAlB,CAAwB8L,KAAxB,GAAgC,OAAhC;;;ACtCF;AACA;AAeA,AAA0B;EACxBhQ,QAAQ,CAAC4e,KAAT,CACE,yBAAyB,CAACC,QAAQ,CAACC,IAAT,IAAiB,WAAlB,EAA+Blc,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAAzB,GACA,oCADA,GACuC,SAFzC;;;AAMF,IAAMmc,MAAM,GAAGnC,MAAM,CAACphB,MAAP,CAAcwE,QAAQ,CAACgf,cAAT,CAAwB,OAAxB,CAAd,EAAgD;EAC7D/d,KAAK,EAAE,GADsD;EAE7DE,MAAM,EAAE;CAFK,CAAf;AAIAid,WAAW,CAAC5iB,MAAZ,CAAmBujB,MAAnB;AACA,IAAME,QAAQ,GAAGjf,QAAQ,CAACgf,cAAT,CAAwB,OAAxB,CAAjB;AACA,IAAME,OAAO,GAAGlf,QAAQ,CAACgf,cAAT,CAAwB,MAAxB,CAAhB;AACA,IAAMG,QAAQ,GAAGnf,QAAQ,CAACgf,cAAT,CAAwB,OAAxB,CAAjB;AACA,IAAMI,OAAO,GAAGpf,QAAQ,CAACgf,cAAT,CAAwB,UAAxB,CAAhB;AACA,IAAMK,UAAU,GAAGrf,QAAQ,CAACgf,cAAT,CAAwB,SAAxB,CAAnB;AAEA,IAAIM,OAAO,GAAG,IAAIvd,QAAJ,CAAW;EACvBkT,KAAK,EAAE,IAAIrL,OAAJ,CAAY,CACjB,CAAC,CAAD,EAAI,CAAJ,CADiB,EAEjB,CAAC,EAAD,EAAK,CAAL,CAFiB,EAGjB,CAAC,EAAD,EAAK,EAAL,CAHiB,EAIjB,CAAC,EAAD,EAAK,EAAL,CAJiB,EAKjB,CAAC,EAAD,EAAK,EAAL,CALiB,CAAZ,EAMJ;IACDzF,IAAI,EAAE;GAPD,CADgB;EAUvBH,SAAS,EAAE;IACTrI,QAAQ,EAAE;MACRC,CAAC,EAAE,GADK;MAERC,CAAC,EAAE;;GAbgB;EAgBvBsZ,KAAK,EAAE,iBAAY,EAhBI;EAkBvBxX,MAAM,EAAE,kBAAY;;;;;;;;;;CAlBR,CAAd;AAkCA,IAAI4hB,MAAM,GAAG,IAAIxd,QAAJ,CAAW;EACtBkT,KAAK,EAAE,IAAIuK,MAAJ,CAAW,EAAX,EAAe;IACpBrb,IAAI,EAAE;GADD,CADe;EAItBH,SAAS,EAAE;IACTrI,QAAQ,EAAE;MACRC,CAAC,EAAE,GADK;MAERC,CAAC,EAAE;;GAPe;EAUtBsZ,KAAK,EAAE,iBAAY,EAVG;EAYtBxX,MAAM,EAAE,kBAAY;;;;CAZT,CAAb;AAoBA,IAAI8hB,KAAK,GAAG,IAAI1d,QAAJ,CAAW;EACrBkT,KAAK,EAAE,IAAIR,IAAJ,CAAS,aAAT,CADc;EAErBzQ,SAAS,EAAE;IACTrI,QAAQ,EAAE;MACRC,CAAC,EAAE,GADK;MAERC,CAAC,EAAE;;GALc;EAQrBsZ,KAAK,EAAE,iBAAY,EARE;EAUrBxX,MAAM,EAAE,kBAAY;CAVV,CAAZ;AAcA,IAAI+hB,QAAQ,GAAG,IAAI3d,QAAJ,CAAW;EACxBkT,KAAK,EAAE,IAAInK,QAAJ,CAAa,CAClB,CAAC,CAAD,EAAI,CAAJ,CADkB,EAElB,CAAC,EAAD,EAAK,CAAL,CAFkB,EAGlB,CAAC,EAAD,EAAK,EAAL,CAHkB,EAIlB,CAAC,EAAD,EAAK,EAAL,CAJkB,EAKlB,CAAC,EAAD,EAAK,EAAL,CALkB,CAAb,EAMJ;IACD5G,KAAK,EAAE;GAPF,CADiB;EAUxBF,SAAS,EAAE;IACTrI,QAAQ,EAAE;MACRC,CAAC,EAAE,GADK;MAERC,CAAC,EAAE;;GAbiB;EAgBxBsZ,KAAK,EAAE,iBAAY,EAhBK;EAkBxBxX,MAAM,EAAE,kBAAY;CAlBP,CAAf;AAsBA,IAAIgiB,MAAM,GAAG,IAAI5d,QAAJ,CAAW;EACtBkT,KAAK,EAAE,CACL,IAAIlK,SAAJ,CAAc;IACZ9J,KAAK,EAAE,GADK;IAEZE,MAAM,EAAE,EAFI;IAGZ6J,EAAE,EAAE,CAHQ;IAIZC,EAAE,EAAE,CAJQ;IAKZ9G,IAAI,EAAE,OALM;IAMZE,MAAM,EAAE,MANI;IAOZD,WAAW,EAAE;GAPf,CADK,EAUL,IAAIqQ,IAAJ,CAAS,mBAAT,EAA8B;IAC5B/I,KAAK,EAAE,QADqB;IAE5BiB,UAAU,EAAE,EAFgB;IAG5BuE,SAAS,EAAE,EAHiB;IAI5B5E,QAAQ,EAAE,EAJkB;IAK5BC,SAAS,EAAE,QALiB;IAM5BF,UAAU,EAAE,QANgB;IAO5BI,UAAU,EAAE,MAPgB;IAQ5BmT,SAAS,EAAE,IARiB;IAS5BC,WAAW,EAAE,IATe;IAU5BC,QAAQ,EAAE,IAVkB;IAW5BlU,UAAU,EAAE,IAXgB;IAY5BK,eAAe,EAAE,oBAZW;IAa5BS,aAAa,EAAE,CAba;IAc5BvI,IAAI,EAAE,SAdsB;IAe5B+I,QAAQ,EAAE;GAfZ,CAVK,EA2BL,IAAI1G,IAAJ,CAAS,6BAAT,EAAwC;IACtCrC,IAAI,EAAE,KADgC;IAEtCE,MAAM,EAAE;GAFV,CA3BK,CADe;EAiCtBL,SAAS,EAAE;IACTrI,QAAQ,EAAE;MACRC,CAAC,EAAE,GADK;MAERC,CAAC,EAAE;;GApCe;EAuCtBsZ,KAAK,EAAE,iBAAY,EAvCG;EAyCtBxX,MAAM,EAAE,kBAAY;QACZqG,SADY,GACE,IADF,CACZA,SADY;QAGZ+b,eAAe,GAAG1C,KAAK,CAACM,OAAN,CAAc,YAAd,CAAxB;QACMqC,aAAa,GAAG3C,KAAK,CAACM,OAAN,CAAc,UAAd,CAAtB;QACMsC,KAAK,GAAG,GAAd;IAEAjc,SAAS,CAACrI,QAAV,CAAmBC,CAAnB,IAAwBqkB,KAAK,GAAG9iB,IAAI,CAACG,SAAb,GAAyByiB,eAAjD;IACA/b,SAAS,CAACrI,QAAV,CAAmBE,CAAnB,IAAwBokB,KAAK,GAAG9iB,IAAI,CAACG,SAAb,GAAyB0iB,aAAjD;;CAjDS,CAAb;AAqDAjB,MAAM,CAACvb,KAAP,CAAaE,SAAb,CAAuB4b,OAAvB;AACAP,MAAM,CAACvb,KAAP,CAAaE,SAAb,CAAuBgc,QAAvB;AACAX,MAAM,CAACvb,KAAP,CAAaE,SAAb,CAAuB6b,MAAvB;AACAR,MAAM,CAACvb,KAAP,CAAaE,SAAb,CAAuB+b,KAAvB;AACAV,MAAM,CAACvb,KAAP,CAAaE,SAAb,CAAuBic,MAAvB;AAEAZ,MAAM,CAAC5J,KAAP;AAEA8J,QAAQ,CAACvf,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;EACvCqf,MAAM,CAAC/B,OAAP;CADF;AAIAkC,OAAO,CAACxf,gBAAR,CAAyB,OAAzB,EAAkC,YAAM;EACtCqf,MAAM,CAACxM,IAAP;CADF;AAIA4M,QAAQ,CAACzf,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;MACnCqf,MAAM,CAACnb,MAAP,KAAkB,QAAtB,EAAgC;IAC9Bmb,MAAM,CAAC7B,MAAP;GADF,MAEO;IACL6B,MAAM,CAAC9B,KAAP;;CAJJ;AAQAmC,OAAO,CAAC1f,gBAAR,CAAyB,OAAzB,EAAkC,YAAM;EACtCqf,MAAM,CAAC5hB,IAAP,CAAYC,SAAZ,GAAwB,GAAxB;CADF;AAIAiiB,UAAU,CAAC3f,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;EACzCqf,MAAM,CAACrjB,MAAP,CAAckB,OAAd;CADF;AAIAkK,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBgY,MAAtB"}