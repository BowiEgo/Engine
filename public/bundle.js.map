{"version":3,"file":"bundle.js","sources":["../src/core/Time.js","../src/core/Scene.js","../src/core/Render.js","../src/core/Engine.js","../src/utils/index.js","../src/core/Object.js","../src/core/Input.js","../src/geometry/Vertices.js","../src/geometry/Projection.js","../src/collision/SAT.js","../src/shape/Shape.js","../src/geometry/Vector.js","../src/shape/Polygon.js","../src/shape/Circle.js","../src/shape/Rectangle.js","../src/main.js"],"sourcesContent":["const STARTING_FPS = 60;\n\nlet Time = {\n  timeScale: 0,\n  unscaledDeltaTime: 0,\n  deltaTime: 0\n};\n\nTime.reset = () => {\n  Time.timeStart = 0;\n  Time.timePassed = 0;\n  Time.fps = STARTING_FPS;\n}\n\nTime.update = (timeStamp) => {\n  if (Time.timeStart === 0) {\n    Time.timeStart = timeStamp;\n    Time.fps = STARTING_FPS;\n  } else {\n    Time.fps = 1000 / (timeStamp - Time.timeStart);\n  }\n\n  Time.unscaledDeltaTime = 1 / Time.fps;\n  Time.deltaTime = Time.unscaledDeltaTime * Time.timeScale;\n\n  Time.timePassed += Time.unscaledDeltaTime;\n  Time.timeStart = timeStamp;\n}\n\nTime.reset();\n\nexport default Time\n","let Scene = {};\n\nScene.create = (game) => {\n  let scene = {};\n\n  scene.game = game;\n  scene.objectArray = [];\n\n  scene.addObject = (object) => {\n    scene.objectArray.push(object);\n  }\n\n  scene.reset = () => {\n    scene.objectArray.forEach((object) => {\n      object.reset();\n    })\n  }\n\n  scene.update = () => {\n    scene.objectArray.forEach((object) => {\n      if (game.status === 'playing') {\n        object.updateCb.call(object);\n      }\n    })\n  }\n\n  return scene\n}\n\nexport default Scene\n","let Render = {};\n\nRender.create = (game, el, opts) => {\n  console.log('render-create', el, opts);\n  let render = {\n    el: el,\n    game: game\n  };\n\n  const { width = 300, height = 300, scale = 2, bgColor = 'aliceblue' } = opts;\n  const elRect = el.getBoundingClientRect();\n\n  render.ctxW = width || elRect.width;\n  render.ctxH = height || elRect.height;\n\n  render.canvasEl = document.createElement('canvas');\n  render.canvasEl.width = render.ctxW * scale;\n  render.canvasEl.height = render.ctxH * scale;\n  render.canvasEl.style.width = render.ctxW + 'px';\n  render.canvasEl.style.height = render.ctxH + 'px';\n  render.canvasEl.style.backgroundColor = bgColor;\n  render.el.append(render.canvasEl);\n\n  render.ctx = render.canvasEl.getContext('2d');\n  render.ctx.scale(scale, scale);\n\n  render.clear = () => {\n    render.ctx.clearRect(0, 0, render.ctxW, render.ctxH);\n  }\n\n  render.render = () => {\n    const { objectArray } = render.game.scene;\n    console.log('render', objectArray);\n\n    objectArray.forEach(object => {\n      const shapeType = object.shape.type;\n\n      switch (shapeType) {\n        case 'polygon':\n          renderPolygon(render.ctx, object.shape);\n          break;\n        case 'rectangle':\n          renderRectangle(render.ctx, object.shape);\n          break;\n        case 'circle':\n          renderCircle(render.ctx, object.shape);\n          break;\n        default:\n          break;\n      }\n    })\n  }\n\n  return render\n}\n\nfunction renderPolygon (ctx, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  ctx.beginPath();\n  ctx.moveTo(shape.vertices[0].x + posX, shape.vertices[0].y + posY);\n  for (let i = 1; i < shape.vertices.length; i++) {\n    ctx.lineTo(shape.vertices[i].x + posX, shape.vertices[i].y + posY);\n  }\n  ctx.closePath();\n\n  draw(ctx, shape);\n}\n\nfunction renderRectangle (ctx, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  ctx.beginPath();\n  ctx.rect(posX, posY, shape.width, shape.height);\n  ctx.closePath();\n\n  draw(ctx, shape);\n}\n\nfunction renderCircle (ctx, shape) {\n  const { x: posX, y: posY } = shape.transform.position;\n\n  ctx.beginPath();\n  ctx.arc(posX, posY, shape.radius, 0, Math.PI * 2, false);\n  ctx.closePath();\n\n  draw(ctx, shape);\n}\n\nfunction draw (ctx, shape) {\n  ctx.lineWidth = shape.strokeWidth;\n  ctx.strokeStyle = shape.strokeStyle;\n  ctx.fillStyle = shape.fillStyle;\n  shape.strokeWidth > 0 && ctx.stroke();\n  ctx.fill();\n}\n\nexport default Render;\n","import Time from './Time';\nimport Scene from './Scene';\nimport Render from './Render';\n\nlet _reqFrame, _cancelFrame, _frameTimeout;\nif (typeof window !== 'undefined') {\n  _reqFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function (callback) {\n    var self = this, start, finish;\n\n    _frameTimeout = window.setTimeout(function () {\n      start = +new Date();\n      callback(start);\n      finish = +new Date();\n      self.timeout = 1000 / 60 - (finish - start);\n    }, self.timeout);\n  };\n\n  _cancelFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame || function () {\n    window.clearTimeout(_frameTimeout);\n  };\n}\n\nlet Engine = {};\n\nEngine.create = (el, opts) => {\n  let game = {};\n  game.el = el;\n  game.status = 'stop';\n  game.showFPS = opts.showFPS !== undefined ? opts.showFPS : true;\n  game.PAUSE_TIMEOUT = 100;\n\n  game.render = Render.create(\n    game,\n    el,\n    opts\n  );\n\n  game.scene = Scene.create(game);\n\n  game.start = () => {\n    Time.timeScale = 1;\n    Engine.run(game);\n    game.status = 'playing';\n  }\n\n  game.restart = () => {\n    Engine.reset(game);\n    game.start();\n  }\n\n  game.pause = () => {\n    if (game.status === 'playing') {\n      Time.timeScale = 0;\n      game.status = 'paused';\n    }\n  }\n\n  game.resume = () => {\n    if (game.status === 'paused') {\n      Time.timeScale = 1;\n      game.status = 'playing';\n    }\n  }\n\n  game.stop = () => {\n    Engine.reset(game);\n    game.status = 'stop';\n  }\n\n  Engine.reset(game);\n\n  return game;\n}\n\nEngine.reset = (game) => {\n  _cancelFrame(game.frameReq);\n  Time.reset();\n  game.frameReq = null;\n  game.scene.reset();\n  game.render.clear();\n  game.render.render();\n}\n\nEngine.run = (game) => {\n  if (game.frameReq) {\n    game.stop();\n  }\n\n  game.frameReq = _reqFrame((timeStamp) => tick.call(null, timeStamp));\n\n  function tick (timeStamp) {\n    Time.update(timeStamp); // update Time\n    game.scene.update();\n    game.render.clear();\n    game.render.render();\n    game.frameReq = _reqFrame((timeStamp) => tick.call(null, timeStamp));\n  }\n}\n\nexport default Engine\n","/**\n * Returns true if the object is a function.\n * @method isFunction\n * @param {object} obj\n * @return {boolean} True if the object is a function, otherwise false\n */\nexport function isFunction (obj) {\n  return typeof obj === 'function';\n}\n","import { isFunction } from '../utils';\n\nclass Object {\n  constructor (opts) {\n    this.shape = opts.shape;\n    this.fill = opts.fill !== undefined ? opts.fill : '#83cbff';\n    this.startCb = isFunction(opts.start) ? opts.start : this.start;\n    this.updateCb = isFunction(opts.update) ? opts.update : this.update;\n    this.transform0 = {\n      position: {\n        x: opts.transform.position.x || 0,\n        y: opts.transform.position.y || 0\n      }\n    }\n\n    this.reset();\n  }\n\n  start () {\n  }\n\n  update () {\n  }\n\n  reset () {\n    this.shape.transform = this.transform = JSON.parse(JSON.stringify(this.transform0));\n  }\n\n  render () {\n    const { ctx } = this.Scene;\n    const { position } = this.transform;\n    const rectW = 40;\n    const rectH = 40;\n\n    ctx.fillStyle = this.fill;\n    ctx.fillRect(position.x, position.y, rectW, rectH);\n  }\n}\n\nexport default Object\n","let Input = {\n  keyCodeArray: []\n};\n\nInput.create = () => {\n  document.onkeydown = (event) => {\n    const { keyCode } = event;\n    let idx = Input.keyCodeArray.indexOf(keyCode);\n\n    if (idx === -1) {\n      Input.keyCodeArray.push(keyCode);\n    }\n  }\n\n  document.onkeyup = (event) => {\n    const { keyCode } = event;\n    let idx = Input.keyCodeArray.indexOf(keyCode);\n    if (idx > -1) {\n      Input.keyCodeArray.splice(idx, 1);\n    }\n  }\n}\n\nInput.getAxis = (direction) => {\n  if (direction === 'horizontal') {\n    if (Input.keyCodeArray.indexOf(37) > -1) {\n      return -1\n    }\n    if (Input.keyCodeArray.indexOf(39) > -1) {\n      return 1\n    }\n    return 0\n  }\n\n  if (direction === 'vertical') {\n    if (Input.keyCodeArray.indexOf(38) > -1) {\n      return -1\n    }\n    if (Input.keyCodeArray.indexOf(40) > -1) {\n      return 1\n    }\n    return 0\n  }\n}\n\nInput.create();\n\n// class Input {\n//   constructor () {\n//     this.keyCodeArray = [];\n\n//     document.onkeydown = (event) => {\n//       const { keyCode } = event;\n//       let idx = this.keyCodeArray.indexOf(keyCode);\n\n//       if (idx === -1) {\n//         this.keyCodeArray.push(keyCode);\n//       }\n//     }\n\n//     document.onkeyup = (event) => {\n//       const { keyCode } = event;\n//       let idx = this.keyCodeArray.indexOf(keyCode);\n//       if (idx > -1) {\n//         this.keyCodeArray.splice(idx, 1);\n//       }\n//     }\n//   }\n\n//   getAxis (direction) {\n    \n//   }\n// }\n\nexport default Input\n","class Vertices {\n  constructor (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\nexport default Vertices\n","class Projection {\n  constructor (min, max) {\n    if (min > max) {\n      throw 'min value should less than max value';\n    }\n    this.min = min;\n    this.max = max;\n  }\n\n  overlaps (projection) {\n    return this.max > projection.min && projection.max > this.min;\n  }\n}\n\nexport default Projection\n","let SAT = {};\n\nSAT.detectCollide = (shapeA, shapeB) => {\n  return !SAT.separationOnAxes(shapeA, shapeB);\n}\n\nSAT.separationOnAxes = (shapeA, shapeB) => {\n  let axes = shapeA.getAxes().concat(shapeB.getAxes());\n\n  for (let i = 0; i < axes.length; i++) {\n    let axis = axes[i];\n    let projection1 = shapeA.project(axis);\n    let projection2 = shapeB.project(axis);\n    if (!projection1.overlaps(projection2)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default SAT\n","import SAT from '../collision/SAT';\n\nclass Shape {\n  constructor (opts) {\n    console.log('shape,', opts);\n    opts = opts || {};\n    this.transform = {\n      position: {}\n    };\n    this.fillStyle = opts.fill || '#83cbff';\n    this.strokeWidth = opts.strokeWidth || 0;\n    this.strokeStyle = opts.stroke || 'grey';\n  }\n\n  collidesWith (otherShape) {\n    return SAT.detectCollide(this, otherShape);\n  }\n\n  getAxes () {\n    throw 'getAxes() not implemented';\n  }\n\n  project () {\n    throw 'project(axis) not implemented';\n  }\n\n  move () {\n    throw 'move(dx, dy) note implemented';\n  }\n}\n\nexport default Shape\n","class Vector {\n  constructor (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  magnitude () {\n    return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n  }\n\n  add (vector) {\n    let v = new Vector();\n    v.x = this.x + vector.x;\n    v.y = this.y + vector.y;\n    return v;\n  }\n\n  /**\n   * Subtracts another vector.\n   * @method sub\n   * @param {vector} vector\n   * @return {vector} A new vector of two vector subtracted\n   */\n  sub (vector) {\n    let v = new Vector();\n    v.x = this.x - vector.x;\n    v.y = this.y - vector.y;\n    return v;\n  }\n\n  dot (vector) {\n    return this.x * vector.x + this.y * vector.y;\n  }\n\n  edge (vector) {\n    return this.sub(vector);\n  }\n\n  /**\n   * Returns the perpendicular vector. Set `negate` to true for the perpendicular in the opposite direction.\n   * @method perp\n   * @param {vector} vector\n   * @param {bool} [negate=false]\n   * @return {vector} The perpendicular vector\n   */\n  perp (negate) {\n    negate = negate === true ? -1 : 1;\n    let v = new Vector();\n    v.x = negate * -this.y;\n    v.y = negate * this.x;\n    return v;\n  }\n\n  normalize () {\n    let v = new Vector(0, 0), m = this.magnitude();\n\n    if (m !== 0) {\n      v.x = this.x / m;\n      v.y = this.y / m;\n    }\n    return v;\n  }\n\n  normal () {\n    let p = this.perp();\n    return p.normalize();\n  }\n}\n\nexport default Vector","import Point from '../geometry/Vertices';\nimport Projection from '../geometry/Projection';\nimport Shape from './Shape';\nimport Vector from '../geometry/Vector';\nimport Vertices from '../geometry/Vertices';\n\nclass Polygon extends Shape {\n  constructor (points, opts) {\n    super(opts);\n    this.type = 'polygon';\n    this.vertices = points.map(point => new Vertices(point[0], point[1]));\n  }\n\n  getAxes () {\n    const { x: posX, y: posY } = this.transform.position;\n\n    let v1 = new Vector(),\n      v2 = new Vector(),\n      axes = [],\n      pointNum = this.vertices.length;\n\n  \n    for (let i = 0; i < pointNum - 1; i++) {\n      v1.x = this.vertices[i].x + posX;\n      v1.y = this.vertices[i].y + posY;\n\n      v2.x = this.vertices[i + 1].x + posX;\n      v2.y = this.vertices[i + 1].y + posY;\n\n      axes.push(v1.edge(v2).normal());\n    }\n\n    v1.x = this.vertices[pointNum - 1].x + posX;\n    v1.y = this.vertices[pointNum - 1].y + posY;\n\n    v2.x = this.vertices[0].x + posX;\n    v2.y = this.vertices[0].y + posY;\n    \n    axes.push(v1.edge(v2).normal());\n\n    return axes;\n  }\n\n  project (axis) {\n    const { x: posX, y: posY } = this.transform.position;\n\n    let scalars = [],\n      v = new Vector();\n\n    this.vertices.forEach(point => {\n      v.x = point.x + posX;\n      v.y = point.y + posY;\n      scalars.push(v.dot(axis));\n    })\n\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  addPoint (x, y) {\n    this.vertices.push(new Point(x, y));\n  }\n\n  move (dx, dy) {\n    for (let i = 0, point; i < this.vertices.length; i++) {\n      point = this.vertices[i];\n      point.x += dx;\n      point.y += dy;\n    }\n  }\n}\n\nexport default Polygon;\n","import Shape from './Shape';\n\nclass Cirlce extends Shape {\n  constructor (radius, opts) {\n    super(opts);\n    this.type = 'circle';\n    this.radius = radius;\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Cirlce;","import Shape from './Shape';\n\nclass Rectangle extends Shape {\n  constructor (width, height, opts) {\n    super(opts);\n    this.type = 'rectangle';\n    this.width = width;\n    this.height = height;\n  }\n\n  getAxes () {\n  }\n\n  project (axis) {\n  }\n\n  addPoint (x, y) {\n  }\n\n  move (dx, dy) {\n  }\n}\n\nexport default Rectangle;","/*global ENV*/\nimport Engine from './core/Engine';\nimport Object from './core/Object';\nimport Input from './core/Input';\nimport Time from './core/Time';\nimport Polygon from './shape/Polygon';\nimport Circle from './shape/Circle';\nimport Rectangle from './shape/Rectangle';\n\n// Enable LiveReload\nif (ENV !== 'production') {\n  document.write(\n    '<script src=\"http://' + (location.host || 'localhost').split(':')[0] +\n    ':35729/livereload.js?snipver=1\"></' + 'script>'\n  )\n}\n\nconst myGame = Engine.create(document.getElementById('stage'), {\n  width: 600,\n  height: 300\n});\nconst startBtn = document.getElementById('start');\nconst stopBtn = document.getElementById('stop');\nconst pauseBtn = document.getElementById('pause');\nconst fastBtn = document.getElementById('fastward');\n\nlet player = new Object({\n  shape: new Polygon([\n    [0, 0],\n    [60, 0],\n    [60, 20],\n    [30, 40],\n    [10, 40]\n  ], {\n    fill: '#009688'\n  }),\n  transform: {\n    position: {\n      x: 230,\n      y: 150\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n    let { transform } = this;\n\n    const horizontalInput = Input.getAxis('horizontal');\n    const verticalInput = Input.getAxis('vertical');\n    const speed = 100;\n\n    transform.position.x += speed * Time.deltaTime * horizontalInput;\n    transform.position.y += speed * Time.deltaTime * verticalInput;\n\n    if (this.shape.collidesWith(obstacle1.shape)) {\n      console.log('collide!!');\n    }\n  }\n});\n\nlet obstacle1 = new Object({\n  shape: new Rectangle(600, 20),\n  transform: {\n    position: {\n      x: 0,\n      y: 270\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n  }\n});\n\nlet obstacle2 = new Object({\n  shape: new Circle(20, {\n    fill: '#ffc107'\n  }),\n  transform: {\n    position: {\n      x: 100,\n      y: 50\n    }\n  },\n  start: function () {\n  },\n  update: function () {\n    // let { transform } = this;\n\n    // const speed = 100;\n    // transform.position.x += speed * Time.deltaTime;\n  }\n});\n\nmyGame.scene.addObject(player);\nmyGame.scene.addObject(obstacle1);\nmyGame.scene.addObject(obstacle2);\n\nmyGame.render.render();\n\nstartBtn.addEventListener('click', () => {\n  myGame.restart();\n})\n\nstopBtn.addEventListener('click', () => {\n  myGame.stop();\n})\n\npauseBtn.addEventListener('click', () => {\n  if (myGame.status === 'paused') {\n    myGame.resume();\n  } else {\n    myGame.pause();\n  }\n})\n\nfastBtn.addEventListener('click', () => {\n  myGame.Time.timeScale = 1.5;\n})\n\nconsole.log(myGame)\n"],"names":["STARTING_FPS","Time","timeScale","unscaledDeltaTime","deltaTime","reset","timeStart","timePassed","fps","update","timeStamp","Scene","create","game","scene","objectArray","addObject","object","push","forEach","status","updateCb","call","Render","el","opts","console","log","render","width","height","scale","bgColor","elRect","getBoundingClientRect","ctxW","ctxH","canvasEl","document","createElement","style","backgroundColor","append","ctx","getContext","clear","clearRect","shapeType","shape","type","renderPolygon","renderRectangle","renderCircle","transform","position","posX","x","posY","y","beginPath","moveTo","vertices","i","length","lineTo","closePath","draw","rect","arc","radius","Math","PI","lineWidth","strokeWidth","strokeStyle","fillStyle","stroke","fill","_reqFrame","_cancelFrame","_frameTimeout","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","callback","self","start","finish","setTimeout","Date","timeout","cancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","Engine","showFPS","undefined","PAUSE_TIMEOUT","run","restart","pause","resume","stop","frameReq","tick","isFunction","obj","Object","startCb","transform0","JSON","parse","stringify","rectW","rectH","fillRect","Input","keyCodeArray","onkeydown","event","keyCode","idx","indexOf","onkeyup","splice","getAxis","direction","Vertices","Projection","min","max","projection","SAT","detectCollide","shapeA","shapeB","separationOnAxes","axes","getAxes","concat","axis","projection1","project","projection2","overlaps","Shape","otherShape","Vector","sqrt","pow","vector","v","sub","negate","m","magnitude","p","perp","normalize","Polygon","points","map","point","v1","v2","pointNum","edge","normal","scalars","dot","apply","Point","dx","dy","Cirlce","Rectangle","write","location","host","split","myGame","getElementById","startBtn","stopBtn","pauseBtn","fastBtn","player","horizontalInput","verticalInput","speed","collidesWith","obstacle1","obstacle2","Circle","addEventListener"],"mappings":"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"}